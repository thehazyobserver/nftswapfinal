const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Blt0uD8X.js","assets/vendor-DnY-W9X-.js"])))=>i.map(i=>d[i]);
import{r as l,a as Ge,R as je,u as Xe,L as $e,b as et,c as Be,B as tt}from"./vendor-DnY-W9X-.js";import{C as E,B as Me,f as ke,J as ze,p as nt,a as at}from"./ethers-Bg9Q1_ah.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const b of u)if(b.type==="childList")for(const a of b.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function i(u){const b={};return u.integrity&&(b.integrity=u.integrity),u.referrerPolicy&&(b.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?b.credentials="include":u.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function s(u){if(u.ep)return;u.ep=!0;const b=i(u);fetch(u.href,b)}})();var De={exports:{}},Pe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var st=l,rt=Symbol.for("react.element"),it=Symbol.for("react.fragment"),ot=Object.prototype.hasOwnProperty,lt=st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dt={key:!0,ref:!0,__self:!0,__source:!0};function Ve(t,r,i){var s,u={},b=null,a=null;i!==void 0&&(b=""+i),r.key!==void 0&&(b=""+r.key),r.ref!==void 0&&(a=r.ref);for(s in r)ot.call(r,s)&&!dt.hasOwnProperty(s)&&(u[s]=r[s]);if(t&&t.defaultProps)for(s in r=t.defaultProps,r)u[s]===void 0&&(u[s]=r[s]);return{$$typeof:rt,type:t,key:b,ref:a,props:u,_owner:lt.current}}Pe.Fragment=it;Pe.jsx=Ve;Pe.jsxs=Ve;De.exports=Pe;var e=De.exports,qe,We=Ge;qe=We.createRoot,We.hydrateRoot;const ct=[{inputs:[{internalType:"address",name:"_centralStonerFeePool",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidERC721",type:"error"},{inputs:[],name:"InvalidShareRange",type:"error"},{inputs:[],name:"PoolAlreadyExists",type:"error"},{inputs:[],name:"PoolDoesNotExist",type:"error"},{inputs:[],name:"ZeroAddressNotAllowed",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"swapFeeInWei",type:"uint256"},{indexed:!1,internalType:"uint256",name:"stonerShare",type:"uint256"}],name:"DefaultFeesUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"centralStonerFeePool",type:"address"},{indexed:!0,internalType:"address",name:"deployer",type:"address"}],name:"FactoryDeployed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"nftCollection",type:"address"},{indexed:!0,internalType:"address",name:"swapPool",type:"address"}],name:"PoolDeactivated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"nftCollection",type:"address"},{indexed:!0,internalType:"address",name:"swapPool",type:"address"},{indexed:!0,internalType:"address",name:"stakeReceipt",type:"address"},{indexed:!1,internalType:"address",name:"creator",type:"address"}],name:"PoolPairCreated",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allCollections",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allPools",outputs:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"bool",name:"active",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"centralStonerFeePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"collectionToPool",outputs:[{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"bool",name:"exists",type:"bool"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"uint256",name:"customSwapFee",type:"uint256"},{internalType:"uint256",name:"customStonerShare",type:"uint256"}],name:"createPoolPair",outputs:[{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"}],name:"deactivatePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"defaultStonerShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"defaultSwapFeeInWei",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getActivePools",outputs:[{components:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"bool",name:"active",type:"bool"}],internalType:"struct MultiPoolFactoryNonProxy.PoolData[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllCollections",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllPools",outputs:[{components:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"bool",name:"active",type:"bool"}],internalType:"struct MultiPoolFactoryNonProxy.PoolData[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getFactoryStats",outputs:[{internalType:"uint256",name:"totalPools",type:"uint256"},{internalType:"address",name:"centralPool",type:"address"},{internalType:"uint256",name:"defaultFee",type:"uint256"},{internalType:"uint256",name:"defaultShare",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"collections",type:"address[]"}],name:"getMultiplePoolInfos",outputs:[{components:[{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"bool",name:"exists",type:"bool"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"}],internalType:"struct MultiPoolFactoryNonProxy.PoolInfo[]",name:"poolInfos",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"}],name:"getPoolInfo",outputs:[{components:[{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"bool",name:"exists",type:"bool"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"}],internalType:"struct MultiPoolFactoryNonProxy.PoolInfo",name:"poolInfo",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"}],name:"poolExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"registerMe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"}],name:"registerPoolPair",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newSwapFeeInWei",type:"uint256"},{internalType:"uint256",name:"newStonerShare",type:"uint256"}],name:"setDefaultFees",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],Te=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidURI",type:"error"},{inputs:[],name:"NonTransferable",type:"error"},{inputs:[],name:"OnlyPool",type:"error"},{inputs:[],name:"PoolAlreadySet",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"newBaseURI",type:"string"}],name:"BaseURIUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"pool",type:"address"}],name:"PoolSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"receiptTokenId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"originalTokenId",type:"uint256"}],name:"ReceiptBurned",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"originalTokenId",type:"uint256"}],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"originalTokenIds",type:"uint256[]"}],name:"batchMint",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"receiptTokenIds",type:"uint256[]"}],name:"batchBurn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserReceipts",outputs:[{internalType:"uint256[]",name:"receipts",type:"uint256[]"},{internalType:"uint256[]",name:"originalTokens",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"getOriginalTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"getReceiptInfo",outputs:[{internalType:"uint256",name:"originalTokenId",type:"uint256"},{internalType:"uint256",name:"mintTime",type:"uint256"},{internalType:"address",name:"originalMinter",type:"address"},{internalType:"uint256",name:"age",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserReceiptHistory",outputs:[{internalType:"uint256[]",name:"receiptIds",type:"uint256[]"},{internalType:"uint256[]",name:"originalTokenIds",type:"uint256[]"},{internalType:"uint256[]",name:"mintTimes",type:"uint256[]"},{internalType:"uint256[]",name:"ages",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCollectionTimeline",outputs:[{internalType:"uint256",name:"totalMinted",type:"uint256"},{internalType:"uint256",name:"totalBurned",type:"uint256"},{internalType:"uint256",name:"currentSupply",type:"uint256"},{internalType:"uint256",name:"averageAge",type:"uint256"},{internalType:"uint256",name:"oldestActive",type:"uint256"},{internalType:"uint256",name:"newestActive",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserReceiptPortfolio",outputs:[{internalType:"uint256",name:"totalReceipts",type:"uint256"},{internalType:"uint256",name:"averageHoldingTime",type:"uint256"},{internalType:"uint256",name:"totalOriginalValue",type:"uint256"},{internalType:"uint256[]",name:"receiptIds",type:"uint256[]"},{internalType:"uint256[]",name:"originalTokenIds",type:"uint256[]"},{internalType:"uint256[]",name:"holdingDurations",type:"uint256[]"},{internalType:"address[]",name:"poolAddresses",type:"address[]"},{internalType:"uint256",name:"oldestReceiptAge",type:"uint256"},{internalType:"uint256",name:"newestReceiptAge",type:"uint256"},{internalType:"bool",name:"hasLongTermHoldings",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"},{internalType:"address",name:"expectedPool",type:"address"}],name:"validateReceipt",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"uri",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_pool",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"registerMe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptToOriginalToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptMintTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptMinter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"approve",outputs:[],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"bool",name:"",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"}],ve=[{inputs:[{internalType:"address",name:"_nftCollection",type:"address"},{internalType:"address",name:"_receiptContract",type:"address"},{internalType:"address",name:"_stonerPool",type:"address"},{internalType:"uint256",name:"_swapFeeInWei",type:"uint256"},{internalType:"uint256",name:"_stonerShare",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AlreadyInitialized",type:"error"},{inputs:[],name:"IncorrectFee",type:"error"},{inputs:[],name:"InvalidReceiptToken",type:"error"},{inputs:[],name:"InvalidStonerShare",type:"error"},{inputs:[],name:"NoRewardsToClaim",type:"error"},{inputs:[],name:"NoTokensAvailable",type:"error"},{inputs:[],name:"NotInitialized",type:"error"},{inputs:[],name:"NotSlotOwner",type:"error"},{inputs:[],name:"NotTokenOwner",type:"error"},{inputs:[],name:"SameTokenSwap",type:"error"},{inputs:[],name:"SlotNotActive",type:"error"},{inputs:[],name:"TokenNotApproved",type:"error"},{inputs:[],name:"TokenUnavailable",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaxBatchSize",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newMaxUnstakeAll",type:"uint256"}],name:"BatchLimitsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"swapCount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalFeePaid",type:"uint256"}],name:"BatchSwapExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256[]",name:"receiptTokenIds",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"tokensReceived",type:"uint256[]"}],name:"BatchUnstaked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"stonerAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"rewardsAmount",type:"uint256"}],name:"FeeSplit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardsClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardsDistributed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"slotId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newShare",type:"uint256"}],name:"StonerShareUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenIdIn",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokenIdOut",type:"uint256"},{indexed:!1,internalType:"uint256",name:"slotId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"feePaid",type:"uint256"}],name:"SwapExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newFeeInWei",type:"uint256"}],name:"SwapFeeUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"slotId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"Unstaked",type:"event"},{inputs:[],name:"claimRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"emergencyWithdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"exit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getContractInfo",outputs:[{internalType:"address",name:"nft",type:"address"},{internalType:"address",name:"receipt",type:"address"},{internalType:"address",name:"stoner",type:"address"},{internalType:"uint256",name:"fee",type:"uint256"},{internalType:"uint256",name:"share",type:"uint256"},{internalType:"uint256",name:"poolSize",type:"uint256"},{internalType:"uint256",name:"stakedCount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPoolSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPoolTokens",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserActiveSlotCount",outputs:[{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserSlots",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserStakes",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"initialized",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastUpdateTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxBatchSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxUnstakeAllLimit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextSlotId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nftCollection",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"pure",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"pendingRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolSlots",outputs:[{internalType:"address",name:"originalStaker",type:"address"},{internalType:"uint256",name:"stakedAt",type:"uint256"},{internalType:"bool",name:"active",type:"bool"},{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"receiptContract",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptToSlot",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registerMe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardPerToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"newMaxBatchSize",type:"uint256"},{internalType:"uint256",name:"newMaxUnstakeAll",type:"uint256"}],name:"setBatchLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newShare",type:"uint256"}],name:"setStonerShare",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newFeeInWei",type:"uint256"}],name:"setSwapFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"stakeNFT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"stakeNFTBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stonerPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stonerShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"swapFeeInWei",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenIdIn",type:"uint256"}],name:"swapNFT",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIdsIn",type:"uint256[]"}],name:"swapNFTBatch",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenIndexInPool",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalActiveSlots",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalRewardsDistributed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unstakeAllNFTs",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"unstakeNFT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"receiptTokenIds",type:"uint256[]"}],name:"unstakeNFTBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"userSlots",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];function Ne({image:t,tokenId:r,size:i=64}){const[s,u]=je.useState(!1),[b,a]=je.useState(!0);return!t||s?e.jsx("div",{style:{width:i,height:i},className:"bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800 rounded-lg flex items-center justify-center text-gray-600 dark:text-gray-400 text-xs font-mono border border-gray-300 dark:border-gray-600 shadow-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg mb-1",children:"ðŸ–¼ï¸"}),e.jsxs("div",{children:["#",r]})]})}):e.jsxs("div",{className:"relative",style:{width:i,height:i},children:[b&&e.jsx("div",{style:{width:i,height:i},className:"absolute inset-0 bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800 rounded-lg flex items-center justify-center animate-pulse",children:e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})}),e.jsx("img",{src:t,alt:`NFT #${r}`,style:{width:i,height:i},className:"rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 object-cover",onError:()=>u(!0),onLoad:()=>a(!1)})]})}function Re({count:t=6,size:r=56}){return e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:Array.from({length:t}).map((i,s)=>e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"shimmer rounded-xl border-2 border-gray-200 dark:border-gray-700 shadow-sm",style:{width:r+8,height:r+32},children:[e.jsx("div",{className:"bg-gray-300 dark:bg-gray-600 rounded-lg m-1 animate-pulse",style:{width:r,height:r}}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded mx-2 mt-2 animate-pulse"})]})},s))})}const He=l.createContext(),Ae=()=>{const t=l.useContext(He);if(!t)throw new Error("useToast must be used within a ToastProvider");return t};function ut({children:t}){const[r,i]=l.useState([]),s=l.useCallback((p,d="info",g=5e3,k=null)=>{const y=Date.now()+Math.random(),_={id:y,message:p,type:d,txHash:k,createdAt:Date.now()};return i(S=>[...S,_]),g>0&&setTimeout(()=>{i(S=>S.filter(B=>B.id!==y))},g),y},[]),u=l.useCallback(p=>{i(d=>d.filter(g=>g.id!==p))},[]),b=l.useCallback((p,d=null,g=5e3)=>s(p,"success",g,d),[s]),a=l.useCallback((p,d=7e3)=>s(p,"error",d),[s]),f=l.useCallback((p,d=5e3)=>s(p,"info",d),[s]),n=l.useCallback((p,d=null)=>s(p,"loading",0,d),[s]);return e.jsxs(He.Provider,{value:{success:b,error:a,info:f,loading:n,removeToast:u},children:[t,e.jsx(pt,{toasts:r,onRemove:u})]})}function pt({toasts:t,onRemove:r}){return e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 pointer-events-none",children:t.map(i=>e.jsx(mt,{toast:i,onRemove:r},i.id))})}function mt({toast:t,onRemove:r}){const i=()=>{switch(t.type){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200";case"loading":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200";default:return"bg-gray-50 dark:bg-gray-900/20 border-gray-200 dark:border-gray-800 text-gray-800 dark:text-gray-200"}},s=()=>{switch(t.type){case"success":return e.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})});case"error":return e.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})});case"loading":return e.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"});default:return e.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"â„¹"})})}};return e.jsx("div",{className:`max-w-md w-full p-4 rounded-xl border shadow-lg backdrop-blur-sm pointer-events-auto transform transition-all duration-300 animate-slide-in ${i()}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[s(),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium leading-relaxed",children:t.message}),t.txHash&&e.jsx("a",{href:`https://explorer.sonic.org/tx/${t.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs underline opacity-75 hover:opacity-100 transition-opacity mt-1 inline-block",children:"View Transaction â†’"})]}),e.jsx("button",{onClick:()=>r(t.id),className:"opacity-50 hover:opacity-100 transition-opacity",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}function yt(){const[t,r]=l.useState({}),i=Ae();return{startTransaction:(p,d="Transaction pending...")=>{const g=i.loading(d);r(k=>({...k,[p]:{status:"pending",message:d,toastId:g,startTime:Date.now()}}))},updateTransaction:(p,d,g)=>{r(k=>{const y=k[p];if(!y)return k;i.removeToast(y.toastId);const _=i.success(g,d);return{...k,[p]:{...y,status:"success",txHash:d,message:g,toastId:_}}})},failTransaction:(p,d)=>{r(g=>{const k=g[p];if(!k)return g;i.removeToast(k.toastId);let y="Transaction failed";d!=null&&d.message&&(d.message.includes("user rejected")?y="Transaction cancelled by user":d.message.includes("insufficient funds")?y="Insufficient funds for transaction":y=d.message);const _=i.error(y);return{...g,[p]:{...k,status:"failed",message:y,toastId:_}}})},clearTransaction:p=>{r(d=>{const g=d[p];g!=null&&g.toastId&&i.removeToast(g.toastId);const{[p]:k,...y}=d;return y})},isTransactionPending:p=>{var d;return((d=t[p])==null?void 0:d.status)==="pending"},getTransactionState:p=>t[p]||null}}function Ye(){const t=yt();return Ae(),{...t,executeTransaction:async(i,s,u={})=>{const{pendingMessage:b="Transaction pending...",successMessage:a="Transaction successful!",onSuccess:f,onError:n}=u;try{t.startTransaction(i,b);const p=await s();let d=null,g=a;if(p!=null&&p.hash&&(d=p.hash,p.wait&&(await p.wait()).status===0))throw new Error("Transaction failed during execution");return t.updateTransaction(i,d,g),f&&f(p),p}catch(p){throw console.error(`Transaction ${i} failed:`,p),t.failTransaction(i,p),n&&n(p),p}}}}function xt({walletNFTs:t,poolNFTs:r,loading:i,onSwap:s,status:u,swapFee:b}){const[a,f]=l.useState([]),n=Ae(),{executeTransaction:p,isTransactionPending:d}=Ye(),g=async()=>{if(a.length===0){n.error("Please select NFTs to swap");return}try{await p("swap",()=>s(a),{pendingMessage:`Swapping ${a.length} NFT${a.length>1?"s":""}...`,successMessage:`Successfully swapped ${a.length} NFT${a.length>1?"s":""}!`,onSuccess:()=>{f([])},onError:y=>{console.error("Swap failed:",y)}})}catch{}},k=d("swap");return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-lg flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 1H4m0 0l4 4M4 12l4-4"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent",children:"Swap Your NFTs"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Exchange your NFTs with those available in the pool"})]})]})}),e.jsx("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Selected:"}),e.jsxs("div",{className:`px-2 py-1 rounded-full text-sm font-medium ${a.length>8?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300":a.length>0?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400"}`,children:[a.length,"/10 NFTs"]})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Max 10 per batch"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-7 h-7 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("h3",{className:"text-base font-semibold text-gray-800 dark:text-gray-200",children:["Your NFTs (",t.length,")"]})]}),e.jsx("div",{className:"bg-white/75 dark:bg-gray-800/75 rounded-xl p-3 border border-gray-200 dark:border-gray-700",children:i?e.jsx(Re,{count:6,size:56}):t.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ–¼ï¸"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No NFTs found in your wallet"})]}):e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-2",children:t.map(y=>e.jsxs("button",{className:`relative border-2 rounded-lg p-1.5 bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 shadow-sm transition-all duration-200 ${a.includes(y.tokenId)?"border-blue-400 scale-105 ring-2 ring-blue-400/50 shadow-lg":"border-gray-200 dark:border-gray-700 hover:border-blue-300 hover:shadow-md"} ${a.length>=10&&!a.includes(y.tokenId)?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>{a.includes(y.tokenId)?f(_=>_.filter(S=>S!==y.tokenId)):a.length<10&&f(_=>[..._,y.tokenId])},disabled:i||a.length>=10&&!a.includes(y.tokenId),children:[e.jsx(Ne,{image:y.image,tokenId:y.tokenId,size:56}),e.jsxs("div",{className:"text-xs text-center mt-1 font-mono text-gray-500 dark:text-gray-400",children:["#",y.tokenId]}),a.includes(y.tokenId)&&e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},y.tokenId))})})]}),e.jsxs("div",{className:"bg-white/95 dark:bg-gray-800/95 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm",children:[a.length>0&&b&&e.jsxs("div",{className:"flex items-center justify-between mb-3 px-3 py-2 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-amber-600 dark:text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),e.jsxs("span",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:["Total Cost: ",(parseFloat(b)*a.length).toFixed(2)," S"]})]}),e.jsxs("span",{className:"text-xs text-amber-600 dark:text-amber-400",children:[a.length," Ã— ",parseFloat(b).toFixed(2)," S"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:`flex-1 px-6 py-4 text-white rounded-xl shadow-lg font-semibold text-lg tracking-wide transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 ${r.length===0?"bg-gradient-to-r from-gray-400 to-gray-500 cursor-not-allowed":k?"bg-gradient-to-r from-blue-400 to-indigo-400 animate-pulse-glow":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 hover:shadow-xl hover:scale-105"}`,onClick:g,disabled:k||a.length===0||r.length===0,title:r.length===0?"Pool is empty - stake NFTs first to enable swapping":"",children:k?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"loading-dots",children:"Swapping"})]}):r.length===0?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Pool Empty - Stake NFTs First"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 1H4m0 0l4 4M4 12l4-4"})}),b?`Swap ${a.length} NFT${a.length>1?"s":""} (${(parseFloat(b)*a.length).toFixed(2)} S)`:`Swap Selected NFTs (${a.length})`]})}),a.length>0&&!k&&e.jsxs("button",{className:"px-4 py-4 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl shadow hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",onClick:()=>f([]),children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-7 h-7 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsxs("h3",{className:"text-base font-semibold text-gray-800 dark:text-gray-200",children:["Available in Pool (",r.length,")"]})]}),e.jsx("div",{className:"bg-white/75 dark:bg-gray-800/75 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:i?e.jsx(Re,{count:6,size:48}):r.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸŠâ€â™‚ï¸"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Pool is empty - stake NFTs first to enable swapping"})]}):e.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-2",children:r.map(y=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-1.5 bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 shadow-sm",children:[e.jsx(Ne,{image:y.image,tokenId:y.tokenId,size:48}),e.jsxs("div",{className:"text-xs text-center mt-1 font-mono text-gray-500 dark:text-gray-400",children:["#",y.tokenId]})]},y.tokenId))})})})]}),u&&e.jsx("div",{className:`p-4 rounded-xl border transition-all duration-300 ${u.includes("successful")||u.includes("Swap successful")?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200":u.includes("failed")||u.includes("error")||u.includes("âŒ")?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200":u.includes("Swapping")?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200":"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:u.includes("successful")||u.includes("Swap successful")?e.jsx("div",{className:"w-5 h-5 bg-emerald-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}):u.includes("failed")||u.includes("error")||u.includes("âŒ")?e.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}):u.includes("Swapping")?e.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):e.jsx("div",{className:"w-5 h-5 bg-amber-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm leading-5",children:u}),u.includes("Swapping")&&e.jsx("div",{className:"text-xs opacity-75 mt-1",children:"This may take a few moments to complete..."})]})]})})]})}function ht({nftAddress:t,tokenId:r,spender:i,provider:s,onApproved:u,disabled:b}){const[a,f]=l.useState(!1),[n,p]=l.useState(!1),[d,g]=l.useState("");l.useEffect(()=>{if(p(!1),g(""),!t||!r||!i||!s)return;(async()=>{try{const S=await new E(t,["function getApproved(uint256) view returns (address)","function approve(address,uint256) external"],s).getApproved(r);p(S.toLowerCase()===i.toLowerCase())}catch{g("Failed to check approval")}})()},[t,r,i,s]);const k=async()=>{f(!0),g("");try{if(!window.ethereum)throw new Error("Wallet not found");const y=new Me(window.ethereum).getSigner();await(await new E(t,["function approve(address,uint256) external"],await y).approve(i,r)).wait(),p(!0),u&&u()}catch(y){g(y.reason||y.message)}f(!1)};return r?n?e.jsxs("div",{className:"flex items-center gap-1 ml-2 px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-lg text-xs font-medium border border-green-200 dark:border-green-700",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Approved"]}):e.jsx("button",{className:"ml-2 px-3 py-1.5 bg-gradient-to-r from-indigo-500 to-blue-500 hover:from-indigo-600 hover:to-blue-600 text-white rounded-lg text-xs font-medium shadow-sm transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",onClick:k,disabled:a||b,children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin"}),"Approving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Approve"]})}):null}function gt({walletNFTs:t,receiptNFTs:r,stakedNFTs:i,loading:s,receiptLoading:u,onStake:b,onUnstake:a,onClaimRewards:f,status:n,approvedMap:p,isApprovedForAll:d,onApproveAll:g,approvingAll:k,nftCollection:y,swapPool:_,provider:S,pendingRewards:B="0"}){const[$,Q]=l.useState([]),[O,de]=l.useState([]),G=Ae(),{executeTransaction:re,isTransactionPending:ie}=Ye(),ce=async()=>{if($.length===0){G.error("Please select NFTs to stake");return}try{await re("stake",()=>b($),{pendingMessage:`Staking ${$.length} NFT${$.length>1?"s":""}...`,successMessage:`Successfully staked ${$.length} NFT${$.length>1?"s":""}!`,onSuccess:()=>{Q([])}})}catch{}},z=async()=>{if(O.length===0){G.error("Please select staked NFTs to unstake");return}try{await re("unstake",()=>a(O),{pendingMessage:`Unstaking ${O.length} NFT${O.length>1?"s":""}...`,successMessage:`Successfully unstaked ${O.length} NFT${O.length>1?"s":""}!`,onSuccess:()=>{de([])}})}catch{}},ue=async()=>{if(B==="0"||B==="0.0"){G.info("No rewards to claim at the moment");return}try{await re("claim",()=>f(),{pendingMessage:"Claiming rewards...",successMessage:`Successfully claimed ${B} S tokens!`})}catch{}},ne=$.length>0&&$.every(R=>p[R]||d),Z=ie("stake"),ae=ie("unstake"),oe=ie("claim");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent",children:"Stake Your NFTs"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Stake NFTs to earn rewards and contribute to the swap pool"})]})]})}),i.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20 rounded-xl p-6 border border-yellow-200 dark:border-yellow-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-yellow-500 to-amber-500 rounded-xl flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"ðŸ’°"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-800 dark:text-yellow-200",children:"Staking Rewards"}),e.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Earn from swap fees and trading activity"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-3xl font-bold text-yellow-800 dark:text-yellow-200",children:[parseFloat(B).toFixed(4)," S"]}),e.jsx("div",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Pending Rewards"})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-yellow-600/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-500/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-yellow-400 text-sm",children:"ðŸ’Ž"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-yellow-200",children:"Swap Fee Earnings"}),e.jsx("div",{className:"text-xs text-yellow-300/70",children:"From your staked NFTs generating trading fees"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-yellow-200",children:[i.length," NFT",i.length!==1?"s":""]}),e.jsx("div",{className:"text-xs text-yellow-300/70",children:"Currently Staked"})]})]}),e.jsx("button",{onClick:ue,disabled:oe||parseFloat(B)===0,className:`w-full px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 ${oe?"bg-gradient-to-r from-yellow-400 to-amber-400 animate-pulse-glow":"bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-600 hover:to-amber-600"}`,children:oe?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"loading-dots",children:"Claiming"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),parseFloat(B)>0?`Claim ${parseFloat(B).toFixed(4)} S`:"No Rewards Available"]})})]}),parseFloat(B)===0&&i.length>0&&e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-xs text-yellow-300/60 bg-yellow-900/30 px-3 py-2 rounded-lg border border-yellow-700/30",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Rewards accumulate as users swap NFTs in this pool. Check back later!"]})})]}),e.jsx("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Selected to Stake:"}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${$.length>0?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 border border-green-300":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 border border-gray-300"}`,children:[$.length," NFTs"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Selected to Unstake:"}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${O.length>0?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border border-red-300":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 border border-gray-300"}`,children:[O.length," NFTs"]})]})]})}),t.length>0&&!d&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border border-blue-200 dark:border-blue-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"Approval Required"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Approve all NFTs for easier staking"})]})]}),e.jsx("button",{onClick:g,disabled:k,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:k?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Approving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Approve All"]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:["Available to Stake (",t.length,")"]})]}),e.jsx("div",{className:"min-h-[120px] bg-white/75 dark:bg-gray-800/75 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:s?e.jsx(Re,{count:6,size:64}):t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ–¼ï¸"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No NFTs available to stake"})]}):e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:t.map(R=>e.jsxs("div",{className:"relative",children:[e.jsxs("button",{className:`relative border-2 rounded-xl p-2 bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 shadow-sm transition-all duration-200 w-full ${$.includes(R.tokenId)?"border-green-400 scale-105 ring-2 ring-green-400/50 shadow-lg":"border-gray-200 dark:border-gray-700 hover:border-green-300 hover:shadow-md"}`,onClick:()=>{$.includes(R.tokenId)?Q(Y=>Y.filter(xe=>xe!==R.tokenId)):Q(Y=>[...Y,R.tokenId])},disabled:s,children:[e.jsx(Ne,{image:R.image,tokenId:R.tokenId,size:64}),e.jsxs("div",{className:"text-xs text-center mt-2 font-mono text-gray-600 dark:text-gray-400",children:["#",R.tokenId]}),$.includes(R.tokenId)&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),!d&&!p[R.tokenId]&&$.includes(R.tokenId)&&e.jsx("div",{className:"mt-2",children:e.jsx(ht,{nftAddress:y,tokenId:R.tokenId,spender:_,provider:S,disabled:s})})]},R.tokenId))})})]}),r.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-yellow-500 to-amber-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:["Currently Staked (",r.length,")"]})]}),e.jsx("div",{className:"min-h-[120px] bg-white/75 dark:bg-gray-800/75 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:u?e.jsx(Re,{count:6,size:64}):e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:r.map(R=>e.jsxs("button",{className:`relative border-2 rounded-xl p-2 bg-gradient-to-br from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20 shadow-sm transition-all duration-200 ${O.includes(R.tokenId)?"border-red-400 scale-105 ring-2 ring-red-400/50 shadow-lg":"border-yellow-200 dark:border-yellow-700 hover:border-red-300 hover:shadow-md"}`,onClick:()=>{O.includes(R.tokenId)?de(Y=>Y.filter(xe=>xe!==R.tokenId)):de(Y=>[...Y,R.tokenId])},disabled:s,children:[e.jsx(Ne,{image:R.image,tokenId:R.tokenId,size:64}),e.jsxs("div",{className:"text-xs text-center mt-2 font-mono text-yellow-700 dark:text-yellow-300",children:["#",R.tokenId]}),O.includes(R.tokenId)&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("div",{className:"absolute -bottom-1 -left-1 bg-yellow-500 text-white text-xs px-1 py-0.5 rounded text-[10px] font-bold",children:"STAKED"})]},R.tokenId))})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:`w-full px-6 py-4 text-white rounded-xl shadow-lg font-semibold text-lg tracking-wide transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 ${$.length===0||!ne?"bg-gradient-to-r from-gray-400 to-gray-500 cursor-not-allowed":Z?"bg-gradient-to-r from-green-400 to-emerald-400 animate-pulse-glow":"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 hover:shadow-xl hover:scale-105"}`,onClick:ce,disabled:Z||$.length===0||!ne,children:Z?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"loading-dots",children:"Staking"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Stake Selected (",$.length,")"]})}),$.length>0&&e.jsxs("button",{className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center justify-center gap-2",onClick:()=>Q([]),disabled:s,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear Selection"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:`w-full px-6 py-4 text-white rounded-xl shadow-lg font-semibold text-lg tracking-wide transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 ${O.length===0?"bg-gradient-to-r from-gray-400 to-gray-500 cursor-not-allowed":ae?"bg-gradient-to-r from-red-400 to-pink-400 animate-pulse-glow":"bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 hover:shadow-xl hover:scale-105"}`,onClick:z,disabled:ae||O.length===0,children:ae?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"loading-dots",children:"Unstaking"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Unstake Selected (",O.length,")"]})}),O.length>0&&e.jsxs("button",{className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center justify-center gap-2",onClick:()=>de([]),disabled:s,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear Selection"]})]})]}),n&&e.jsx("div",{className:`p-4 rounded-xl border transition-all duration-300 ${n.includes("successful")||n.includes("claimed")||n.includes("Stake successful")||n.includes("Unstake successful")||n.includes("Rewards claimed")?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200":n.includes("failed")||n.includes("error")||n.includes("âŒ")||n.includes("Cannot")?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200":n.includes("Staking...")||n.includes("Unstaking...")||n.includes("Claiming")?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200":"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:n.includes("successful")||n.includes("claimed")||n.includes("Stake successful")||n.includes("Unstake successful")||n.includes("Rewards claimed")?e.jsx("div",{className:"w-5 h-5 bg-emerald-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}):n.includes("failed")||n.includes("error")||n.includes("âŒ")||n.includes("Cannot")?e.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}):n.includes("Staking...")||n.includes("Unstaking...")||n.includes("Claiming")?e.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):e.jsx("div",{className:"w-5 h-5 bg-amber-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm leading-5",children:n}),(n.includes("Staking...")||n.includes("Unstaking...")||n.includes("Claiming"))&&e.jsx("div",{className:"text-xs opacity-75 mt-1",children:"This may take a few moments to complete..."})]})]})})]})}const Je=l.createContext(),Le=()=>{const t=l.useContext(Je);if(!t)throw new Error("useWallet must be used within a WalletProvider");return t},ft=({children:t})=>{const[r,i]=l.useState(""),[s,u]=l.useState(null),[b,a]=l.useState(null),[f,n]=l.useState(!1),[p,d]=l.useState(!1);l.useEffect(()=>{(async()=>{if(window.ethereum)try{(await window.ethereum.request({method:"eth_accounts"})).length>0&&await g()}catch{console.log("No existing wallet connection found")}})()},[]),l.useEffect(()=>{const S=async $=>{$.length===0?k():$[0]!==r&&await g()},B=()=>{window.location.reload()};return window.ethereum&&(window.ethereum.on("accountsChanged",S),window.ethereum.on("chainChanged",B)),()=>{window.ethereum&&(window.ethereum.removeListener("accountsChanged",S),window.ethereum.removeListener("chainChanged",B))}},[r]);const g=async()=>{if(!window.ethereum)throw new Error("Please install MetaMask or another wallet");n(!0);try{await window.ethereum.request({method:"eth_requestAccounts"});const S=new Me(window.ethereum),B=await S.getSigner(),$=await B.getAddress(),Q=await S.getNetwork(),O=Q.chainId===146n;return u(S),a(B),i($),d(O),console.log(`ðŸ”— Wallet connected: ${$}`),console.log(`ðŸŒ Network: ${Q.name} (${Q.chainId})`),O||console.warn("âš ï¸ Not on Sonic network"),{address:$,provider:S,signer:B,isCorrectNetwork:O}}catch(S){throw console.error("Wallet connection failed:",S),S}finally{n(!1)}},k=()=>{i(""),u(null),a(null),d(!1),console.log("ðŸ”Œ Wallet disconnected")},_={address:r,provider:s,signer:b,isConnecting:f,isCorrectNetwork:p,connectWallet:g,disconnect:k,switchToSonicNetwork:async()=>{if(!window.ethereum)return!1;try{return await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x92"}]}),!0}catch(S){if(S.code===4902)try{return await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x92",chainName:"Sonic Network",nativeCurrency:{name:"Sonic",symbol:"S",decimals:18},rpcUrls:["https://rpc.soniclabs.com/"],blockExplorerUrls:["https://explorer.soniclabs.com/"]}]}),!0}catch(B){return console.error("Failed to add Sonic network:",B),!1}return console.error("Failed to switch to Sonic network:",S),!1}},isConnected:!!r};return e.jsx(Je.Provider,{value:_,children:t})};function bt({swapPool:t,stakeReceipt:r,provider:i}){const{address:s,isConnected:u}=Le(),[b,a]=l.useState(null),[f,n]=l.useState(""),[p,d]=l.useState(!1),[g,k]=l.useState([]),[y,_]=l.useState({}),[S,B]=l.useState(null),[$,Q]=l.useState(!1),[O,de]=l.useState(!1),[G,re]=l.useState([]),[ie,ce]=l.useState([]),[z,ue]=l.useState([]),[ne,Z]=l.useState(!1),[ae,oe]=l.useState(!1),[R,Y]=l.useState(!1),[xe,X]=l.useState(null),[Ie,he]=l.useState("0"),[c,T]=l.useState(null),A=async()=>{if(!window.ethereum)throw new Error("Wallet not found");return new Me(window.ethereum).getSigner()},ee=async o=>{if(o.length===0){n("Please select at least one NFT to swap");return}if(o.length>10){n("You can only swap up to 10 NFTs at once.");return}if(z.length<o.length){z.length===0?n("âŒ Cannot swap: Pool is empty! You need to stake some NFTs first to create liquidity for swapping."):n(`âŒ Insufficient liquidity: Only ${z.length} NFT${z.length!==1?"s":""} available in pool, but you selected ${o.length}. Stake more NFTs or reduce your selection.`);return}d(!0),n("");try{const x=await A(),m=new E(t,ve,x),M=new E(S,["function approve(address,uint256)","function getApproved(uint256) view returns (address)","function ownerOf(uint256) view returns (address)","function setApprovalForAll(address,bool)","function isApprovedForAll(address,address) view returns (bool)"],x),C=await x.getAddress();n("Verifying ownership...");for(const F of o)if((await M.ownerOf(F)).toLowerCase()!==C.toLowerCase()){n(`âŒ You don't own NFT #${F}`),d(!1);return}n("Checking approvals...");for(const F of o)try{(await M.getApproved(F)).toLowerCase()!==t.toLowerCase()&&(n(`Requesting approval for NFT #${F}...`),await(await M.approve(t,F)).wait())}catch(K){if(K.code==="ACTION_REJECTED"){n("âŒ User cancelled approval transaction"),d(!1);return}n(`âŒ Failed to approve NFT #${F}: ${K.message}`),d(!1);return}const v=await m.swapFeeInWei(),P=v*BigInt(o.length);n(`Swapping ${o.length} NFT${o.length>1?"s":""}...`);let W;o.length>1&&m.swapNFTBatch?W=await m.swapNFTBatch(o,{value:P}):W=await m.swapNFT(o[0],{value:v}),await W.wait(),n(`âœ… Successfully swapped ${o.length} NFT${o.length>1?"s":""}!`),await w()}catch(x){if(console.error("Swap error:",x),x.code==="ACTION_REJECTED")n("âŒ User cancelled transaction");else if(x.data==="0xa17e11d5"||x.message.includes("InsufficientLiquidity"))n(`âŒ Insufficient liquidity: Not enough NFTs in pool for ${o.length} swap${o.length>1?"s":""}`);else if(x.data==="0xa0712d68"||x.message.includes("SameTokenSwap"))n("âŒ Cannot swap: One of your NFTs is already in the pool");else if(x.data==="0x82b42900"||x.message.includes("TokenNotApproved"))n("âŒ NFT not approved for transfer");else if(x.data==="0x8baa579f"||x.message.includes("NotTokenOwner"))n("âŒ You do not own one or more of the selected NFTs");else if(x.data==="0x025dbdd4"||x.message.includes("IncorrectFee"))n("âŒ Incorrect swap fee sent");else if(x.data==="0xd05cb609"||x.message.includes("NotInitialized"))n("âŒ Pool not initialized");else{const m=x.reason||x.message||"Unknown error";n("âŒ Swap failed: "+m)}}d(!1)},h=async o=>{d(!0),n("Staking NFTs...");try{const x=await A();await(await new E(t,ve,x).stakeNFTs(o)).wait(),n("Stake successful! âœ…"),await w()}catch(x){n(`Stake failed: ${x.reason||x.message}`)}d(!1)},N=async o=>{d(!0),n("Unstaking NFTs...");try{const x=await A();await(await new E(r,Te,x).unstakeNFTs(o)).wait(),n("Unstake successful! âœ…"),await w()}catch(x){n(`Unstake failed: ${x.reason||x.message}`)}d(!1)},I=async()=>{d(!0),n("Claiming rewards...");try{const o=await A();await(await new E(r,Te,o).claimRewards()).wait(),n("Rewards claimed successfully! âœ…"),await w()}catch(o){n(`Claim failed: ${o.reason||o.message}`)}d(!1)},j=async()=>{de(!0);try{const o=await A();await(await new E(S,["function setApprovalForAll(address,bool) external"],o).setApprovalForAll(t,!0)).wait(),Q(!0),n("Approval successful! You can now stake NFTs.")}catch(o){n(`Approval failed: ${o.reason||o.message}`)}de(!1)},w=async()=>{console.log("Refreshing NFT data...",{account:s,isConnected:u}),Z(!0),oe(!0),Y(!0),k([]),ce([]),ue([]),await new Promise(x=>setTimeout(x,100));const o=i||(window.ethereum?new Me(window.ethereum):null);if(!o){console.warn("No provider available for NFT fetching"),Z(!1),oe(!1),Y(!1);return}if(!u||!s){console.log("No wallet connected, fetching pool NFTs only"),k([]),Z(!1),ce([]),oe(!1),re([]),await H(o);return}console.log("Wallet connected, fetching all NFT data for:",s),await Promise.all([L(s,o),q(s,o),H(o),U(s,o)]),await J()},L=async(o,x)=>{try{const M=await new E(t,ve,x).nftCollection();if(B(M),!M){console.log("âŒ Could not get NFT collection address from SwapPool"),k([]),Z(!1);return}const C=new E(M,["function balanceOf(address) view returns (uint256)","function ownerOf(uint256) view returns (address)","function tokenOfOwnerByIndex(address,uint256) view returns (uint256)","function tokenURI(uint256) view returns (string)","function getApproved(uint256) view returns (address)","function isApprovedForAll(address,address) view returns (bool)","function totalSupply() view returns (uint256)"],x),v=await C.balanceOf(o),P=Number(v);if(console.log(`ðŸŽ¯ Collection NFT Balance for ${o}: ${P}`),P===0){console.log("ðŸ“­ No NFTs owned by user (balance=0)"),k([]),_({}),Z(!1);return}let W=!1;try{W=await C.isApprovedForAll(o,t)}catch{}Q(!!W);let F=[];if(P>0&&P<=1e3)try{console.log(`ðŸ” Trying enumerable approach for ${v.toString()} tokens...`);const V=[];for(let le=0;le<P;le++)V.push(C.tokenOfOwnerByIndex(o,le));F=await Promise.all(V),console.log("âœ… Enumerable approach successful, found tokens:",F.map(le=>le.toString()))}catch{console.log("âŒ tokenOfOwnerByIndex not supported, using fallback scan"),F=[]}if(F.length===0){console.log("ðŸŽ¯ Starting direct ownership scan...");let V=2e3;try{const se=await C.totalSupply();V=Math.min(Number(se)+100,2e3),console.log(`ðŸ“ˆ Total supply: ${se.toString()}, scanning up to token ${V}`)}catch{console.log(`ðŸ“ˆ Total supply not available, scanning up to token ${V}`)}const le=new Set,fe=20;let pe=0;const be=Number(P);for(let se=1;se<=V&&pe<be;se+=fe){const Se=Math.min(se+fe-1,V),Ce=[];for(let me=se;me<=Se;me++)Ce.push(C.ownerOf(me).then(Fe=>({tokenId:me,owner:Fe.toLowerCase()})).catch(()=>({tokenId:me,owner:null})));try{const me=await Promise.all(Ce);for(const{tokenId:Fe,owner:Qe}of me)if(Qe===o.toLowerCase()&&(le.add(Fe.toString()),pe++,console.log(`âœ… Found owned token: #${Fe} (${pe}/${be})`),pe>=be))break}catch(me){console.warn(`Batch ${se}-${Se} failed:`,me.message)}if(pe>=be)break;await new Promise(me=>setTimeout(me,50))}F=Array.from(le).map(se=>BigInt(se)),console.log(`âœ… Direct ownership scan complete, found ${F.length} tokens`)}const K=F.map(async V=>{try{const le=V.toString();let fe="",pe="";try{if(fe=await C.tokenURI(V),fe){let se=fe;fe.startsWith("ipfs://")&&(se=fe.replace("ipfs://","https://ipfs.io/ipfs/"));try{const Ce=await(await fetch(se)).json();Ce.image&&(pe=Ce.image,pe.startsWith("ipfs://")&&(pe=pe.replace("ipfs://","https://ipfs.io/ipfs/")))}catch(Se){console.warn(`Failed to fetch metadata for wallet token ${V}:`,Se)}}}catch{}let be=!1;try{be=(await C.getApproved(V)).toLowerCase()===t.toLowerCase()}catch{}return{tokenId:le,image:pe||"",approved:be}}catch(le){return console.warn(`Failed to fetch metadata for token ${V}:`,le),{tokenId:V.toString(),image:"",approved:!1}}}),te=await Promise.all(K);console.log("ðŸ“¦ Wallet NFTs loaded:",te.length);const ge={};te.forEach(V=>{ge[V.tokenId]=V.approved}),k(te),_(ge)}catch(m){console.error("Failed to fetch wallet NFTs:",m),k([]),_({})}finally{Z(!1)}},q=async(o,x)=>{try{const m=new E(r,["function balanceOf(address) view returns (uint256)","function tokenOfOwnerByIndex(address,uint256) view returns (uint256)","function tokenURI(uint256) view returns (string)","function receiptToOriginalToken(uint256) view returns (uint256)"],x),M=await m.balanceOf(o),C=[];for(let v=0;v<Number(M);v++)try{const P=await m.tokenOfOwnerByIndex(o,v),W=await m.receiptToOriginalToken(P);let F="",K="";try{if(F=await m.tokenURI(P),F){let te=F;F.startsWith("ipfs://")&&(te=F.replace("ipfs://","https://ipfs.io/ipfs/"));try{const V=await(await fetch(te)).json();V.image&&(K=V.image,K.startsWith("ipfs://")&&(K=K.replace("ipfs://","https://ipfs.io/ipfs/")))}catch(ge){console.warn(`Failed to fetch metadata for receipt token ${P}:`,ge)}}}catch{}C.push({tokenId:P.toString(),originalTokenId:W.toString(),image:K||""})}catch(P){console.warn(`Failed to fetch receipt token ${v}:`,P)}console.log("ðŸ§¾ Receipt NFTs loaded:",C.length),ce(C)}catch(m){console.error("Failed to fetch receipt NFTs:",m),ce([])}finally{oe(!1)}},H=async o=>{try{console.log("ðŸŠ Fetching pool NFTs for pool:",t);const x=new E(t,ve,o),m=await x.getPoolTokens();console.log("ðŸŠ Pool token IDs:",m);const M=await x.nftCollection();if(console.log("ðŸŠ Collection address:",M),!M){console.warn("ðŸŠ No collection address found"),ue([]),Y(!1);return}const C=new E(M,["function tokenURI(uint256) view returns (string)"],o),v=m.map(async W=>{try{let F="",K="";try{if(F=await C.tokenURI(W),console.log(`ðŸŠ Token ${W} URI:`,F),F){let te=F;F.startsWith("ipfs://")&&(te=F.replace("ipfs://","https://ipfs.io/ipfs/"));try{const V=await(await fetch(te)).json();V.image&&(K=V.image,K.startsWith("ipfs://")&&(K=K.replace("ipfs://","https://ipfs.io/ipfs/"))),console.log(`ðŸŠ Token ${W} image:`,K)}catch(ge){console.warn(`Failed to fetch metadata for token ${W}:`,ge)}}}catch(te){console.warn(`Failed to get tokenURI for token ${W}:`,te)}return{tokenId:W.toString(),image:K||""}}catch(F){return console.warn(`Failed to fetch pool NFT metadata for token ${W}:`,F),{tokenId:W.toString(),image:""}}}),P=await Promise.all(v);console.log("ðŸŠ Pool NFTs loaded:",P.length),ue(P)}catch(x){console.error("Failed to fetch pool NFTs:",x),ue([])}finally{Y(!1)}},U=async(o,x)=>{try{const M=await new E(t,ve,x).getUserStakes(o);re(M.map(C=>C.toString())),console.log("ðŸ”’ Staked NFTs loaded:",M.length)}catch(m){console.error("Failed to fetch staked NFTs:",m),re([])}},J=async()=>{if(!s||!r||!u){he("0");return}try{const o=await A(),x=new E(r,Te,o);if(x.earned){const m=await x.earned(s);he(ke(m))}else{const m=await x.pendingRewards(s);he(ke(m))}}catch(o){console.warn("Failed to fetch pending rewards:",o),he("0")}},D=async()=>{if(t)try{const o=i||new ze("https://rpc.soniclabs.com"),m=await new E(t,ve,o).swapFeeInWei(),M=ke(m);T(M)}catch(o){console.log("Error fetching swap fee:",o),T(null)}};return l.useEffect(()=>{t&&(w(),J(),D())},[t,r]),l.useEffect(()=>{t&&i&&w()},[i]),l.useEffect(()=>{t&&(console.log("Wallet connection changed:",{account:s,isConnected:u}),w(),J())},[s,u,t,r]),l.useEffect(()=>{const o=setInterval(()=>{J()},3e4);return()=>clearInterval(o)},[s,r]),b==="swap"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("button",{onClick:()=>a(null),className:"inline-flex items-center gap-2 px-4 py-2.5 text-sm font-medium bg-gray-500 hover:bg-gray-600 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Actions"]}),e.jsx(xt,{walletNFTs:g,poolNFTs:z,loading:p||ne||R,onSwap:ee,status:f,swapFee:c})]}):b==="stake"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("button",{onClick:()=>a(null),className:"inline-flex items-center gap-2 px-4 py-2.5 text-sm font-medium bg-gray-500 hover:bg-gray-600 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Actions"]}),e.jsx(gt,{walletNFTs:g,receiptNFTs:ie,stakedNFTs:G,loading:p,receiptLoading:ae,onStake:h,onUnstake:N,onClaimRewards:I,status:f,approvedMap:y,isApprovedForAll:$,onApproveAll:j,approvingAll:O,nftCollection:S,swapPool:t,provider:i,pendingRewards:Ie})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 via-blue-500 to-teal-400 bg-clip-text text-transparent mb-4",children:"What would you like to do?"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"Choose your action to get started with the swap pool"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx("div",{className:"group",children:e.jsx("button",{onClick:()=>a("swap"),className:"w-full p-8 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-2xl border-2 border-blue-200 dark:border-blue-700 hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-300 hover:shadow-xl hover:shadow-blue-500/20 group-hover:scale-105",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow",children:e.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 1H4m0 0l4 4M4 12l4-4"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-blue-800 dark:text-blue-200 mb-2",children:"Swap NFTs"}),e.jsx("p",{className:"text-blue-600 dark:text-blue-400 leading-relaxed",children:"Exchange your NFTs with those available in the pool. Perfect for finding specific traits or collecting new pieces."})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400 font-medium",children:[e.jsx("span",{children:"Start Swapping"}),e.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-blue-500 dark:text-blue-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Instant Trading"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2z",clipRule:"evenodd"})}),e.jsx("span",{children:"Secure Exchange"})]})]})]})})}),e.jsx("div",{className:"group",children:e.jsx("button",{onClick:()=>a("stake"),className:"w-full p-8 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-2xl border-2 border-green-200 dark:border-green-700 hover:border-green-400 dark:hover:border-green-500 transition-all duration-300 hover:shadow-xl hover:shadow-green-500/20 group-hover:scale-105",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow",children:e.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-green-800 dark:text-green-200 mb-2",children:"Stake NFTs"}),e.jsx("p",{className:"text-green-600 dark:text-green-400 leading-relaxed",children:"Stake your NFTs to earn rewards from swap fees and contribute to pool liquidity. Passive income from your collection."})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400 font-medium",children:[e.jsx("span",{children:"Start Earning"}),e.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-green-500 dark:text-green-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}),e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z",clipRule:"evenodd"})]}),e.jsx("span",{children:"Earn Rewards"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{children:"Pool Liquidity"})]})]})]})})})]}),e.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 text-center",children:"Pool Overview"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:z.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Available to Swap"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:G.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Currently Staked"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:g.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"In Your Wallet"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:ie.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Your Receipts"})]})]})]}),f&&e.jsx("div",{className:`p-4 rounded-xl border transition-all duration-300 ${f.includes("successful")||f.includes("âœ…")?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200":f.includes("failed")||f.includes("error")?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200"}`,children:e.jsx("div",{className:"text-center font-medium",children:f})})]})}const wt={"0xB6748d708B5Cda0eA8c53e7072566971FCCb6b49":"https://nftstorage.link/stoner.png","0xE3941DB58B9D35410A66636da07c9B28b878B89E":"https://nftstorage.link/boat.png"};function vt(t){if(!t)return"from-gray-400 to-gray-600";const r=t.split("").reduce((s,u)=>u.charCodeAt(0)+((s<<5)-s),0),i=["from-blue-400 to-purple-600","from-purple-400 to-pink-600","from-pink-400 to-red-600","from-red-400 to-orange-600","from-orange-400 to-yellow-600","from-yellow-400 to-green-600","from-green-400 to-teal-600","from-teal-400 to-blue-600","from-indigo-400 to-purple-600","from-violet-400 to-pink-600","from-cyan-400 to-blue-600","from-emerald-400 to-teal-600"];return i[Math.abs(r)%i.length]}function kt(t){if(!t||t==="Unknown Collection"||t==="Loading...")return"?";const r=t.trim().split(/\s+/);return r.length===1?r[0].substring(0,2).toUpperCase():r.slice(0,2).map(i=>i.charAt(0).toUpperCase()).join("")}function Ke({address:t,collectionName:r,size:i=48}){const[s,u]=je.useState(!1),[b,a]=je.useState(!0),f=wt[t==null?void 0:t.toLowerCase()];if(!f||s){const n=kt(r),p=vt(r||t),d=i<=32?"text-xs":i<=48?"text-sm":"text-base";return e.jsx("div",{style:{width:i,height:i},className:`bg-gradient-to-br ${p} rounded-lg flex items-center justify-center text-white font-bold ${d} shadow-lg`,children:n})}return e.jsxs("div",{className:"relative",children:[b&&e.jsx("div",{style:{width:i,height:i},className:"absolute inset-0 bg-gray-300 rounded animate-pulse"}),e.jsx("img",{src:f,alt:"NFT Collection",style:{width:i,height:i,borderRadius:8},onError:()=>u(!0),onLoad:()=>a(!1),className:b?"opacity-0":"opacity-100"})]})}function Tt({pool:t,collectionName:r,onClose:i,provider:s}){const[u,b]=l.useState(null);return l.useEffect(()=>{(async()=>{try{if(!s||!t.swapPool)return;const n=await new E(t.swapPool,ve,s).swapFeeInWei(),p=ke(n);b(p)}catch(f){console.error("Error fetching pool fee:",f),b("N/A")}})()},[t.swapPool,s]),e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-4xl max-h-[90vh] overflow-y-auto p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"sticky top-0 bg-white dark:bg-gray-800 pb-4 mb-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:"Pool Details"}),e.jsx("button",{className:"text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 px-3 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition flex-shrink-0",onClick:i,children:"âœ• Close"})]})}),"        ",e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 mb-4",children:[e.jsx(Ke,{address:t.nftCollection,collectionName:r,size:64}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"font-semibold text-base sm:text-lg text-blue-600 dark:text-blue-400 mb-1",children:["Collection: ",e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:r||"Loading..."})]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["SwapPool: ",e.jsxs("span",{className:"font-mono",children:[t.swapPool.slice(0,6),"...",t.swapPool.slice(-4)]})]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Receipt: ",e.jsxs("span",{className:"font-mono",children:[t.stakeReceipt.slice(0,6),"...",t.stakeReceipt.slice(-4)]})]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Creator: ",t.creator]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Created: ",t.createdAt]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Active: ",t.active?"Yes":"No"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("svg",{className:"w-4 h-4 text-amber-600 dark:text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),e.jsxs("span",{className:"text-sm font-semibold text-amber-600 dark:text-amber-400",children:["Swap Fee: ",u?`${parseFloat(u).toFixed(2)} S`:"Loading..."]})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-3 flex-wrap",children:[e.jsxs("a",{className:"inline-flex items-center gap-2 px-4 py-2.5 text-sm font-medium bg-blue-500 hover:bg-blue-600 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200",href:`https://explorer.sonic.org/address/${t.swapPool}`,target:"_blank",rel:"noreferrer",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Explorer"]}),e.jsxs("a",{className:"inline-flex items-center gap-2 px-4 py-2.5 text-sm font-medium bg-purple-500 hover:bg-purple-600 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200",href:`https://nft.paintswap.io/sonic/collections/${t.nftCollection}`,target:"_blank",rel:"noreferrer",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2h4a1 1 0 110 2h-1v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6H3a1 1 0 110-2h4zM9 3v1h6V3H9zm2 5a1 1 0 100 2 1 1 0 000-2zm0 4a1 1 0 100 2 1 1 0 000-2z"})}),"PaintSwap"]}),e.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2.5 text-sm font-medium bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg shadow-md hover:shadow-lg transition-all duration-200",onClick:()=>navigator.clipboard.writeText(t.swapPool),children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Address"]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(bt,{swapPool:t.swapPool,stakeReceipt:t.stakeReceipt,provider:s})})]})})}async function jt(t,r){try{return await new E(t,["function name() view returns (string)"],r).name()}catch{return"Unknown Collection"}}function Nt(){const{address:t,provider:r,signer:i,isConnected:s,isCorrectNetwork:u}=Le(),[b,a]=l.useState([]),[f,n]=l.useState({}),[p,d]=l.useState(!1),[g,k]=l.useState(null),[y,_]=l.useState(null),[S,B]=l.useState(""),[$,Q]=l.useState(!0),[O,de]=l.useState(""),[G,re]=l.useState(""),[ie,ce]=l.useState(!1),[z,ue]=l.useState(new Set),[ne,Z]=l.useState("0"),[ae,oe]=l.useState(!1),[R,Y]=l.useState(""),xe="0x1Db92C2F11b7716f3fa6E94969a8649a32adB1De",[X,Ie]=l.useState(xe),he=async(h,N)=>{if(!t||!N)return;const I=new Set;try{for(const j of h)try{const L=await new E(j.stakeReceipt,["function balanceOf(address) view returns (uint256)"],N).balanceOf(t);Number(L)>0&&I.add(j.swapPool)}catch(w){console.warn(`Failed to check stakes for pool ${j.swapPool}:`,w)}}catch(j){console.warn("Failed to check user stakes:",j)}ue(I)},c=b.filter(h=>{const N=G.toLowerCase(),I=!G||f[h.nftCollection]&&f[h.nftCollection].toLowerCase().includes(N)||h.nftCollection.toLowerCase().includes(N)||h.swapPool.toLowerCase().includes(N),j=!ie||z.has(h.swapPool);return I&&j});l.useEffect(()=>{(async()=>{Q(!0);let N=!1;try{const I=["https://rpc.soniclabs.com","https://rpc.soniclabs.com","https://sonic.drpc.org","https://sonic.api.onfinality.io/public","https://sonic-rpc.publicnode.com"].filter(Boolean);for(const j of I)try{const w=new ze(j);await w.getBlockNumber(),_(w),B(""),console.log("Provider set: "+j),N=!0;break}catch(w){console.warn("RPC failed",j,w)}if(window.ethereum&&N)try{const j=await window.ethereum.request({method:"eth_chainId"}),w=parseInt(j,16);w!==146&&console.warn("Wallet connected to chainId",w,"but using RPC for read operations")}catch(j){console.warn("Could not read chainId from wallet",j)}N||console.warn("No working provider found")}catch(I){console.warn("Provider init failed",I)}Q(!1)})()},[]);const T=async()=>{if(!X){console.warn("Factory address not set. Provide VITE_FACTORY_ADDRESS or public/contracts.json");return}if(!y){console.warn("fetchPools called without provider");return}d(!0),de("");try{try{const w=await y.getNetwork();w&&w.chainId&&Number(w.chainId)!==146&&console.warn(`Connected to chain ${w.chainId}, expected 146 (Sonic)`);const L=await y.send("eth_getCode",[X,"latest"]);(!L||L==="0x"||L==="0x0")&&console.warn(`No contract found at ${X}`)}catch(w){console.warn("Network/code check failed",w)}const h=new E(X,ct,y);let N=[];try{N=await h.getAllPools(),N=N.filter(w=>w.active)}catch(w){console.error("Failed to get pools from factory:",w),N=[]}console.log("All active pools from contract:",N);const I=N.map(w=>({nftCollection:w.nftCollection,swapPool:w.swapPool,stakeReceipt:w.stakeReceipt,createdAt:new Date(Number(w.createdAt)*1e3).toLocaleString(),creator:w.creator,active:w.active,poolAddress:w.swapPool}));console.log("All pools (no deduplication applied):",I),a(I);const j={};for(const w of I)j[w.nftCollection]=await jt(w.nftCollection,y);n(j),t&&await he(I,y)}catch(h){console.error("Failed to fetch pools",h)}d(!1)},A=async()=>{if(!t||!y||z.size===0){Z("0");return}try{let h=nt("0");for(const N of b)if(z.has(N.swapPool))try{const I=new E(N.stakeReceipt,Te,y);let j;I.earned?j=await I.earned(t):j=await I.pendingRewards(t),h=h+j}catch(I){console.warn(`Failed to fetch rewards for pool ${N.swapPool}:`,I)}Z(ke(h))}catch(h){console.error("Failed to calculate total rewards:",h),Z("0")}},ee=async()=>{if(!(!i||z.size===0)){oe(!0),Y("Claiming rewards from all pools...");try{let h=0,N=0;for(const I of b)if(z.has(I.swapPool))try{const j=new E(I.stakeReceipt,Te,i);let w;j.earned?w=await j.earned(t):w=await j.pendingRewards(t),w>0&&(await(await j.claimRewards()).wait(),h++,console.log(`âœ… Claimed rewards from pool: ${I.swapPool}`))}catch(j){N++,console.error(`âŒ Failed to claim from pool ${I.swapPool}:`,j)}h>0?(Y(`âœ… Successfully claimed rewards from ${h} pool(s)!`),await A()):N>0?Y(`âŒ Failed to claim rewards from ${N} pool(s)`):Y("No rewards to claim")}catch(h){Y(`âŒ Claim all failed: ${h.reason||h.message}`)}oe(!1),setTimeout(()=>Y(""),5e3)}};return l.useEffect(()=>{y&&X&&T()},[y,X]),l.useEffect(()=>{A()},[b,z,t]),l.useEffect(()=>{if(z.size>0){const h=setInterval(A,3e4);return()=>clearInterval(h)}},[z]),e.jsxs("div",{className:"space-y-6",children:[O&&e.jsxs("div",{className:"p-4 bg-red-900/20 border border-red-500/20 text-red-400 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{children:"âš ï¸"}),e.jsx("span",{className:"font-semibold",children:"Error"})]}),e.jsx("p",{className:"text-sm",children:O})]}),$&&e.jsxs("div",{className:"p-6 bg-card/30 rounded-xl text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-accent border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"font-semibold",children:"Connecting to Sonic Network..."})]}),e.jsx("p",{className:"text-sm text-muted",children:"Please wait while we establish connection"})]}),s&&z.size>0&&e.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-green-50 dark:from-emerald-900/20 dark:to-green-900/20 border border-emerald-200 dark:border-emerald-800 rounded-xl p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-emerald-100 dark:bg-emerald-900/30 rounded-full",children:e.jsx("svg",{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-emerald-900 dark:text-emerald-100",children:"Total Pending Rewards"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:[ne," S"]}),e.jsxs("div",{className:"text-sm text-emerald-700 dark:text-emerald-300",children:["From ",z.size," staked pool",z.size!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("button",{onClick:ee,disabled:ae||parseFloat(ne)===0,className:"inline-flex items-center gap-2 px-6 py-3 bg-emerald-600 hover:bg-emerald-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 disabled:transform-none",children:ae?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Claiming..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Claim All Rewards"]})}),R&&e.jsx("div",{className:`text-sm font-medium ${R.includes("âœ…")?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:R})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-xl font-bold text-accent",children:"Swap Pools"}),e.jsxs("div",{className:"px-3 py-1 bg-accent/10 text-accent rounded-full text-sm font-medium",children:[c.length," ",ie?"staked":"active"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-xs text-muted",children:["Factory: ",e.jsxs("span",{className:"font-mono text-accent",children:[X==null?void 0:X.slice(0,6),"...",(X==null?void 0:X.slice(-4))||"Not set"]})]}),e.jsxs("button",{onClick:T,disabled:p,className:"px-4 py-2 bg-accent text-white rounded-lg shadow hover:bg-accent/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-medium",children:[p&&e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),p?"Loading...":"Refresh Pools"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 p-4 bg-white/50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Search by collection name, address, or pool address...",value:G,onChange:h=>re(h.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-sm placeholder-gray-500 dark:placeholder-gray-400"}),G&&e.jsx("button",{onClick:()=>re(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ie,onChange:h=>ce(h.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-green-500",children:"ðŸŽ¯"}),"My Staked Pools"]})]}),ie&&e.jsxs("div",{className:"px-2 py-1 bg-green-500/10 text-green-600 dark:text-green-400 rounded text-xs font-medium",children:[z.size," staked"]})]})]}),p&&c.length===0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(h=>e.jsx("div",{className:"p-4 sm:p-5 bg-card rounded-2xl shadow-lg animate-pulse",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-gray-600 rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-600 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-600 rounded w-1/2"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-600 rounded w-2/3"}),e.jsx("div",{className:"h-3 bg-gray-600 rounded w-1/2"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-6 bg-gray-600 rounded w-16"}),e.jsx("div",{className:"h-6 bg-gray-600 rounded w-20"})]})]})},h))}):c.length===0?e.jsx("div",{className:"p-8 bg-white/90 dark:bg-gray-800/90 rounded-2xl text-center border border-gray-200 dark:border-gray-700",children:b.length===0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸŠâ€â™‚ï¸"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Swap Pools Found"}),e.jsx("p",{className:"text-muted mb-4",children:X?"No pools are currently registered with this factory.":"Please set a factory address first."}),X&&e.jsx("button",{onClick:T,className:"px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/80 transition-colors",children:"Refresh Pools"})]}):ie?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸŽ¯"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Staked Pools"}),e.jsx("p",{className:"text-muted mb-4",children:"You haven't staked any NFTs in pools yet. Start staking to earn rewards from trading fees!"}),e.jsx("button",{onClick:()=>ce(!1),className:"px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/80 transition-colors",children:"Show All Pools"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ”"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Results Found"}),e.jsxs("p",{className:"text-muted mb-4",children:['No pools match your search "',G,'". Try adjusting your search terms.']}),e.jsx("button",{onClick:()=>re(""),className:"px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/80 transition-colors",children:"Clear Search"})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map((h,N)=>e.jsxs("div",{className:"group p-4 sm:p-5 bg-white/95 dark:bg-gray-800/95 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-200 dark:border-gray-700 hover:border-blue-400/50 cursor-pointer",onClick:()=>k(h),children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ke,{address:h.nftCollection,collectionName:f[h.nftCollection],size:56}),z.has(h.swapPool)&&e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"âœ“"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-blue-600 dark:text-blue-400 truncate",children:f[h.nftCollection]||"Loading..."}),z.has(h.swapPool)&&e.jsxs("div",{className:"px-2 py-1 bg-green-500/10 text-green-600 dark:text-green-400 rounded-full text-xs font-medium flex items-center gap-1",children:[e.jsx("span",{children:"ðŸŽ¯"}),e.jsx("span",{children:"Staked"})]})]}),e.jsxs("p",{className:"text-xs text-muted font-mono truncate",children:[h.nftCollection.slice(0,8),"...",h.nftCollection.slice(-6)]})]})]}),e.jsxs("div",{className:"space-y-2 text-xs text-muted mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pool:"}),e.jsxs("span",{className:"font-mono",children:[h.swapPool.slice(0,8),"...",h.swapPool.slice(-6)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Receipt:"}),e.jsxs("span",{className:"font-mono",children:[h.stakeReceipt.slice(0,8),"...",h.stakeReceipt.slice(-6)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Created:"}),e.jsx("span",{children:new Date(Number(h.createdAt)).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-colors text-sm font-medium shadow-sm",onClick:I=>{I.stopPropagation(),k(h)},children:"View Details"}),e.jsx("button",{className:"px-3 py-2 bg-secondary/50 hover:bg-secondary text-text rounded-lg transition-colors text-xs",onClick:I=>{I.stopPropagation(),navigator.clipboard.writeText(h.swapPool)},title:"Copy pool address",children:"ðŸ“‹"})]})]},`${h.swapPool}-${N}`))})]}),g&&e.jsx(Tt,{pool:g,collectionName:f[g.nftCollection],onClose:()=>k(null),provider:y})]})}const St="modulepreload",Ct=function(t){return"/"+t},Oe={},Mt=function(r,i,s){let u=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),f=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));u=Promise.allSettled(i.map(n=>{if(n=Ct(n),n in Oe)return;Oe[n]=!0;const p=n.endsWith(".css"),d=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${d}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":St,p||(g.as="script"),g.crossOrigin="",g.href=n,f&&g.setAttribute("nonce",f),document.head.appendChild(g),p)return new Promise((k,y)=>{g.addEventListener("load",k),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${n}`)))})}))}function b(a){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=a,window.dispatchEvent(f),!f.defaultPrevented)throw a}return u.then(a=>{for(const f of a||[])f.status==="rejected"&&b(f.reason);return r().catch(b)})},we=[{inputs:[{internalType:"address",name:"_stonerNFT",type:"address"},{internalType:"address",name:"_receiptToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AlreadyStaked",type:"error"},{inputs:[],name:"DuplicateTokenId",type:"error"},{inputs:[],name:"EmptyArray",type:"error"},{inputs:[],name:"NoERC20Rewards",type:"error"},{inputs:[],name:"NoRewards",type:"error"},{inputs:[],name:"NoStakers",type:"error"},{inputs:[],name:"NotStaked",type:"error"},{inputs:[],name:"NotYourToken",type:"error"},{inputs:[],name:"TokenAlreadyWhitelisted",type:"error"},{inputs:[],name:"TokenNotWhitelisted",type:"error"},{inputs:[],name:"TooManyTokens",type:"error"},{inputs:[],name:"TransferFailed",type:"error"},{inputs:[],name:"ZeroAddress",type:"error"},{inputs:[],name:"ZeroETH",type:"error"},{inputs:[],name:"ZeroTokenAmount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ERC20RewardClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ERC20RewardReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"EmergencyERC20Withdrawal",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"EmergencyETHWithdrawal",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"EmergencyUnstake",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"}],name:"TokenRemovedFromWhitelist",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"}],name:"TokenWhitelisted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Unstaked",type:"event"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"addWhitelistedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"address",name:"token",type:"address"}],name:"calculatePendingERC20Rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"calculatePendingRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimAllERC20Rewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimAllRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"claimERC20Rewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimRewardsOnly",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"address",name:"token",type:"address"}],name:"earnedERC20",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"to",type:"address"}],name:"emergencyUnstake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"emergencyUnstakeWithClaim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"emergencyWithdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"emergencyWithdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"erc20RewardCarry",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"erc20RewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"erc20Rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"erc20TotalRewardsClaimed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"erc20UserRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"exit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getAllPendingERC20Rewards",outputs:[{internalType:"address[]",name:"tokens",type:"address[]"},{internalType:"uint256[]",name:"rewardAmounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"getERC20PoolInfo",outputs:[{internalType:"address",name:"tokenAddress",type:"address"},{internalType:"uint256",name:"totalClaimedAmount",type:"uint256"},{internalType:"uint256",name:"contractBalance",type:"uint256"},{internalType:"bool",name:"isWhitelisted",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPoolInfo",outputs:[{internalType:"address",name:"nftAddress",type:"address"},{internalType:"uint256",name:"totalStakedTokens",type:"uint256"},{internalType:"uint256",name:"totalRewards",type:"uint256"},{internalType:"uint256",name:"contractBalance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getStakeInfo",outputs:[{internalType:"address",name:"staker",type:"address"},{internalType:"uint256",name:"stakedAt",type:"uint256"},{internalType:"uint256",name:"stakingDuration",type:"uint256"},{internalType:"bool",name:"active",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getStakedTokens",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getWhitelistedTokens",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"isStaked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"notifyERC20Reward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"notifyNativeReward",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"pure",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptIdByOriginal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"receiptToken",outputs:[{internalType:"contract IStakeReceipt",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"registerMe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"removeWhitelistedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardCarry",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"stakeMultiple",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"stakedTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"stakerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stonerNFT",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalRewardsClaimed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalStaked",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"unstake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"unstakeMultiple",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whitelistedTokens",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"whitelistedTokensList",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],Ue=[{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"_startTime",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AlreadyExists",type:"error"},{inputs:[],name:"InvalidOwner",type:"error"},{inputs:[],name:"InvalidRecipient",type:"error"},{inputs:[],name:"InvalidSender",type:"error"},{inputs:[],name:"NotFound",type:"error"},{inputs:[],name:"Unauthorized",type:"error"},{inputs:[],name:"UnsafeRecipient",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ERC20Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"ERC721Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"activePhase",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amountOrId",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"availableIds",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseTokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"phase",type:"uint256"},{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"}],name:"canMintAmountInPhase",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"}],name:"contractNFTBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"}],name:"contractTokenBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"enoughTokenBalance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"phase",type:"uint256"},{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256",name:"quantity",type:"uint256"}],name:"grantPhaseAccess",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"phase",type:"uint256"},{internalType:"address",name:"account",type:"address"}],name:"hasPhaseAccess",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxMintPerTx",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxMintable",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"quantity",type:"uint256"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"mintActive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"mintHasStarted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"minted",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"}],name:"ownerMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"owner",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"phaseDuration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"phaseMintsRemaining",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"phases",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"revokeOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"royaltyAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"royaltyReceiver",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"secondsUntilStart",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_baseURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxMintPerTx",type:"uint256"}],name:"setMaxPerTx",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"mintActive_",type:"bool"}],name:"setMintActive",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_paused",type:"bool"}],name:"setPaused",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_price",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_royaltyAmount",type:"uint256"}],name:"setRoyaltyAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_receiver",type:"address"}],name:"setRoyaltyReceiver",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_startTime",type:"uint256"}],name:"setStartTime",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"target",type:"address"},{internalType:"bool",name:"state",type:"bool"}],name:"setWhitelist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"startTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalAvailableIds",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"totalNFTsOwned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalNativeSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whitelist",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],It="0xB6748d708B5Cda0eA8c53e7072566971FCCb6b49",Ft="0x5777fc6ca7f6BDc02dF3323A0C05970bB9D05b74",Ze={stonerStakeReceipt:It,stonerFeePool:Ft},ye=Ze.stonerFeePool,Rt=Ze.stonerStakeReceipt,Ee="0x9b567e03d891F537b2B7874aA4A3308Cfe2F4FBb";function Pt(){console.log("ðŸŽ¯ StonerFeePoolActions component loaded!");const{address:t,signer:r,provider:i,isConnected:s,isCorrectNetwork:u}=Le(),[b,a]=l.useState(""),[f,n]=l.useState(!1),[p,d]=l.useState([]),[g,k]=l.useState([]),[y,_]=l.useState([]),[S,B]=l.useState([]),[$,Q]=l.useState(!1),[O,de]=l.useState("0"),[G,re]=l.useState([]),[ie,ce]=l.useState([]),[z,ue]=l.useState(!1),ne=async()=>{if(!r)throw new Error("Wallet not connected");return r},Z=async()=>{if(console.log("ðŸŽ¯ fetchNFTs called in StonerFeePoolActions"),!s||!i||!t){console.log("âŒ Wallet not connected, skipping NFT fetch");return}try{const c=t,T=new E(Ee,Ue,i),A=new E(ye,we,i),ee=await T.isApprovedForAll(c,ye);Q(ee);const h=await T.totalNFTsOwned(c);console.log("ðŸ”¢ Stoner NFT balance:",h.toString());const N=Number(h),I=1e3;if(N>I){console.log(`âš ï¸ Balance seems unusually large (${N}), limiting to ${I}`),d([]),k([]),a(`Warning: NFT balance appears corrupted (${N}). Please check the contract.`);return}const j=[];let w=!1;try{await T.tokenOfOwnerByIndex(c,0),w=!0,console.log("âœ… Using tokenOfOwnerByIndex approach");for(let L=0;L<Math.min(Number(h),50);L++)try{const q=await T.tokenOfOwnerByIndex(c,L);console.log(`ðŸ“ Found wallet token ${L+1}/${h}: #${q.toString()}`);let H=null;try{let U=await T.tokenURI(q);if(U.startsWith("ipfs://")&&(U=U.replace("ipfs://","https://ipfs.io/ipfs/")),U.startsWith("http")){const D=await(await fetch(U)).json();H=D.image||D.image_url,H&&H.startsWith("ipfs://")&&(H=H.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for token",q.toString())}j.push({tokenId:q.toString(),image:H})}catch(q){console.warn(`Failed to get token at index ${L}:`,q.message);continue}}catch{console.log("âŒ tokenOfOwnerByIndex not supported (ERC404 contract), trying event-based approach"),w=!1;try{console.log("ðŸ” Using direct ownership verification for ERC404 contract...");const q=new Set,H=Math.max(1e4,Number(h)*50),U=20;let J=0;for(let m=1;m<=H&&J<Number(h);m+=U){const M=Math.min(m+U-1,H),C=[];for(let v=m;v<=M;v++)C.push(T.ownerOf(v).then(P=>({tokenId:v,owner:P.toLowerCase()})).catch(()=>({tokenId:v,owner:null})));try{const v=await Promise.all(C);for(const{tokenId:P,owner:W}of v)if(W===c.toLowerCase()&&(q.add(P.toString()),J++,console.log(`âœ… Found owned token via direct check: #${P} (${J}/${h})`),J>=Number(h)))break}catch(v){console.warn(`Batch ${m}-${M} failed:`,v.message)}if(J>=Number(h))break;await new Promise(v=>setTimeout(v,10))}console.log(`ðŸŽ¯ Direct check found ${J} total tokens`);const D=Array.from(q).slice(0,50);console.log(`ðŸ“‹ Validating ${D.length} tokens and fetching metadata...`);const o=5;let x=0;for(let m=0;m<D.length;m+=o){const C=D.slice(m,m+o).map(async v=>{try{if((await T.ownerOf(v)).toLowerCase()!==c.toLowerCase())return null;let W=null;try{let F=await T.tokenURI(v);if(F.startsWith("ipfs://")&&(F=F.replace("ipfs://","https://ipfs.io/ipfs/")),F.startsWith("http")){const te=await(await fetch(F)).json();W=te.image||te.image_url,W&&W.startsWith("ipfs://")&&(W=W.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for token",v)}return{tokenId:v.toString(),image:W}}catch(P){return console.warn(`Token ${v} validation failed:`,P.message),null}});try{const v=await Promise.all(C);for(const P of v)P&&(j.push(P),x++,console.log(`âœ… Validated token #${P.tokenId} (${x}/${D.length})`))}catch(v){console.warn(`Metadata batch ${m} failed:`,v.message)}m+o<D.length&&await new Promise(v=>setTimeout(v,50))}x>0&&(w=!0,console.log(`ðŸŽ‰ Successfully loaded ${x} Stoner NFTs via direct ownership check`))}catch(q){console.warn("Direct ownership check failed:",q.message)}}if(!w||j.length<Number(h)){console.log("ðŸ” Trying multicall brute force token discovery...");try{const{Multicall:L}=await Mt(async()=>{const{Multicall:m}=await import("./index-Blt0uD8X.js");return{Multicall:m}},__vite__mapDeps([0,1])),q=new L({ethersProvider:i,tryAggregate:!0}),H=1e3,U=[];for(let m=0;m<=H;m++)U.push({reference:`ownerOf_${m}`,contractAddress:Ee,abi:Ue,calls:[{methodName:"ownerOf",methodParameters:[m]}]});const J=await q.call(U),o=Object.entries(J.results).filter(([m,M])=>M.callsReturnContext&&M.callsReturnContext[0].returnValues&&M.callsReturnContext[0].returnValues[0]&&M.callsReturnContext[0].returnValues[0].toLowerCase()===c.toLowerCase()).map(([m])=>parseInt(m.replace("ownerOf_",""))).map(async m=>{if(j.some(v=>v.tokenId===m.toString()))return null;let C=null;try{let v=await T.tokenURI(m);if(v.startsWith("ipfs://")&&(v=v.replace("ipfs://","https://ipfs.io/ipfs/")),v.startsWith("http")){const W=await(await fetch(v)).json();C=W.image||W.image_url,C&&C.startsWith("ipfs://")&&(C=C.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for token",m.toString())}return{tokenId:m.toString(),image:C}});(await Promise.all(o)).forEach(m=>{m&&j.push(m)})}catch(L){console.warn("Multicall failed (network may not support it):",L.message),console.log("ðŸ“‹ Continuing with enumerable results only")}}console.log(`âœ… Loaded ${j.length}/${h} wallet Stoner NFTs`),d(j);try{console.log("ðŸ”¥ Fetching staked NFTs from StakeReceipt contract...");const L=new E(Rt,Te,i);let q=[];try{const[H,U]=await L.getUserReceipts(c);console.log("ðŸ”¥ Raw receipts and original tokens from getUserReceipts:",H,U);const J=Array.from(H).map(o=>o.toString()),D=Array.from(U).map(o=>o.toString());console.log("ðŸ”¥ Staked Stoner NFT token IDs from receipts:",D);for(let o=0;o<D.length;o++){const x=D[o],m=J[o];let M=null;try{let C=await T.tokenURI(x);if(C.startsWith("ipfs://")&&(C=C.replace("ipfs://","https://ipfs.io/ipfs/")),C.startsWith("http")){const P=await(await fetch(C)).json();M=P.image||P.image_url,M&&M.startsWith("ipfs://")&&(M=M.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for staked token",x)}q.push({tokenId:x,receiptId:m,image:M})}}catch{console.log("ðŸ”¥ getUserReceipts() not available, trying fallback method...");try{const U=await L.balanceOf(c);if(console.log("ðŸ”¥ StakeReceipt balance:",U.toString()),U>0){const J=[];try{for(let D=0;D<Number(U);D++){const o=await L.tokenOfOwnerByIndex(c,D);J.push(o.toString())}console.log("ðŸ”¥ Receipt token IDs:",J)}catch{console.log("ðŸ”¥ tokenOfOwnerByIndex not available, using brute force for receipts...");for(let o=1;o<=1e3;o++)try{(await L.ownerOf(o)).toLowerCase()===c.toLowerCase()&&J.push(o.toString())}catch{}}for(const D of J){let o=null;try{o=await L.receiptToOriginalToken(D)}catch{try{o=await L.getOriginalTokenId(D)}catch{o=D}}if(o){let x=null;try{let m=await T.tokenURI(o);if(m.startsWith("ipfs://")&&(m=m.replace("ipfs://","https://ipfs.io/ipfs/")),m.startsWith("http")){const C=await(await fetch(m)).json();x=C.image||C.image_url,x&&x.startsWith("ipfs://")&&(x=x.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for staked token",o.toString())}q.push({tokenId:o.toString(),receiptId:D,image:x})}}}}catch(U){console.log("ðŸ”¥ Fallback method also failed:",U)}}console.log(`âœ… Loaded ${q.length} staked Stoner NFTs:`,q.map(H=>H.tokenId)),k(q)}catch(L){console.warn("Failed to fetch staked NFTs:",L)}}catch(c){console.error("Failed to fetch NFTs:",c)}},ae=async()=>{if(console.log("ðŸ’° fetchRewards called in StonerFeePoolActions"),!window.ethereum||!s){console.log("âŒ Wallet not connected, skipping rewards fetch");return}try{ue(!0);const c=new Me(window.ethereum),A=await(await c.getSigner()).getAddress(),ee=new E(ye,we,c),h=await ee.calculatePendingRewards(A);de(ke(h)),console.log("ðŸ’Ž Native S rewards:",ke(h));const N=await ee.getWhitelistedTokens();ce(N),console.log("ðŸ“‹ Whitelisted tokens:",N);const I=N.map(async w=>{try{const L=await ee.calculatePendingERC20Rewards(A,w);let q="Unknown",H=18;try{const U=new E(w,["function symbol() view returns (string)","function decimals() view returns (uint8)"],c);q=await U.symbol(),H=await U.decimals()}catch(U){console.warn(`Failed to get token info for ${w}:`,U.message)}return{address:w,symbol:q,decimals:H,earned:at(L,H),rawEarned:L.toString()}}catch(L){return console.warn(`Failed to get rewards for token ${w}:`,L.message),null}}),j=(await Promise.all(I)).filter(w=>w!==null);re(j),console.log("ðŸª™ ERC20 rewards:",j)}catch(c){console.error("Failed to fetch rewards:",c)}finally{ue(!1)}};l.useEffect(()=>{s&&t&&u&&(console.log("ðŸ”— Wallet connected, fetching NFTs and rewards..."),Z(),ae())},[s,t,u]);const oe=async()=>{if(y.length===0){a("Select NFTs to stake first");return}n(!0),a("");try{const c=await ne(),T=new E(ye,we,c);let A;y.length===1?A=await T.stake(y[0]):A=await T.stakeMultiple(y),a("Staking..."),await A.wait(),a("Staking successful!"),_([]),await Z()}catch(c){a("Staking failed: "+(c.reason||c.message))}n(!1)},R=async()=>{if(S.length===0){a("Select staked NFTs to unstake first");return}n(!0),a("");try{const c=await ne(),T=new E(ye,we,c),A=S.map(h=>{const N=g.find(I=>I.tokenId===h);return N?N.receiptId:h});console.log("ðŸ”¥ Unstaking with receipt IDs:",A);let ee;A.length===1?ee=await T.unstake(A[0]):ee=await T.unstakeMultiple(A),a("Unstaking..."),await ee.wait(),a("Unstaking successful!"),B([]),await Z()}catch(c){console.error("Unstaking failed:",c),a("Unstaking failed: "+(c.reason||c.message))}n(!1)},Y=async()=>{n(!0),a("");try{const c=await ne(),A=await new E(ye,we,c).claimAllRewards();a("Claiming rewards..."),await A.wait(),a("Rewards claimed successfully!"),await ae()}catch(c){a("Claim failed: "+(c.reason||c.message))}n(!1)},xe=async()=>{n(!0),a("");try{const c=await ne(),A=await new E(ye,we,c).claimRewardsOnly();a("Claiming native rewards..."),await A.wait(),a("Native rewards claimed successfully!"),await ae()}catch(c){a("Native claim failed: "+(c.reason||c.message))}n(!1)},X=async c=>{n(!0),a("");try{const T=await ne(),ee=await new E(ye,we,T).claimERC20Rewards(c);a("Claiming ERC20 rewards..."),await ee.wait(),a("ERC20 rewards claimed successfully!"),await ae()}catch(T){a("ERC20 claim failed: "+(T.reason||T.message))}n(!1)},Ie=async()=>{n(!0);try{const c=await ne();await(await new E(Ee,["function setApprovalForAll(address,bool) external"],c).setApprovalForAll(ye,!0)).wait(),Q(!0),a("Approval successful!")}catch(c){a("Approval failed: "+(c.reason||c.message))}n(!1)},he=!s;return e.jsxs("div",{className:"p-6 bg-white/95 dark:bg-gray-800/95 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 backdrop-blur-sm space-y-6",children:[he&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-600 dark:text-blue-400 mb-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"font-medium",children:"Connect Wallet to Interact"})]}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Connect your wallet using the button in the header to stake NFTs and claim rewards"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"ðŸŒ¿"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-green-400",children:"Stoner NFT Staking"}),e.jsx("p",{className:"text-sm text-muted",children:s?`Connected: ${t.slice(0,6)}...${t.slice(-4)}`:"Preview Mode - Connect wallet to interact"})]})]}),e.jsx("button",{onClick:Y,disabled:f||!s,className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg hover:from-yellow-600 hover:to-orange-600 transition-all disabled:opacity-50 font-medium",title:s?"":"Connect wallet to claim rewards",children:"Claim Rewards"})]}),b&&e.jsx("div",{className:`p-3 rounded-lg ${b.includes("successful")||b.includes("claimed")?"bg-green-900/20 border border-green-500/20 text-green-400":b.includes("failed")||b.includes("error")?"bg-red-900/20 border border-red-500/20 text-red-400":"bg-blue-900/20 border border-blue-500/20 text-blue-400"}`,children:b}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/10 to-orange-500/10 rounded-xl border border-yellow-500/20 p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-lg",children:"ðŸ’°"})}),e.jsx("h4",{className:"font-semibold text-yellow-400",children:"Claimable Rewards"})]}),e.jsx("button",{onClick:ae,disabled:z||!s,className:"px-3 py-1 bg-yellow-600 text-white rounded text-sm disabled:opacity-50 hover:bg-yellow-700 transition-colors",title:s?"":"Connect wallet to refresh rewards",children:z?"Loading...":"Refresh"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-400 text-lg",children:"âš¡"}),e.jsx("span",{className:"font-medium text-blue-400",children:"S Rewards"})]}),e.jsx("button",{onClick:xe,disabled:f||parseFloat(O)===0||!s,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm disabled:opacity-50 hover:bg-blue-700 transition-colors",title:s?"":"Connect wallet to claim",children:"Claim S"})]}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:[parseFloat(O).toFixed(6)," S"]})]}),G.length>0?e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-400 text-lg",children:"ðŸª™"}),e.jsx("span",{className:"font-medium text-green-400",children:"Token Rewards"})]}),e.jsx("button",{onClick:Y,disabled:f||G.every(c=>parseFloat(c.earned)===0)||!s,className:"px-3 py-1 bg-green-600 text-white rounded text-sm disabled:opacity-50 hover:bg-green-700 transition-colors",title:s?"":"Connect wallet to claim",children:"Claim All"})]}),e.jsx("div",{className:"space-y-2 max-h-24 overflow-y-auto",children:G.map((c,T)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-400",children:[c.symbol,":"]}),e.jsx("span",{className:"text-white font-medium",children:parseFloat(c.earned).toFixed(4)})]}),e.jsx("button",{onClick:()=>X(c.address),disabled:f||parseFloat(c.earned)===0||!s,className:"px-2 py-1 bg-green-600/80 text-white rounded text-xs disabled:opacity-50 hover:bg-green-600 transition-colors",title:s?"":"Connect wallet to claim",children:"Claim"})]},c.address))})]}):e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-gray-400 text-lg",children:"ðŸª™"}),e.jsx("span",{className:"font-medium text-gray-400",children:"Token Rewards"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:"No whitelisted tokens or rewards available"})]})]}),(parseFloat(O)>0||G.some(c=>parseFloat(c.earned)>0))&&e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:Y,disabled:f||!s,className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-orange-600 text-white rounded-lg disabled:opacity-50 hover:from-yellow-600 hover:to-orange-700 transition-all font-semibold",title:s?"":"Connect wallet to claim rewards",children:f?"Claiming...":"Claim All Rewards"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-semibold text-green-400",children:["Stake NFTs (",y.length," selected)"]}),!$&&e.jsx("button",{onClick:Ie,disabled:f||!s,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm disabled:opacity-50",title:s?"":"Connect wallet to approve",children:"Approve All"})]}),p.length===0?e.jsxs("div",{className:"p-6 bg-card/30 rounded-xl text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ”"}),e.jsx("p",{className:"text-muted",children:"No Stoner NFTs found in wallet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-4 gap-3",children:p.map(c=>e.jsxs("div",{className:`relative cursor-pointer rounded-lg border-2 transition-all ${y.includes(c.tokenId)?"border-green-400 bg-green-400/10":"border-transparent hover:border-accent/30"}`,onClick:()=>{y.includes(c.tokenId)?_(T=>T.filter(A=>A!==c.tokenId)):_(T=>[...T,c.tokenId])},children:[e.jsx("div",{className:"aspect-square p-2",children:e.jsx(Ne,{image:c.image,tokenId:c.tokenId,size:"100%"})}),e.jsxs("div",{className:"text-xs text-center p-1",children:["#",c.tokenId]})]},c.tokenId))}),e.jsx("button",{onClick:oe,disabled:f||y.length===0||!$||!s,className:"w-full px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg disabled:opacity-50",title:s?"":"Connect wallet to stake NFTs",children:f?"Staking...":`Stake ${y.length} NFT${y.length!==1?"s":""}`})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-blue-400",children:["Unstake NFTs (",S.length," selected)"]}),g.length===0?e.jsxs("div",{className:"p-6 bg-card/30 rounded-xl text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ“¦"}),e.jsx("p",{className:"text-muted",children:"No staked NFTs"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-4 gap-3",children:g.slice(0,12).map(c=>e.jsxs("div",{className:`relative cursor-pointer rounded-lg border-2 transition-all ${S.includes(c.tokenId)?"border-blue-400 bg-blue-400/10":"border-transparent hover:border-accent/30"}`,onClick:()=>{S.includes(c.tokenId)?B(T=>T.filter(A=>A!==c.tokenId)):B(T=>[...T,c.tokenId])},children:[e.jsx("div",{className:"aspect-square p-2",children:e.jsx(Ne,{image:c.image,tokenId:c.tokenId,size:"100%"})}),e.jsxs("div",{className:"text-xs text-center p-1",children:["#",c.tokenId]})]},c.tokenId))}),e.jsx("button",{onClick:R,disabled:f||S.length===0||!s,className:"w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg disabled:opacity-50",title:s?"":"Connect wallet to unstake NFTs",children:f?"Unstaking...":`Unstake ${S.length} NFT${S.length!==1?"s":""}`})]})]})]})]})}function At(){return e.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-2xl",children:"ðŸƒ"})}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-400 via-emerald-500 to-teal-400 bg-clip-text text-transparent",children:"Stoner NFT Staking"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg max-w-2xl mx-auto",children:"Stake your Stoner NFTs to earn multiple token rewards and participate in the ecosystem"})]}),e.jsx(Pt,{})]})}const _e={chainId:"0x92",chainName:"Sonic Network",rpcUrls:["https://rpc.sonic.org"],nativeCurrency:{name:"S",symbol:"S",decimals:18},blockExplorerUrls:["https://explorer.sonic.org"]};function Lt({onNetworkReady:t}){const[r,i]=l.useState(null),[s,u]=l.useState(!1),[b,a]=l.useState(!1);l.useEffect(()=>{if(n(),window.ethereum)return window.ethereum.on("chainChanged",f),()=>window.ethereum.removeListener("chainChanged",f)},[]);const f=d=>{const g=parseInt(d,16);i(g),u(g===146),g===146&&(t==null||t(!0))},n=async()=>{if(window.ethereum)try{const d=await window.ethereum.request({method:"eth_chainId"}),g=parseInt(d,16);i(g),u(g===146),g===146&&(t==null||t(!0))}catch(d){console.warn("Failed to check network:",d)}},p=async()=>{if(window.ethereum){a(!0);try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:_e.chainId}]})}catch(d){if(d.code===4902)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[_e]})}catch(g){console.error("Failed to add Sonic network:",g)}else console.error("Failed to switch to Sonic network:",d)}a(!1)}};return window.ethereum?!s&&r!==null?e.jsx("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:"ðŸ”„"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-800 dark:text-orange-200",children:"Wrong Network"}),e.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:"Please switch to Sonic Network (Chain ID: 146)"})]})]}),e.jsx("button",{onClick:p,disabled:b,className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium disabled:opacity-50 flex items-center gap-2 transition-colors",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Switching..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"ðŸ”„"}),"Switch to Sonic"]})})]})}):null:e.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:"ðŸ¦Š"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-amber-800 dark:text-amber-200",children:"Wallet Required"}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Please install MetaMask or another Ethereum wallet to continue."})]})]})})}function Et(){const{address:t,isConnecting:r,isCorrectNetwork:i,connectWallet:s,disconnect:u,switchToSonicNetwork:b,isConnected:a}=Le(),f=async()=>{try{await s()}catch(d){console.error("Failed to connect wallet:",d)}},n=async()=>{try{await b()}catch(d){console.error("Failed to switch network:",d)}},p=d=>d?`${d.slice(0,6)}...${d.slice(-4)}`:"";return a&&!i?e.jsx("button",{onClick:n,className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-semibold text-sm shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:"âš ï¸ Switch to Sonic"}):a?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900/50 dark:to-emerald-900/50 text-green-800 dark:text-green-200 rounded-xl font-semibold text-sm shadow-sm border border-green-200 dark:border-green-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),p(t)]}),e.jsx("button",{onClick:u,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",title:"Disconnect wallet",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsx("button",{onClick:f,disabled:r,className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-indigo-500 to-blue-500 hover:from-indigo-600 hover:to-blue-600 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold text-sm shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2 disabled:cursor-not-allowed",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Connecting..."]}):e.jsx(e.Fragment,{children:"ðŸ”— Connect Wallet"})})}function $t(){const t=Xe(),[r,i]=l.useState(()=>typeof window<"u"?localStorage.getItem("theme")!=="light":!0);return je.useEffect(()=>{document.documentElement.classList.toggle("dark",r),localStorage.setItem("theme",r?"dark":"light")},[r]),e.jsx(ft,{children:e.jsx(ut,{children:e.jsxs("div",{className:"min-h-screen p-0 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:bg-gradient-to-br dark:from-zinc-900 dark:via-gray-900 dark:to-slate-900 text-gray-900 dark:text-gray-100",children:[e.jsx(Lt,{}),e.jsxs("div",{className:"max-w-6xl mx-auto p-2 sm:p-4 md:p-6 w-full",children:[e.jsxs("header",{className:"flex flex-col sm:flex-row items-center justify-between mb-8 py-6 px-4 sm:px-6 rounded-2xl shadow-xl bg-white/95 dark:bg-gray-800/95 backdrop-blur-lg gap-4 border border-gray-200 dark:border-gray-700 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 via-blue-500 to-teal-500 rounded-xl shadow-lg flex items-center justify-center group-hover:shadow-glow transition-all duration-300",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"ðŸŠ"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-extrabold bg-gradient-to-r from-indigo-600 via-blue-500 to-teal-400 bg-clip-text text-transparent",children:"NFT Swap Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 hidden sm:block",children:"Decentralized NFT trading on Sonic Network"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[t.pathname==="/"&&e.jsx($e,{to:"/staking",className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-semibold text-sm shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:"ðŸƒ Stoner Staking"}),t.pathname==="/staking"&&e.jsx($e,{to:"/",className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-indigo-500 to-blue-500 hover:from-indigo-600 hover:to-blue-600 text-white font-semibold text-sm shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:"â† Back to Swap Pools"}),e.jsx(Et,{}),e.jsx("button",{onClick:()=>i(!r),className:"p-3 rounded-xl bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 transition-all duration-200 shadow-sm hover:shadow-md",title:"Toggle theme",children:e.jsx("span",{className:"text-lg",children:r?"ðŸŒ™":"â˜€ï¸"})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-100 to-blue-100 dark:from-indigo-900/50 dark:to-blue-900/50 text-indigo-800 dark:text-indigo-200 rounded-xl font-semibold text-sm shadow-sm border border-indigo-200 dark:border-indigo-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Sonic Network"]})]})]}),e.jsx("main",{children:e.jsxs(et,{children:[e.jsx(Be,{path:"/",element:e.jsx(Nt,{})}),e.jsx(Be,{path:"/staking",element:e.jsx(At,{})})]})})]})]})})})}qe(document.getElementById("root")).render(e.jsx(je.StrictMode,{children:e.jsx(tt,{children:e.jsx($t,{})})}));
