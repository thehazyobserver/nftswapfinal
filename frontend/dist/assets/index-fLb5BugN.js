const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Blt0uD8X.js","assets/vendor-DnY-W9X-.js"])))=>i.map(i=>d[i]);
import{r as c,a as He,R as ke,u as Ve,L as Pe,b as Ye,c as Ee,B as Je}from"./vendor-DnY-W9X-.js";import{C as E,B as se,J as Ze,f as Oe,a as Ke}from"./ethers-BaJ96HYd.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const h of i)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function p(i){const h={};return i.integrity&&(h.integrity=i.integrity),i.referrerPolicy&&(h.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?h.credentials="include":i.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(i){if(i.ep)return;i.ep=!0;const h=p(i);fetch(i.href,h)}})();var We={exports:{}},Ie={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ge=c,Qe=Symbol.for("react.element"),Xe=Symbol.for("react.fragment"),et=Object.prototype.hasOwnProperty,tt=Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nt={key:!0,ref:!0,__self:!0,__source:!0};function _e(n,a,p){var r,i={},h=null,f=null;p!==void 0&&(h=""+p),a.key!==void 0&&(h=""+a.key),a.ref!==void 0&&(f=a.ref);for(r in a)et.call(a,r)&&!nt.hasOwnProperty(r)&&(i[r]=a[r]);if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Qe,type:n,key:h,ref:f,props:i,_owner:tt.current}}Ie.Fragment=Xe;Ie.jsx=_e;Ie.jsxs=_e;We.exports=Ie;var e=We.exports,De,$e=He;De=$e.createRoot,$e.hydrateRoot;const at=[{inputs:[{internalType:"address",name:"_centralStonerFeePool",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidERC721",type:"error"},{inputs:[],name:"InvalidShareRange",type:"error"},{inputs:[],name:"PoolAlreadyExists",type:"error"},{inputs:[],name:"PoolDoesNotExist",type:"error"},{inputs:[],name:"ZeroAddressNotAllowed",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"swapFeeInWei",type:"uint256"},{indexed:!1,internalType:"uint256",name:"stonerShare",type:"uint256"}],name:"DefaultFeesUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"centralStonerFeePool",type:"address"},{indexed:!0,internalType:"address",name:"deployer",type:"address"}],name:"FactoryDeployed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"nftCollection",type:"address"},{indexed:!0,internalType:"address",name:"swapPool",type:"address"}],name:"PoolDeactivated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"nftCollection",type:"address"},{indexed:!0,internalType:"address",name:"swapPool",type:"address"},{indexed:!0,internalType:"address",name:"stakeReceipt",type:"address"},{indexed:!1,internalType:"address",name:"creator",type:"address"}],name:"PoolPairCreated",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allCollections",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allPools",outputs:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"bool",name:"active",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"centralStonerFeePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"collectionToPool",outputs:[{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"bool",name:"exists",type:"bool"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"uint256",name:"customSwapFee",type:"uint256"},{internalType:"uint256",name:"customStonerShare",type:"uint256"}],name:"createPoolPair",outputs:[{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"}],name:"deactivatePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"defaultStonerShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"defaultSwapFeeInWei",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getActivePools",outputs:[{components:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"bool",name:"active",type:"bool"}],internalType:"struct MultiPoolFactoryNonProxy.PoolData[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllCollections",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllPools",outputs:[{components:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"bool",name:"active",type:"bool"}],internalType:"struct MultiPoolFactoryNonProxy.PoolData[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getFactoryStats",outputs:[{internalType:"uint256",name:"totalPools",type:"uint256"},{internalType:"address",name:"centralPool",type:"address"},{internalType:"uint256",name:"defaultFee",type:"uint256"},{internalType:"uint256",name:"defaultShare",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"collections",type:"address[]"}],name:"getMultiplePoolInfos",outputs:[{components:[{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"bool",name:"exists",type:"bool"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"}],internalType:"struct MultiPoolFactoryNonProxy.PoolInfo[]",name:"poolInfos",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"}],name:"getPoolInfo",outputs:[{components:[{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"bool",name:"exists",type:"bool"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"}],internalType:"struct MultiPoolFactoryNonProxy.PoolInfo",name:"poolInfo",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"}],name:"poolExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"registerMe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"}],name:"registerPoolPair",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newSwapFeeInWei",type:"uint256"},{internalType:"uint256",name:"newStonerShare",type:"uint256"}],name:"setDefaultFees",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],ge=[{inputs:[{internalType:"address",name:"_nftCollection",type:"address"},{internalType:"address",name:"_receiptContract",type:"address"},{internalType:"address",name:"_stonerPool",type:"address"},{internalType:"uint256",name:"_swapFeeInWei",type:"uint256"},{internalType:"uint256",name:"_stonerShare",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AlreadyInitialized",type:"error"},{inputs:[],name:"IncorrectFee",type:"error"},{inputs:[],name:"InvalidReceiptToken",type:"error"},{inputs:[],name:"InvalidStonerShare",type:"error"},{inputs:[],name:"NoRewardsToClaim",type:"error"},{inputs:[],name:"NoTokensAvailable",type:"error"},{inputs:[],name:"NotInitialized",type:"error"},{inputs:[],name:"NotSlotOwner",type:"error"},{inputs:[],name:"NotTokenOwner",type:"error"},{inputs:[],name:"SameTokenSwap",type:"error"},{inputs:[],name:"SlotNotActive",type:"error"},{inputs:[],name:"TokenNotApproved",type:"error"},{inputs:[],name:"TokenUnavailable",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaxBatchSize",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newMaxUnstakeAll",type:"uint256"}],name:"BatchLimitsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"swapCount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalFeePaid",type:"uint256"}],name:"BatchSwapExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256[]",name:"receiptTokenIds",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"tokensReceived",type:"uint256[]"}],name:"BatchUnstaked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"stonerAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"rewardsAmount",type:"uint256"}],name:"FeeSplit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardsClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardsDistributed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"slotId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newShare",type:"uint256"}],name:"StonerShareUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenIdIn",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokenIdOut",type:"uint256"},{indexed:!1,internalType:"uint256",name:"slotId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"feePaid",type:"uint256"}],name:"SwapExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newFeeInWei",type:"uint256"}],name:"SwapFeeUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"slotId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"Unstaked",type:"event"},{inputs:[],name:"claimRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"emergencyWithdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"exit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getContractInfo",outputs:[{internalType:"address",name:"nft",type:"address"},{internalType:"address",name:"receipt",type:"address"},{internalType:"address",name:"stoner",type:"address"},{internalType:"uint256",name:"fee",type:"uint256"},{internalType:"uint256",name:"share",type:"uint256"},{internalType:"uint256",name:"poolSize",type:"uint256"},{internalType:"uint256",name:"stakedCount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPoolSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPoolTokens",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserActiveSlotCount",outputs:[{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserSlots",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserStakes",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"initialized",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastUpdateTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxBatchSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxUnstakeAllLimit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextSlotId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nftCollection",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"pure",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"pendingRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolSlots",outputs:[{internalType:"address",name:"originalStaker",type:"address"},{internalType:"uint256",name:"stakedAt",type:"uint256"},{internalType:"bool",name:"active",type:"bool"},{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"receiptContract",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptToSlot",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registerMe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardPerToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"newMaxBatchSize",type:"uint256"},{internalType:"uint256",name:"newMaxUnstakeAll",type:"uint256"}],name:"setBatchLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newShare",type:"uint256"}],name:"setStonerShare",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newFeeInWei",type:"uint256"}],name:"setSwapFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"stakeNFT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"stakeNFTBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stonerPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stonerShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"swapFeeInWei",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenIdIn",type:"uint256"}],name:"swapNFT",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIdsIn",type:"uint256[]"}],name:"swapNFTBatch",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenIndexInPool",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalActiveSlots",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalRewardsDistributed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unstakeAllNFTs",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"unstakeNFT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"receiptTokenIds",type:"uint256[]"}],name:"unstakeNFTBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"userSlots",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],st=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidURI",type:"error"},{inputs:[],name:"NonTransferable",type:"error"},{inputs:[],name:"OnlyPool",type:"error"},{inputs:[],name:"PoolAlreadySet",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"newBaseURI",type:"string"}],name:"BaseURIUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"pool",type:"address"}],name:"PoolSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"receiptTokenId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"originalTokenId",type:"uint256"}],name:"ReceiptBurned",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"originalTokenId",type:"uint256"}],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"originalTokenIds",type:"uint256[]"}],name:"batchMint",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"receiptTokenIds",type:"uint256[]"}],name:"batchBurn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserReceipts",outputs:[{internalType:"uint256[]",name:"receipts",type:"uint256[]"},{internalType:"uint256[]",name:"originalTokens",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"getOriginalTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"getReceiptInfo",outputs:[{internalType:"uint256",name:"originalTokenId",type:"uint256"},{internalType:"uint256",name:"mintTime",type:"uint256"},{internalType:"address",name:"originalMinter",type:"address"},{internalType:"uint256",name:"age",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserReceiptHistory",outputs:[{internalType:"uint256[]",name:"receiptIds",type:"uint256[]"},{internalType:"uint256[]",name:"originalTokenIds",type:"uint256[]"},{internalType:"uint256[]",name:"mintTimes",type:"uint256[]"},{internalType:"uint256[]",name:"ages",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCollectionTimeline",outputs:[{internalType:"uint256",name:"totalMinted",type:"uint256"},{internalType:"uint256",name:"totalBurned",type:"uint256"},{internalType:"uint256",name:"currentSupply",type:"uint256"},{internalType:"uint256",name:"averageAge",type:"uint256"},{internalType:"uint256",name:"oldestActive",type:"uint256"},{internalType:"uint256",name:"newestActive",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserReceiptPortfolio",outputs:[{internalType:"uint256",name:"totalReceipts",type:"uint256"},{internalType:"uint256",name:"averageHoldingTime",type:"uint256"},{internalType:"uint256",name:"totalOriginalValue",type:"uint256"},{internalType:"uint256[]",name:"receiptIds",type:"uint256[]"},{internalType:"uint256[]",name:"originalTokenIds",type:"uint256[]"},{internalType:"uint256[]",name:"holdingDurations",type:"uint256[]"},{internalType:"address[]",name:"poolAddresses",type:"address[]"},{internalType:"uint256",name:"oldestReceiptAge",type:"uint256"},{internalType:"uint256",name:"newestReceiptAge",type:"uint256"},{internalType:"bool",name:"hasLongTermHoldings",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"},{internalType:"address",name:"expectedPool",type:"address"}],name:"validateReceipt",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"uri",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_pool",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"registerMe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptToOriginalToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptMintTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptMinter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"approve",outputs:[],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"bool",name:"",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"}];function ve({image:n,tokenId:a,size:p=64}){const[r,i]=ke.useState(!1),[h,f]=ke.useState(!0);return!n||r?e.jsx("div",{style:{width:p,height:p},className:"bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800 rounded-lg flex items-center justify-center text-gray-600 dark:text-gray-400 text-xs font-mono border border-gray-300 dark:border-gray-600 shadow-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg mb-1",children:"🖼️"}),e.jsxs("div",{children:["#",a]})]})}):e.jsxs("div",{className:"relative",style:{width:p,height:p},children:[h&&e.jsx("div",{style:{width:p,height:p},className:"absolute inset-0 bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800 rounded-lg flex items-center justify-center animate-pulse",children:e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})}),e.jsx("img",{src:n,alt:`NFT #${a}`,style:{width:p,height:p},className:"rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 object-cover",onError:()=>i(!0),onLoad:()=>f(!1)})]})}function it({nftAddress:n,tokenId:a,spender:p,provider:r,onApproved:i,disabled:h}){const[f,O]=c.useState(!1),[k,D]=c.useState(!1),[B,A]=c.useState("");c.useEffect(()=>{if(D(!1),A(""),!n||!a||!p||!r)return;(async()=>{try{const te=await new E(n,["function getApproved(uint256) view returns (address)","function approve(address,uint256) external"],r).getApproved(a);D(te.toLowerCase()===p.toLowerCase())}catch{A("Failed to check approval")}})()},[n,a,p,r]);const ee=async()=>{O(!0),A("");try{if(!window.ethereum)throw new Error("Wallet not found");const z=new se(window.ethereum).getSigner();await(await new E(n,["function approve(address,uint256) external"],await z).approve(p,a)).wait(),D(!0),i&&i()}catch(z){A(z.reason||z.message)}O(!1)};return a?k?e.jsxs("div",{className:"flex items-center gap-1 ml-2 px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-lg text-xs font-medium border border-green-200 dark:border-green-700",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Approved"]}):e.jsx("button",{className:"ml-2 px-3 py-1.5 bg-gradient-to-r from-indigo-500 to-blue-500 hover:from-indigo-600 hover:to-blue-600 text-white rounded-lg text-xs font-medium shadow-sm transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",onClick:ee,disabled:f||h,children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin"}),"Approving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Approve"]})}):null}function Ue({count:n=6,size:a=56}){return e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:Array.from({length:n}).map((p,r)=>e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"shimmer rounded-xl border-2 border-gray-200 dark:border-gray-700 shadow-sm",style:{width:a+8,height:a+32},children:[e.jsx("div",{className:"bg-gray-300 dark:bg-gray-600 rounded-lg m-1 animate-pulse",style:{width:a,height:a}}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded mx-2 mt-2 animate-pulse"})]})},r))})}function rt({swapPool:n,stakeReceipt:a,provider:p}){const[r,i]=c.useState(""),[h,f]=c.useState(!1),[O,k]=c.useState([]),[D,B]=c.useState({}),[A,ee]=c.useState(null),[z,G]=c.useState(!1),[te,ie]=c.useState(!1),[xe,oe]=c.useState([]),[Z,ne]=c.useState([]),[R,ae]=c.useState([]),[_,ce]=c.useState([]),[w,L]=c.useState([]),[y,H]=c.useState([]),[I,K]=c.useState(null),[be,V]=c.useState(!1),[Ae,we]=c.useState(!1),[Ne,pe]=c.useState(!1),[je,Se]=c.useState(null),s=async()=>{if(!window.ethereum)throw new Error("Wallet not found");return new se(window.ethereum).getSigner()},P=async()=>{console.log("Manual refresh triggered"),V(!0),we(!0),pe(!0),k([]),ne([]),ae([]),K(null),await new Promise(d=>setTimeout(d,100));const t=p||(window.ethereum?new se(window.ethereum):null);if(!t){V(!1),we(!1),pe(!1);return}let o=null;if(window.ethereum)try{o=await(await t.getSigner()).getAddress()}catch(d){console.warn("Could not get signer:",d)}K(o)},N=async(t,o,d)=>{try{const S=new E(d,ge,o);if(t){const u=await S.getUserStakes(t);oe(u.map(x=>x.toString()))}}catch{oe([])}try{const S=new E(a,["function balanceOf(address) view returns (uint256)","function tokenOfOwnerByIndex(address,uint256) view returns (uint256)","function tokenURI(uint256) view returns (string)","function receiptToOriginalToken(uint256) view returns (uint256)"],o);if(t){const u=await S.balanceOf(t),x=[];for(let T=0;T<Number(u);T++){const F=await S.tokenOfOwnerByIndex(t,T);let b=null;try{let l=await S.tokenURI(F);if(l&&l.startsWith("ipfs://")&&(l=l.replace("ipfs://","https://ipfs.io/ipfs/")),l&&l.startsWith("http"))try{const C=await(await fetch(l)).json();b=C.image||C.image_url||C.properties&&C.properties.image||null,b&&b.startsWith("ipfs://")&&(b=b.replace("ipfs://","https://ipfs.io/ipfs/"))}catch(m){console.warn("Failed to fetch receipt metadata:",m)}}catch(l){console.warn("Failed to fetch receipt NFT metadata/image",F,l)}x.push({tokenId:F.toString(),image:b})}ne(x)}}catch(S){console.error("Failed to fetch receipt NFTs:",S),ne([])}};c.useEffect(()=>{(async()=>{const o=p||(window.ethereum?new se(window.ethereum):null);if(!o)return;V(!0),we(!0);let d=null;if(window.ethereum)try{d=await(await o.getSigner()).getAddress()}catch{}if(K(d),!d){k([]),V(!1),ne([]),we(!1),oe([]);return}let S=null;try{if(S=await new E(n,ge,o).nftCollection(),console.log("👤 User Address:",d),console.log("🏊 SwapPool Address:",n),!S){console.log("❌ Could not get NFT collection address from SwapPool"),k([]),V(!1);return}const u=new E(S,["function balanceOf(address) view returns (uint256)","function ownerOf(uint256) view returns (address)","function tokenOfOwnerByIndex(address,uint256) view returns (uint256)","function tokenURI(uint256) view returns (string)","function getApproved(uint256) view returns (address)","function isApprovedForAll(address,address) view returns (bool)","function totalSupply() view returns (uint256)"],o);if(d){const x=await u.balanceOf(d),T=Number(x);if(console.log(`🎯 Collection NFT Balance for ${d}: ${T}`),T===0){console.log("📭 No NFTs owned by user (balance=0), skipping scan"),k([]),B({}),V(!1),await N(d,o,n);return}const F=[];let b=!1;try{b=await u.isApprovedForAll(d,n)}catch{}G(!!b);let l=[];if(T>0&&T<=1e4&&T>0)try{console.log(`🔍 Trying enumerable approach for ${x.toString()} collection tokens...`);const j=[];for(let Y=0;Y<T;Y++)j.push(u.tokenOfOwnerByIndex(d,Y));l=await Promise.all(j),console.log("✅ Enumerable approach successful, found tokens:",l.map(Y=>Y.toString()))}catch{console.log("❌ tokenOfOwnerByIndex not supported, will use fallback scan for Collection NFTs"),l=[]}else console.log(`⚠️ Unrealistic balance (${x.toString()}), skipping enumerable approach`),l=[];if(l.length===0)try{console.log("🎯 Starting optimized direct ownership scan for Collection NFTs...");let j=2e3;try{const X=await u.totalSupply();j=Math.min(Number(X)+100,2e3),console.log(`📈 Collection NFT Total supply: ${X.toString()}, scanning up to token ${j}`)}catch{console.log(`📈 Total supply not available, scanning up to token ${j}`)}const Y=new Set,ye=20;let me=0;const Me=T>0?Number(T):100;for(let X=1;X<=j&&me<Me;X+=ye){const Fe=Math.min(X+ye-1,j),le=[];for(let J=X;J<=Fe;J++)le.push(u.ownerOf(J).then(fe=>({tokenId:J,owner:fe.toLowerCase()})).catch(()=>({tokenId:J,owner:null})));try{const J=await Promise.all(le);for(const{tokenId:fe,owner:Te}of J)if(Te===d.toLowerCase()&&(Y.add(fe.toString()),me++,console.log(`✅ Found owned token via direct check: #${fe} (${me}/${Me})`),T>0&&me>=Number(T)))break}catch(J){console.warn(`Batch ${X}-${Fe} failed:`,J.message)}if(T>0&&me>=Number(T))break;await new Promise(J=>setTimeout(J,50))}l=Array.from(Y).map(X=>BigInt(X)),console.log(`✅ Direct ownership scan complete, found ${l.length} tokens:`,l.map(X=>X.toString())),T===0&&l.length>0&&console.log(`✅ ERC404 token detection successful: balance=0 but found ${l.length} actual tokens`)}catch(j){console.error("❌ Direct ownership scan failed:",j),l=[]}if(console.log("🔢 Token IDs found:",l.map(j=>j.toString())),l.length===0){console.log("📭 No tokens found for user"),k([]),B({}),V(!1);return}const C=l.map(j=>u.tokenURI(j).catch(Y=>(console.warn(`Failed to get URI for Collection token ${j}:`,Y),null))),g=await Promise.all(C);console.log("🌐 Collection NFT URIs fetched:",g.length);const $=l.map(j=>b?Promise.resolve(!0):u.getApproved(j).then(Y=>Y&&n&&Y.toLowerCase()===n.toLowerCase()).catch(()=>!1)),M=await Promise.all($),v=5,U=[],Q={};console.log(`🔄 Processing metadata for ${l.length} Collection NFTs in batches of ${v}`);for(let j=0;j<l.length;j+=v){const Y=l.slice(j,j+v);console.log(`📦 Processing batch ${Math.floor(j/v)+1}: tokens ${j+1}-${Math.min(j+v,l.length)}`);const ye=Y.map(async(Me,X)=>{const Fe=j+X;let le=null;const J=g[Fe];if(J)try{let Te=J.startsWith("ipfs://")?J.replace("ipfs://","https://ipfs.io/ipfs/"):J;if(Te.startsWith("http")){const Ce=await(await fetch(Te)).json();le=Ce.image||Ce.image_url||Ce.properties&&Ce.properties.image||null,le&&le.startsWith("ipfs://")&&(le=le.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch(Te){console.warn(`Failed to fetch metadata for token ${Me}:`,Te)}const fe=Me.toString();return Q[fe]=M[Fe],{tokenId:fe,image:le}}),me=await Promise.all(ye);U.push(...me),console.log(`✅ Completed batch ${Math.floor(j/v)+1}, total processed: ${U.length}`)}console.log("✅ Final Collection NFT tokens:",U.length,U),k(U),B(Q),V(!1)}}catch(u){console.error("❌ Error fetching wallet NFTs:",u),k([]),V(!1)}await N(d,o,n)})()},[n,a,I]),c.useEffect(()=>{(async()=>{const o=`pool_data_${n}`,d=sessionStorage.getItem(o);if(d)try{const u=JSON.parse(d);if(Date.now()-u.timestamp<12e4){console.log("📦 Using cached pool data"),Se(u.contractInfo),ee(u.nftCollection),ae(u.poolNFTs),pe(!1);return}}catch(u){console.warn("Failed to parse cached pool data:",u)}const S=p||(window.ethereum?new se(window.ethereum):null);if(S){pe(!0);try{const u=new E(n,ge,S);let x=null;try{const m=await u.getContractInfo();x={nftCollection:m[0],receiptContract:m[1],stonerPool:m[2],swapFeeInWei:m[3],stonerShare:m[4],poolSize:Number(m[5]),stakedCount:Number(m[6])},Se(x),console.log("📊 Contract Info:",{poolSize:x.poolSize,stakedCount:x.stakedCount})}catch(m){console.warn("Failed to fetch contract info:",m),Se(null)}const T=await u.nftCollection();console.log("🏷️ SwapPool NFT Collection Address:",T),ee(T);const F=await u.getPoolTokens(),b=Array.from(F).map(m=>m.toString());console.log("🏊 Pool token IDs available for swap:",b);let l=[];if(T&&b.length>0){const m=new E(T,["function tokenURI(uint256) view returns (string)"],S);console.log(`🎨 Fetching metadata for ${b.length} pool NFTs from collection ${T}`);const C=[];for(const g of b){let $=null;try{let M=await m.tokenURI(g);if(M&&M.startsWith("ipfs://")&&(M=M.replace("ipfs://","https://ipfs.io/ipfs/")),M&&M.startsWith("http")){const v=await fetch(M);if(v.ok){const U=await v.json();$=U.image||U.image_url||U.properties&&U.properties.image||null,$&&$.startsWith("ipfs://")&&($=$.replace("ipfs://","https://ipfs.io/ipfs/"))}}}catch(M){console.warn("Failed to fetch pool NFT metadata for token",g,M)}C.push({tokenId:g.toString(),image:$})}l=C,console.log("✅ Pool NFTs fetched:",C.length,C)}else console.log("📭 No pool NFTs available or collection address missing");ae(l),pe(!1);try{const m={contractInfo:x,nftCollection:T,poolNFTs:l,timestamp:Date.now()};sessionStorage.setItem(o,JSON.stringify(m))}catch(m){console.warn("Failed to cache pool data:",m)}}catch(u){console.error("❌ Failed to fetch pool data:",u),ae([]),pe(!1)}}})()},[n,a]),c.useEffect(()=>{if(window.ethereum){const t=d=>{console.log("Wallet accounts changed:",d),k([]),ne([]),ae([]),K(d[0]||null)},o=d=>{console.log("Chain changed:",d),window.location.reload()};return window.ethereum.on("accountsChanged",t),window.ethereum.on("chainChanged",o),()=>{window.ethereum.removeListener("accountsChanged",t),window.ethereum.removeListener("chainChanged",o)}}},[]);const W=async()=>{if(i(""),_.length===0){i("Select at least one NFT to stake.");return}if(_.length>10){i("You can only stake up to 10 NFTs at once.");return}if(new Set(_).size!==_.length){i("Duplicate NFTs selected. Please select each NFT only once.");return}if(!z&&!_.every(o=>D[o])){i("All selected NFTs must be approved before staking.");return}f(!0);try{const o=await s(),d=new E(n,ge,o);console.log("Attempting to stake:",_.length,"NFTs"),console.log("Token IDs:",_),console.log("Contract has stakeNFTBatch:",typeof d.stakeNFTBatch=="function");let S;_.length>1?S=await d.stakeNFTBatch(_):S=await d.stakeNFT(_[0]),i("Staking..."),await S.wait(),i("Stake successful!"),ce([])}catch(o){i("Stake failed: "+(o.reason||o.message)),console.error("Detailed stake error:",o)}f(!1)},ue=async()=>{if(i(""),w.length===0){i("Select at least one NFT to unstake.");return}if(w.length>10){i("You can only unstake up to 10 NFTs at once.");return}f(!0);try{const t=await s(),o=new E(n,ge,t);let d;w.length>1&&o.unstakeNFTBatch?d=await o.unstakeNFTBatch(w):d=await o.unstakeNFT(w[0]),i("Unstaking..."),await d.wait(),i("Unstake successful!")}catch(t){i("Unstake failed: "+(t.reason||t.message))}f(!1)},re=async()=>{i(""),f(!0);try{const t=await s(),d=await new E(n,ge,t).claimRewards();i("Claiming rewards..."),await d.wait(),i("Rewards claimed!")}catch(t){i("Claim failed: "+(t.reason||t.message))}f(!1)},q=async()=>{if(y.length===0){i("Please select at least one NFT to swap");return}if(y.length>10){i("You can only swap up to 10 NFTs at once.");return}if(R.length<y.length){R.length===0?i("❌ Cannot swap: Pool is empty! You need to stake some NFTs first to create liquidity for swapping."):i(`❌ Insufficient liquidity: Only ${R.length} NFT${R.length!==1?"s":""} available in pool, but you selected ${y.length}. Stake more NFTs or reduce your selection.`);return}if(!A){i("NFT collection address not available");return}i(""),f(!0);try{const t=await s(),o=new E(n,ge,t),d=new E(A,["function approve(address,uint256)","function getApproved(uint256) view returns (address)","function ownerOf(uint256) view returns (address)","function setApprovalForAll(address,bool)","function isApprovedForAll(address,address) view returns (bool)"],t),S=await t.getAddress();i("Verifying ownership...");for(const b of y)try{if((await d.ownerOf(b)).toLowerCase()!==S.toLowerCase()){i(`❌ You do not own NFT #${b}`),f(!1);return}}catch{i(`❌ Error checking ownership of NFT #${b}`),f(!1);return}i("Checking approvals...");let u=!1;if(y.length>1)try{await d.isApprovedForAll(S,n)||(i("Requesting approval for all NFTs..."),await(await d.setApprovalForAll(n,!0)).wait(),i("✅ All NFTs approved"))}catch(b){if(b.code==="ACTION_REJECTED"){i("❌ User cancelled approval transaction"),f(!1);return}console.warn("setApprovalForAll failed, using individual approvals:",b),u=!0}else u=!0;if(u)for(const b of y)try{(await d.getApproved(b)).toLowerCase()!==n.toLowerCase()&&(i(`Requesting approval for NFT #${b}...`),await(await d.approve(n,b)).wait())}catch(l){if(l.code==="ACTION_REJECTED"){i("❌ User cancelled approval transaction"),f(!1);return}i(`❌ Failed to approve NFT #${b}: ${l.message}`),f(!1);return}const x=await o.swapFeeInWei(),T=x*BigInt(y.length);i(`Swapping ${y.length} NFT${y.length>1?"s":""}...`);let F;y.length>1&&o.swapNFTBatch?F=await o.swapNFTBatch(y,{value:T}):F=await o.swapNFT(y[0],{value:x}),await F.wait(),i(`✅ Successfully swapped ${y.length} NFT${y.length>1?"s":""}!`),fetchUserNFTs(),fetchPoolTokens(),H([])}catch(t){if(console.error("Swap error:",t),t.code==="ACTION_REJECTED")i("❌ User cancelled transaction");else if(t.data==="0xa17e11d5"||t.message.includes("InsufficientLiquidity"))i(`❌ Insufficient liquidity: Not enough NFTs in pool for ${y.length} swap${y.length>1?"s":""}`);else if(t.data==="0xa0712d68"||t.message.includes("SameTokenSwap"))i("❌ Cannot swap: One of your NFTs is already in the pool");else if(t.data==="0x82b42900"||t.message.includes("TokenNotApproved"))i("❌ NFT not approved for transfer");else if(t.data==="0x8baa579f"||t.message.includes("NotTokenOwner"))i("❌ You do not own one or more of the selected NFTs");else if(t.data==="0x025dbdd4"||t.message.includes("IncorrectFee"))i("❌ Incorrect swap fee sent");else if(t.data==="0xd05cb609"||t.message.includes("NotInitialized"))i("❌ Pool not initialized");else{const o=t.reason||t.message||"Unknown error";i("❌ Swap failed: "+o)}}f(!1)};return e.jsxs("div",{className:"mt-6 p-4 sm:p-6 bg-white/95 dark:bg-gray-800/95 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"font-bold text-lg text-blue-600 dark:text-blue-400 tracking-wide",children:"Pool Actions"}),e.jsxs("button",{onClick:P,className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center gap-1.5",title:"Refresh all NFTs",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]}),je&&e.jsx("div",{className:"mb-4 p-3 bg-gray-100 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-1",children:"🏊"}),e.jsx("div",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"Pool Size"}),e.jsx("div",{className:"text-lg font-bold",children:je.poolSize}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Available for swapping"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-1",children:"🔒"}),e.jsx("div",{className:"font-semibold text-green-600 dark:text-green-400",children:"Staked Count"}),e.jsx("div",{className:"text-lg font-bold",children:je.stakedCount}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Earning rewards"})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/10 to-green-600/10 rounded-xl border border-emerald-500/20 p-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-green-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl",children:"🏦"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-emerald-400 text-lg",children:"Stake NFTs"}),e.jsx("p",{className:"text-sm text-emerald-300/80",children:"Add your NFTs to the pool to enable swapping"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`text-xs px-3 py-2 rounded-full font-medium transition-colors ${_.length>8?"bg-amber-500/20 text-amber-300 border border-amber-500/30":_.length>0?"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30":"bg-gray-500/20 text-gray-400 border border-gray-500/30"}`,children:["📊 ",_.length,"/10 selected"]}),e.jsx("div",{className:"text-xs text-emerald-300/70 bg-emerald-900/30 px-3 py-2 rounded-full border border-emerald-700/30",children:"📦 Max 10 per batch"})]})]}),be?e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:e.jsx(Ue,{count:8,size:64})}):O.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-gray-500/20 rounded-lg flex items-center justify-center mb-3",children:e.jsx("span",{className:"text-gray-400 text-2xl",children:"🔍"})}),e.jsx("div",{className:"text-gray-400 font-medium",children:"No NFTs found in wallet"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Make sure you own NFTs from this collection"})]}):e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:O.map(t=>e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsxs("button",{className:`relative border-2 rounded-xl p-2 bg-gradient-to-br transition-all duration-200 group ${_.includes(t.tokenId)?"border-emerald-400 scale-105 shadow-lg shadow-emerald-500/25 from-emerald-900/30 to-emerald-800/30":"border-gray-600 hover:border-emerald-400 hover:scale-102 from-gray-900/20 to-gray-800/20"}`,onClick:()=>ce(o=>o.includes(t.tokenId)?o.filter(d=>d!==t.tokenId):o.length<10?[...o,t.tokenId]:o),disabled:h,children:[e.jsx(ve,{image:t.image,tokenId:t.tokenId,size:64}),e.jsxs("div",{className:"text-xs text-center font-mono mt-1 text-gray-300",children:["#",t.tokenId]}),_.includes(t.tokenId)&&e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-emerald-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),n&&!z&&e.jsx(it,{nftAddress:A,tokenId:t.tokenId,spender:n,provider:p,disabled:h||D[t.tokenId],onApproved:()=>B(o=>({...o,[t.tokenId]:!0}))})]},t.tokenId))}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 pt-4 border-t border-emerald-500/20",children:[e.jsx("button",{className:"w-full sm:w-auto px-6 py-3 bg-gradient-to-r from-emerald-500 to-green-600 text-white rounded-lg shadow-lg font-semibold tracking-wide disabled:opacity-50 hover:from-emerald-600 hover:to-green-700 transition-all duration-200 flex items-center justify-center gap-2",onClick:W,disabled:h||_.length===0||!_.every(t=>D[t]||z),children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Staking..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"🏦"}),"Stake Selected (",_.length,")"]})}),n&&!z&&e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow font-medium disabled:opacity-50 hover:bg-blue-700 transition-colors flex items-center gap-2",disabled:te||h,onClick:async()=>{ie(!0);try{if(!window.ethereum)throw new Error("Wallet not found");const t=await new se(window.ethereum).getSigner();await(await new E(A,["function setApprovalForAll(address,bool) external"],t).setApprovalForAll(n,!0)).wait(),G(!0),B(S=>{const u={...S};return O.forEach(x=>{u[x.tokenId]=!0}),u})}catch(t){alert(t.reason||t.message)}ie(!1)},children:te?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Approving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"✅"}),"Approve All"]})}),z&&e.jsxs("div",{className:"flex items-center gap-2 text-emerald-400 font-medium text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"All Approved"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"font-semibold text-red-400",children:"Unstake NFT(s)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`text-xs px-2 py-1 rounded ${w.length>8?"bg-yellow-900/30 text-yellow-300":w.length>0?"bg-red-900/30 text-red-300":"bg-gray-800/30 text-gray-400"}`,children:["📊 ",w.length,"/10 selected"]}),e.jsx("div",{className:"text-xs text-red-300 bg-red-900/30 px-2 py-1 rounded",children:"📦 Max 10 NFTs per batch"})]})]}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[Z.length===0&&e.jsx("div",{className:"text-muted italic",children:"No receipt tokens"}),Z.map(t=>e.jsxs("button",{className:`border-2 rounded-xl p-1 bg-gradient-to-br from-red-900/20 to-card shadow-sm transition-all ${w.includes(t.tokenId)?"border-red-400 scale-105":"border-gray-700 hover:border-red-400"} text-text`,onClick:()=>L(o=>o.includes(t.tokenId)?o.filter(d=>d!==t.tokenId):[...o,t.tokenId]),disabled:h,children:[e.jsx(ve,{image:t.image,tokenId:t.tokenId,size:56}),e.jsxs("div",{className:"text-xs text-center text-text font-mono",children:["#",t.tokenId]})]},t.tokenId))]}),e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-red-500 to-pink-400 text-white rounded-lg shadow mt-3 font-semibold tracking-wide disabled:opacity-50",onClick:ue,disabled:h||w.length===0,children:"Unstake Selected"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500/10 to-yellow-600/10 rounded-xl border border-amber-500/20 p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-yellow-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl",children:"💰"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-400 text-lg",children:"Claimable Rewards"}),e.jsx("p",{className:"text-sm text-amber-300/80",children:"Earn from swap fees when others use the pool"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-amber-300/60 uppercase tracking-wider font-medium",children:"Available Now"}),e.jsx("div",{className:"text-sm font-mono text-amber-200",children:"Ready to claim"})]})]}),e.jsx("div",{className:"bg-black/20 rounded-lg p-4 border border-amber-600/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-500/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-amber-400 text-sm",children:"⚡"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-amber-200",children:"Swap Fee Rewards"}),e.jsx("div",{className:"text-xs text-amber-300/70",children:"From your staked NFTs in this pool"})]})]}),e.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-amber-500 to-yellow-600 text-white rounded-lg shadow-lg font-semibold tracking-wide disabled:opacity-50 hover:from-amber-600 hover:to-yellow-700 transition-all duration-200 flex items-center gap-2",onClick:re,disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Claiming..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"💎"}),"Claim Rewards"]})})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-xs text-amber-300/60",children:["💡 ",e.jsx("strong",{children:"Tip:"})," More staked NFTs = higher share of swap fees"]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2 text-purple-400",children:"Pool NFTs Available for Swap"}),e.jsx("div",{className:"flex gap-3 flex-wrap",children:Ne?e.jsx(Ue,{count:6,size:56}):R.length===0?e.jsxs("div",{className:"w-full p-4 bg-secondary/50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"🏊‍♂️"}),e.jsx("div",{className:"text-muted dark:text-muted mb-1",children:"No NFTs in pool"}),e.jsx("div",{className:"text-sm text-muted dark:text-muted",children:"This collection pool is empty. Stake collection NFTs to add them to the pool for swapping!"})]}):R.map(t=>e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"border-2 border-purple-600/50 rounded-xl p-1 bg-gradient-to-br from-purple-900/20 to-card shadow-sm",children:[e.jsx(ve,{image:t.image,tokenId:t.tokenId,size:56}),e.jsxs("div",{className:"text-xs text-center text-text font-mono",children:["#",t.tokenId]}),e.jsx("div",{className:"text-xs text-center text-purple-400 font-semibold",children:"AVAILABLE"})]})},t.tokenId))})]}),e.jsxs("div",{children:[R.length===0&&e.jsx("div",{className:"mb-4 p-3 bg-blue-900/20 border border-blue-500/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"text-blue-400 text-lg",children:"ℹ️"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-blue-400 mb-1",children:"How to Enable Swapping:"}),e.jsxs("div",{className:"text-sm text-blue-300",children:["1. ",e.jsx("strong",{children:"Stake"})," your NFTs first (above) to add them to the pool",e.jsx("br",{}),"2. Other users can then ",e.jsx("strong",{children:"swap"})," their NFTs with yours",e.jsx("br",{}),"3. You receive a receipt token that you can later unstake"]})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-indigo-500 to-blue-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 1H4m0 0l4 4M4 12l4-4"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold bg-gradient-to-r from-indigo-400 to-blue-400 bg-clip-text text-transparent",children:"Swap Your NFTs"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Exchange your NFTs with those in the pool"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`text-xs px-3 py-1.5 rounded-full font-medium ${y.length>8?"bg-yellow-900/30 text-yellow-300 border border-yellow-700":y.length>0?"bg-indigo-900/30 text-indigo-300 border border-indigo-700":"bg-gray-800/30 text-gray-400 border border-gray-700"}`,children:["📊 ",y.length,"/10 selected"]}),e.jsx("div",{className:"text-xs text-indigo-300 bg-indigo-900/30 px-3 py-1.5 rounded-full border border-indigo-700 font-medium",children:"📦 Max 10 NFTs per batch"})]})]}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[O.length===0&&e.jsx("div",{className:"text-muted italic",children:"No NFTs in wallet"}),O.map(t=>e.jsxs("button",{className:`border-2 rounded-xl p-1 bg-gradient-to-br from-indigo-900/20 to-card shadow-sm transition-all ${y.includes(t.tokenId)?"border-indigo-400 scale-105 ring-2 ring-indigo-400/50":"border-gray-700 hover:border-indigo-400"} text-text ${y.length>=10&&!y.includes(t.tokenId)?"opacity-50 cursor-not-allowed":""}`,onClick:()=>{y.includes(t.tokenId)?H(o=>o.filter(d=>d!==t.tokenId)):y.length<10&&H(o=>[...o,t.tokenId])},disabled:h||y.length>=10&&!y.includes(t.tokenId),children:[e.jsx(ve,{image:t.image,tokenId:t.tokenId,size:56}),e.jsxs("div",{className:"text-xs text-center text-text font-mono",children:["#",t.tokenId]}),y.includes(t.tokenId)&&e.jsx("div",{className:"text-xs text-center text-indigo-400 font-semibold",children:"✓ SELECTED"})]},t.tokenId))]}),e.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.jsxs("button",{className:`px-4 py-2 text-white rounded-lg shadow font-semibold tracking-wide disabled:opacity-50 flex items-center gap-2 ${R.length===0?"bg-gradient-to-r from-gray-500 to-gray-600 cursor-not-allowed":"bg-gradient-to-r from-indigo-500 to-blue-500"}`,onClick:q,disabled:h||y.length===0||R.length===0,title:R.length===0?"Pool is empty - stake NFTs first to enable swapping":"",children:[h&&e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),R.length===0?"⚠️ Pool Empty - Stake NFTs First":h?"Swapping...":`Swap Selected (${y.length})`]}),y.length>0&&e.jsx("button",{className:"px-3 py-2 bg-gray-600 text-white rounded shadow text-sm hover:bg-gray-500 transition",onClick:()=>H([]),disabled:h,children:"Clear Selection"})]})]}),r&&e.jsx("div",{className:`mt-4 p-4 rounded-xl border transition-all duration-300 ${r.includes("successful")||r.includes("claimed")||r.includes("Stake successful")||r.includes("Unstake successful")||r.includes("Rewards claimed")?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200":r.includes("failed")||r.includes("error")||r.includes("❌")||r.includes("Cannot")?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200":r.includes("Staking...")||r.includes("Unstaking...")||r.includes("Claiming")||r.includes("Swapping")?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200":"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.includes("successful")||r.includes("claimed")||r.includes("Stake successful")||r.includes("Unstake successful")||r.includes("Rewards claimed")?e.jsx("div",{className:"w-5 h-5 bg-emerald-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}):r.includes("failed")||r.includes("error")||r.includes("❌")||r.includes("Cannot")?e.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}):r.includes("Staking...")||r.includes("Unstaking...")||r.includes("Claiming")||r.includes("Swapping")?e.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):e.jsx("div",{className:"w-5 h-5 bg-amber-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm leading-5",children:r}),(r.includes("Staking...")||r.includes("Unstaking...")||r.includes("Claiming")||r.includes("Swapping"))&&e.jsx("div",{className:"text-xs opacity-75 mt-1",children:"This may take a few moments to complete..."})]})]})})]})]})]})}const ot={"0xB6748d708B5Cda0eA8c53e7072566971FCCb6b49":"https://nftstorage.link/stoner.png","0xE3941DB58B9D35410A66636da07c9B28b878B89E":"https://nftstorage.link/boat.png"};function lt(n){if(!n)return"from-gray-400 to-gray-600";const a=n.split("").reduce((r,i)=>i.charCodeAt(0)+((r<<5)-r),0),p=["from-blue-400 to-purple-600","from-purple-400 to-pink-600","from-pink-400 to-red-600","from-red-400 to-orange-600","from-orange-400 to-yellow-600","from-yellow-400 to-green-600","from-green-400 to-teal-600","from-teal-400 to-blue-600","from-indigo-400 to-purple-600","from-violet-400 to-pink-600","from-cyan-400 to-blue-600","from-emerald-400 to-teal-600"];return p[Math.abs(a)%p.length]}function dt(n){if(!n||n==="Unknown Collection"||n==="Loading...")return"?";const a=n.trim().split(/\s+/);return a.length===1?a[0].substring(0,2).toUpperCase():a.slice(0,2).map(p=>p.charAt(0).toUpperCase()).join("")}function ze({address:n,collectionName:a,size:p=48}){const[r,i]=ke.useState(!1),[h,f]=ke.useState(!0),O=ot[n==null?void 0:n.toLowerCase()];if(!O||r){const k=dt(a),D=lt(a||n),B=p<=32?"text-xs":p<=48?"text-sm":"text-base";return e.jsx("div",{style:{width:p,height:p},className:`bg-gradient-to-br ${D} rounded-lg flex items-center justify-center text-white font-bold ${B} shadow-lg`,children:k})}return e.jsxs("div",{className:"relative",children:[h&&e.jsx("div",{style:{width:p,height:p},className:"absolute inset-0 bg-gray-300 rounded animate-pulse"}),e.jsx("img",{src:O,alt:"NFT Collection",style:{width:p,height:p,borderRadius:8},onError:()=>i(!0),onLoad:()=>f(!1),className:h?"opacity-0":"opacity-100"})]})}function pt({pool:n,collectionName:a,onClose:p,provider:r}){return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-4xl max-h-[90vh] overflow-y-auto p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"sticky top-0 bg-white dark:bg-gray-800 pb-4 mb-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:"Pool Details"}),e.jsx("button",{className:"text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 px-3 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition flex-shrink-0",onClick:p,children:"✕ Close"})]})}),"        ",e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 mb-4",children:[e.jsx(ze,{address:n.nftCollection,collectionName:a,size:64}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"font-semibold text-base sm:text-lg text-blue-600 dark:text-blue-400 mb-1",children:["Collection: ",e.jsxs("span",{className:"font-mono text-gray-600 dark:text-gray-400",children:[n.nftCollection.slice(0,6),"...",n.nftCollection.slice(-4)]})]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["SwapPool: ",e.jsxs("span",{className:"font-mono",children:[n.swapPool.slice(0,6),"...",n.swapPool.slice(-4)]})]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Receipt: ",e.jsxs("span",{className:"font-mono",children:[n.stakeReceipt.slice(0,6),"...",n.stakeReceipt.slice(-4)]})]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Creator: ",n.creator]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Created: ",n.createdAt]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Active: ",n.active?"Yes":"No"]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-2",children:[e.jsx("a",{className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded shadow transition",href:`https://explorer.sonic.org/address/${n.swapPool}`,target:"_blank",rel:"noreferrer",children:"Explorer"}),e.jsx("button",{className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 rounded transition",onClick:()=>navigator.clipboard.writeText(n.swapPool),children:"Copy Address"})]}),e.jsx(rt,{swapPool:n.swapPool,stakeReceipt:n.stakeReceipt,provider:r})]})})}async function ut(n,a){try{return await new E(n,["function name() view returns (string)"],a).name()}catch{return"Unknown Collection"}}function ct(){const[n,a]=c.useState(null),[p,r]=c.useState(null),[i,h]=c.useState(null),[f,O]=c.useState([]),[k,D]=c.useState({}),[B,A]=c.useState(!1),[ee,z]=c.useState(null),[G,te]=c.useState(""),[ie,xe]=c.useState(!0),[oe,Z]=c.useState(""),ne="0x1Db92C2F11b7716f3fa6E94969a8649a32adB1De",[R,ae]=c.useState(ne);c.useEffect(()=>{(async()=>{xe(!0);try{if(window.ethereum){const L=new se(window.ethereum);a(L),te(""),console.log("Provider set: window.ethereum");try{const y=await window.ethereum.request({method:"eth_chainId"}),H=parseInt(y,16);H!==146&&console.warn("Connected chainId",H,"expected 146 (Sonic)")}catch(y){console.warn("Could not read chainId from injected provider",y)}}else{const L=["https://sonic-mainnet.alt.technology","https://rpc.soniclabs.com","https://sonic.drpc.org","https://sonic-mainnet.alt.technology"].filter(Boolean);let y=null;for(const H of L)try{const I=new Ze(H);await I.getBlockNumber(),y=I,console.log("Provider set: "+H);break}catch(I){console.warn("RPC failed",H,I)}y?(a(y),te("")):te("No Sonic RPC endpoint available. Please check your connection or try again later.")}}catch(L){te("Provider init failed: "+(L.message||L.toString())),console.warn("Provider init failed",L)}xe(!1)})()},[]);const _=async()=>{if(!window.ethereum){Z("Please install MetaMask or another wallet");return}Z("");try{await window.ethereum.request({method:"eth_requestAccounts"});const w=new se(window.ethereum),L=await w.getSigner(),y=await L.getAddress();a(w),r(L),h(y)}catch(w){Z("Failed to connect wallet: "+(w.message||w.toString())),console.error(w)}},ce=async()=>{if(!R){Z("Factory address not set. Provide VITE_FACTORY_ADDRESS or public/contracts.json");return}if(!n){console.warn("fetchPools called without provider");return}A(!0),Z("");try{try{const I=await n.getNetwork();if(I&&I.chainId&&Number(I.chainId)!==146){A(!1),Z(`Connected to chain ${I.chainId}. Please switch your wallet/RPC to Sonic (chainId 146) and retry.`);return}const K=await n.send("eth_getCode",[R,"latest"]);if(!K||K==="0x"||K==="0x0"){A(!1),Z(`No contract deployed at ${R} on the current network. Make sure the address is correct and you're connected to Sonic (chainId 146).`);return}}catch(I){console.warn("Network/code check failed",I)}const w=new E(R,at,n);let L=[];try{L=await w.getAllPools(),L=L.filter(I=>I.active)}catch(I){console.error("Failed to get pools from factory:",I),L=[]}console.log("All active pools from contract:",L);const y=L.map(I=>({nftCollection:I.nftCollection,swapPool:I.swapPool,stakeReceipt:I.stakeReceipt,createdAt:new Date(Number(I.createdAt)*1e3).toLocaleString(),creator:I.creator,active:I.active,poolAddress:I.swapPool}));console.log("All pools (no deduplication applied):",y),O(y);const H={};for(const I of y)H[I.nftCollection]=await ut(I.nftCollection,n);D(H)}catch(w){console.error("Failed to fetch pools",w),w.code==="BAD_DATA"?Z("Failed to decode on-chain result. This often means the contract ABI does not match or you are connected to the wrong RPC/network."):Z("Failed to fetch pools: "+(w.message||String(w)))}A(!1)};return c.useEffect(()=>{n&&R&&ce()},[n,R]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 p-4 bg-card/50 rounded-xl border border-accent/10",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${i?"bg-green-400":n?"bg-yellow-400":"bg-red-400"}`}),e.jsx("span",{className:"text-sm font-medium",children:i?`Connected: ${i.slice(0,6)}...${i.slice(-4)}`:n?"Provider Ready":"Not Connected"})]})}),e.jsx("button",{className:"px-4 py-2 bg-accent text-white rounded-lg shadow hover:bg-accent/80 transition-colors font-medium",onClick:_,children:i?"Connected":"Connect Wallet"})]}),oe&&e.jsxs("div",{className:"p-4 bg-red-900/20 border border-red-500/20 text-red-400 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{children:"⚠️"}),e.jsx("span",{className:"font-semibold",children:"Error"})]}),e.jsx("p",{className:"text-sm",children:oe})]}),ie&&e.jsxs("div",{className:"p-6 bg-card/30 rounded-xl text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-accent border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"font-semibold",children:"Connecting to Sonic Network..."})]}),e.jsx("p",{className:"text-sm text-muted",children:"Please wait while we establish connection"})]}),!ie&&G&&e.jsxs("div",{className:"p-4 bg-red-900/20 border border-red-500/20 text-red-400 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{children:"🔌"}),e.jsx("span",{className:"font-semibold",children:"Connection Error"})]}),e.jsx("p",{className:"text-sm",children:G})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-xl font-bold text-accent",children:"Swap Pools"}),e.jsxs("div",{className:"px-3 py-1 bg-accent/10 text-accent rounded-full text-sm font-medium",children:[f.length," active"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-xs text-muted",children:["Factory: ",e.jsxs("span",{className:"font-mono text-accent",children:[R==null?void 0:R.slice(0,6),"...",(R==null?void 0:R.slice(-4))||"Not set"]})]}),e.jsxs("button",{onClick:ce,disabled:B,className:"px-4 py-2 bg-accent text-white rounded-lg shadow hover:bg-accent/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-medium",children:[B&&e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),B?"Loading...":"Refresh Pools"]})]})]}),B&&f.length===0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(w=>e.jsx("div",{className:"p-4 sm:p-5 bg-card rounded-2xl shadow-lg animate-pulse",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-gray-600 rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-600 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-600 rounded w-1/2"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-600 rounded w-2/3"}),e.jsx("div",{className:"h-3 bg-gray-600 rounded w-1/2"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-6 bg-gray-600 rounded w-16"}),e.jsx("div",{className:"h-6 bg-gray-600 rounded w-20"})]})]})},w))}):f.length===0?e.jsxs("div",{className:"p-8 bg-white/90 dark:bg-gray-800/90 rounded-2xl text-center border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🏊‍♂️"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Swap Pools Found"}),e.jsx("p",{className:"text-muted mb-4",children:R?"No pools are currently registered with this factory.":"Please set a factory address first."}),R&&e.jsx("button",{onClick:ce,className:"px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/80 transition-colors",children:"Refresh Pools"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map((w,L)=>e.jsxs("div",{className:"group p-4 sm:p-5 bg-white/95 dark:bg-gray-800/95 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-200 dark:border-gray-700 hover:border-blue-400/50 cursor-pointer",onClick:()=>z(w),children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx(ze,{address:w.nftCollection,collectionName:k[w.nftCollection],size:56}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-lg text-blue-600 dark:text-blue-400 mb-1 truncate",children:k[w.nftCollection]||"Loading..."}),e.jsxs("p",{className:"text-xs text-muted font-mono truncate",children:[w.nftCollection.slice(0,8),"...",w.nftCollection.slice(-6)]})]})]}),e.jsxs("div",{className:"space-y-2 text-xs text-muted mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pool:"}),e.jsxs("span",{className:"font-mono",children:[w.swapPool.slice(0,8),"...",w.swapPool.slice(-6)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Receipt:"}),e.jsxs("span",{className:"font-mono",children:[w.stakeReceipt.slice(0,8),"...",w.stakeReceipt.slice(-6)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Created:"}),e.jsx("span",{children:new Date(Number(w.createdAt)).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-colors text-sm font-medium shadow-sm",onClick:y=>{y.stopPropagation(),z(w)},children:"View Details"}),e.jsx("button",{className:"px-3 py-2 bg-secondary/50 hover:bg-secondary text-text rounded-lg transition-colors text-xs",onClick:y=>{y.stopPropagation(),navigator.clipboard.writeText(w.swapPool)},title:"Copy pool address",children:"📋"})]})]},`${w.swapPool}-${L}`))})]}),ee&&e.jsx(pt,{pool:ee,collectionName:k[ee.nftCollection],onClose:()=>z(null),provider:n})]})}const yt="modulepreload",mt=function(n){return"/"+n},Be={},ft=function(a,p,r){let i=Promise.resolve();if(p&&p.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),O=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));i=Promise.allSettled(p.map(k=>{if(k=mt(k),k in Be)return;Be[k]=!0;const D=k.endsWith(".css"),B=D?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${k}"]${B}`))return;const A=document.createElement("link");if(A.rel=D?"stylesheet":yt,D||(A.as="script"),A.crossOrigin="",A.href=k,O&&A.setAttribute("nonce",O),document.head.appendChild(A),D)return new Promise((ee,z)=>{A.addEventListener("load",ee),A.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${k}`)))})}))}function h(f){const O=new Event("vite:preloadError",{cancelable:!0});if(O.payload=f,window.dispatchEvent(O),!O.defaultPrevented)throw f}return i.then(f=>{for(const O of f||[])O.status==="rejected"&&h(O.reason);return a().catch(h)})},he=[{inputs:[{internalType:"address",name:"_stonerNFT",type:"address"},{internalType:"address",name:"_receiptToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AlreadyStaked",type:"error"},{inputs:[],name:"DuplicateTokenId",type:"error"},{inputs:[],name:"EmptyArray",type:"error"},{inputs:[],name:"NoERC20Rewards",type:"error"},{inputs:[],name:"NoRewards",type:"error"},{inputs:[],name:"NoStakers",type:"error"},{inputs:[],name:"NotStaked",type:"error"},{inputs:[],name:"NotYourToken",type:"error"},{inputs:[],name:"TokenAlreadyWhitelisted",type:"error"},{inputs:[],name:"TokenNotWhitelisted",type:"error"},{inputs:[],name:"TooManyTokens",type:"error"},{inputs:[],name:"TransferFailed",type:"error"},{inputs:[],name:"ZeroAddress",type:"error"},{inputs:[],name:"ZeroETH",type:"error"},{inputs:[],name:"ZeroTokenAmount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ERC20RewardClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ERC20RewardReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"EmergencyERC20Withdrawal",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"EmergencyETHWithdrawal",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"EmergencyUnstake",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"}],name:"TokenRemovedFromWhitelist",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"}],name:"TokenWhitelisted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Unstaked",type:"event"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"addWhitelistedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"address",name:"token",type:"address"}],name:"calculatePendingERC20Rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"calculatePendingRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimAllERC20Rewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimAllRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"claimERC20Rewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimRewardsOnly",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"address",name:"token",type:"address"}],name:"earnedERC20",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"to",type:"address"}],name:"emergencyUnstake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"emergencyUnstakeWithClaim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"emergencyWithdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"emergencyWithdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"erc20RewardCarry",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"erc20RewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"erc20Rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"erc20TotalRewardsClaimed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"erc20UserRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"exit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getAllPendingERC20Rewards",outputs:[{internalType:"address[]",name:"tokens",type:"address[]"},{internalType:"uint256[]",name:"rewardAmounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"getERC20PoolInfo",outputs:[{internalType:"address",name:"tokenAddress",type:"address"},{internalType:"uint256",name:"totalClaimedAmount",type:"uint256"},{internalType:"uint256",name:"contractBalance",type:"uint256"},{internalType:"bool",name:"isWhitelisted",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPoolInfo",outputs:[{internalType:"address",name:"nftAddress",type:"address"},{internalType:"uint256",name:"totalStakedTokens",type:"uint256"},{internalType:"uint256",name:"totalRewards",type:"uint256"},{internalType:"uint256",name:"contractBalance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getStakeInfo",outputs:[{internalType:"address",name:"staker",type:"address"},{internalType:"uint256",name:"stakedAt",type:"uint256"},{internalType:"uint256",name:"stakingDuration",type:"uint256"},{internalType:"bool",name:"active",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getStakedTokens",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getWhitelistedTokens",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"isStaked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"notifyERC20Reward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"notifyNativeReward",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"pure",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptIdByOriginal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"receiptToken",outputs:[{internalType:"contract IStakeReceipt",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"registerMe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"removeWhitelistedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardCarry",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"stakeMultiple",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"stakedTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"stakerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stonerNFT",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalRewardsClaimed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalStaked",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"unstake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"unstakeMultiple",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whitelistedTokens",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"whitelistedTokensList",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],Le=[{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"_startTime",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AlreadyExists",type:"error"},{inputs:[],name:"InvalidOwner",type:"error"},{inputs:[],name:"InvalidRecipient",type:"error"},{inputs:[],name:"InvalidSender",type:"error"},{inputs:[],name:"NotFound",type:"error"},{inputs:[],name:"Unauthorized",type:"error"},{inputs:[],name:"UnsafeRecipient",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ERC20Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"ERC721Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"activePhase",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amountOrId",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"availableIds",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseTokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"phase",type:"uint256"},{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"}],name:"canMintAmountInPhase",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"}],name:"contractNFTBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"}],name:"contractTokenBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"enoughTokenBalance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"phase",type:"uint256"},{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256",name:"quantity",type:"uint256"}],name:"grantPhaseAccess",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"phase",type:"uint256"},{internalType:"address",name:"account",type:"address"}],name:"hasPhaseAccess",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxMintPerTx",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxMintable",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"quantity",type:"uint256"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"mintActive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"mintHasStarted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"minted",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"}],name:"ownerMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"owner",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"phaseDuration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"phaseMintsRemaining",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"phases",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"revokeOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"royaltyAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"royaltyReceiver",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"secondsUntilStart",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_baseURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxMintPerTx",type:"uint256"}],name:"setMaxPerTx",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"mintActive_",type:"bool"}],name:"setMintActive",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_paused",type:"bool"}],name:"setPaused",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_price",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_royaltyAmount",type:"uint256"}],name:"setRoyaltyAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_receiver",type:"address"}],name:"setRoyaltyReceiver",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_startTime",type:"uint256"}],name:"setStartTime",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"target",type:"address"},{internalType:"bool",name:"state",type:"bool"}],name:"setWhitelist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"startTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalAvailableIds",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"totalNFTsOwned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalNativeSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whitelist",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],gt="0xB6748d708B5Cda0eA8c53e7072566971FCCb6b49",ht="0x5777fc6ca7f6BDc02dF3323A0C05970bB9D05b74",qe={stonerStakeReceipt:gt,stonerFeePool:ht},de=qe.stonerFeePool,xt=qe.stonerStakeReceipt,Re="0x9b567e03d891F537b2B7874aA4A3308Cfe2F4FBb";function bt(){console.log("🎯 StonerFeePoolActions component loaded!");const[n,a]=c.useState(""),[p,r]=c.useState(!1),[i,h]=c.useState([]),[f,O]=c.useState([]),[k,D]=c.useState([]),[B,A]=c.useState([]),[ee,z]=c.useState(!1),[G,te]=c.useState(!1),[ie,xe]=c.useState(""),[oe,Z]=c.useState(!1),[ne,R]=c.useState("0"),[ae,_]=c.useState([]),[ce,w]=c.useState([]),[L,y]=c.useState(!1),H=async()=>{if(!window.ethereum)return!1;try{const s=await window.ethereum.request({method:"eth_accounts"});if(s.length>0)return xe(s[0]),te(!0),!0}catch(s){console.warn("Failed to check wallet connection:",s.message)}return!1},I=async()=>{if(!window.ethereum)return a("Please install MetaMask or another wallet"),!1;Z(!0),a("");try{const s=await window.ethereum.request({method:"eth_requestAccounts"});if(s.length>0)return xe(s[0]),te(!0),a("Wallet connected successfully!"),!0}catch(s){s.code===4001?a("Wallet connection rejected by user"):a("Failed to connect wallet: "+s.message),console.warn("Wallet connection failed:",s.message)}finally{Z(!1)}return!1},K=async()=>{if(!window.ethereum)throw new Error("Wallet not found");return new se(window.ethereum).getSigner()},be=async()=>{if(console.log("🎯 fetchNFTs called in StonerFeePoolActions"),!window.ethereum||!G){console.log("❌ Wallet not connected, skipping NFT fetch");return}try{const s=new se(window.ethereum),N=await(await s.getSigner()).getAddress(),W=new E(Re,Le,s),ue=new E(de,he,s),re=await W.isApprovedForAll(N,de);z(re);const q=await W.totalNFTsOwned(N);console.log("🔢 Stoner NFT balance:",q.toString());const t=Number(q),o=1e3;if(t>o){console.log(`⚠️ Balance seems unusually large (${t}), limiting to ${o}`),h([]),O([]),a(`Warning: NFT balance appears corrupted (${t}). Please check the contract.`);return}const d=[];let S=!1;try{await W.tokenOfOwnerByIndex(N,0),S=!0,console.log("✅ Using tokenOfOwnerByIndex approach");for(let u=0;u<Math.min(Number(q),50);u++)try{const x=await W.tokenOfOwnerByIndex(N,u);console.log(`📝 Found wallet token ${u+1}/${q}: #${x.toString()}`);let T=null;try{let F=await W.tokenURI(x);if(F.startsWith("ipfs://")&&(F=F.replace("ipfs://","https://ipfs.io/ipfs/")),F.startsWith("http")){const l=await(await fetch(F)).json();T=l.image||l.image_url,T&&T.startsWith("ipfs://")&&(T=T.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for token",x.toString())}d.push({tokenId:x.toString(),image:T})}catch(x){console.warn(`Failed to get token at index ${u}:`,x.message);continue}}catch{console.log("❌ tokenOfOwnerByIndex not supported (ERC404 contract), trying event-based approach"),S=!1;try{console.log("🔍 Using direct ownership verification for ERC404 contract...");const x=new Set,T=Math.max(1e4,Number(q)*50),F=20;let b=0;for(let g=1;g<=T&&b<Number(q);g+=F){const $=Math.min(g+F-1,T),M=[];for(let v=g;v<=$;v++)M.push(W.ownerOf(v).then(U=>({tokenId:v,owner:U.toLowerCase()})).catch(()=>({tokenId:v,owner:null})));try{const v=await Promise.all(M);for(const{tokenId:U,owner:Q}of v)if(Q===N.toLowerCase()&&(x.add(U.toString()),b++,console.log(`✅ Found owned token via direct check: #${U} (${b}/${q})`),b>=Number(q)))break}catch(v){console.warn(`Batch ${g}-${$} failed:`,v.message)}if(b>=Number(q))break;await new Promise(v=>setTimeout(v,10))}console.log(`🎯 Direct check found ${b} total tokens`);const l=Array.from(x).slice(0,50);console.log(`📋 Validating ${l.length} tokens and fetching metadata...`);const m=5;let C=0;for(let g=0;g<l.length;g+=m){const M=l.slice(g,g+m).map(async v=>{try{if((await W.ownerOf(v)).toLowerCase()!==N.toLowerCase())return null;let Q=null;try{let j=await W.tokenURI(v);if(j.startsWith("ipfs://")&&(j=j.replace("ipfs://","https://ipfs.io/ipfs/")),j.startsWith("http")){const ye=await(await fetch(j)).json();Q=ye.image||ye.image_url,Q&&Q.startsWith("ipfs://")&&(Q=Q.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for token",v)}return{tokenId:v.toString(),image:Q}}catch(U){return console.warn(`Token ${v} validation failed:`,U.message),null}});try{const v=await Promise.all(M);for(const U of v)U&&(d.push(U),C++,console.log(`✅ Validated token #${U.tokenId} (${C}/${l.length})`))}catch(v){console.warn(`Metadata batch ${g} failed:`,v.message)}g+m<l.length&&await new Promise(v=>setTimeout(v,50))}C>0&&(S=!0,console.log(`🎉 Successfully loaded ${C} Stoner NFTs via direct ownership check`))}catch(x){console.warn("Direct ownership check failed:",x.message)}}if(!S||d.length<Number(q)){console.log("🔍 Trying multicall brute force token discovery...");try{const{Multicall:u}=await ft(async()=>{const{Multicall:g}=await import("./index-Blt0uD8X.js");return{Multicall:g}},__vite__mapDeps([0,1])),x=new u({ethersProvider:s,tryAggregate:!0}),T=1e3,F=[];for(let g=0;g<=T;g++)F.push({reference:`ownerOf_${g}`,contractAddress:Re,abi:Le,calls:[{methodName:"ownerOf",methodParameters:[g]}]});const b=await x.call(F),m=Object.entries(b.results).filter(([g,$])=>$.callsReturnContext&&$.callsReturnContext[0].returnValues&&$.callsReturnContext[0].returnValues[0]&&$.callsReturnContext[0].returnValues[0].toLowerCase()===N.toLowerCase()).map(([g])=>parseInt(g.replace("ownerOf_",""))).map(async g=>{if(d.some(v=>v.tokenId===g.toString()))return null;let M=null;try{let v=await W.tokenURI(g);if(v.startsWith("ipfs://")&&(v=v.replace("ipfs://","https://ipfs.io/ipfs/")),v.startsWith("http")){const Q=await(await fetch(v)).json();M=Q.image||Q.image_url,M&&M.startsWith("ipfs://")&&(M=M.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for token",g.toString())}return{tokenId:g.toString(),image:M}});(await Promise.all(m)).forEach(g=>{g&&d.push(g)})}catch(u){console.warn("Multicall failed (network may not support it):",u.message),console.log("📋 Continuing with enumerable results only")}}console.log(`✅ Loaded ${d.length}/${q} wallet Stoner NFTs`),h(d);try{console.log("🔥 Fetching staked NFTs from StakeReceipt contract...");const u=new E(xt,st,s);let x=[];try{const[T,F]=await u.getUserReceipts(N);console.log("🔥 Raw receipts and original tokens from getUserReceipts:",T,F);const b=Array.from(T).map(m=>m.toString()),l=Array.from(F).map(m=>m.toString());console.log("🔥 Staked Stoner NFT token IDs from receipts:",l);for(let m=0;m<l.length;m++){const C=l[m],g=b[m];let $=null;try{let M=await W.tokenURI(C);if(M.startsWith("ipfs://")&&(M=M.replace("ipfs://","https://ipfs.io/ipfs/")),M.startsWith("http")){const U=await(await fetch(M)).json();$=U.image||U.image_url,$&&$.startsWith("ipfs://")&&($=$.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for staked token",C)}x.push({tokenId:C,receiptId:g,image:$})}}catch{console.log("🔥 getUserReceipts() not available, trying fallback method...");try{const F=await u.balanceOf(N);if(console.log("🔥 StakeReceipt balance:",F.toString()),F>0){const b=[];try{for(let l=0;l<Number(F);l++){const m=await u.tokenOfOwnerByIndex(N,l);b.push(m.toString())}console.log("🔥 Receipt token IDs:",b)}catch{console.log("🔥 tokenOfOwnerByIndex not available, using brute force for receipts...");for(let m=1;m<=1e3;m++)try{(await u.ownerOf(m)).toLowerCase()===N.toLowerCase()&&b.push(m.toString())}catch{}}for(const l of b){let m=null;try{m=await u.receiptToOriginalToken(l)}catch{try{m=await u.getOriginalTokenId(l)}catch{m=l}}if(m){let C=null;try{let g=await W.tokenURI(m);if(g.startsWith("ipfs://")&&(g=g.replace("ipfs://","https://ipfs.io/ipfs/")),g.startsWith("http")){const M=await(await fetch(g)).json();C=M.image||M.image_url,C&&C.startsWith("ipfs://")&&(C=C.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for staked token",m.toString())}x.push({tokenId:m.toString(),receiptId:l,image:C})}}}}catch(F){console.log("🔥 Fallback method also failed:",F)}}console.log(`✅ Loaded ${x.length} staked Stoner NFTs:`,x.map(T=>T.tokenId)),O(x)}catch(u){console.warn("Failed to fetch staked NFTs:",u)}}catch(s){console.error("Failed to fetch NFTs:",s)}},V=async()=>{if(console.log("💰 fetchRewards called in StonerFeePoolActions"),!window.ethereum||!G){console.log("❌ Wallet not connected, skipping rewards fetch");return}try{y(!0);const s=new se(window.ethereum),N=await(await s.getSigner()).getAddress(),W=new E(de,he,s),ue=await W.calculatePendingRewards(N);R(Oe(ue)),console.log("💎 Native S rewards:",Oe(ue));const re=await W.getWhitelistedTokens();w(re),console.log("📋 Whitelisted tokens:",re);const q=re.map(async o=>{try{const d=await W.calculatePendingERC20Rewards(N,o);let S="Unknown",u=18;try{const x=new E(o,["function symbol() view returns (string)","function decimals() view returns (uint8)"],s);S=await x.symbol(),u=await x.decimals()}catch(x){console.warn(`Failed to get token info for ${o}:`,x.message)}return{address:o,symbol:S,decimals:u,earned:Ke(d,u),rawEarned:d.toString()}}catch(d){return console.warn(`Failed to get rewards for token ${o}:`,d.message),null}}),t=(await Promise.all(q)).filter(o=>o!==null);_(t),console.log("🪙 ERC20 rewards:",t)}catch(s){console.error("Failed to fetch rewards:",s)}finally{y(!1)}};c.useEffect(()=>{(async()=>{await H()&&(console.log("✅ Wallet already connected, fetching data..."),setTimeout(()=>{be(),V()},100))})()},[]),c.useEffect(()=>{G&&ie&&(console.log("🔗 Wallet connected, fetching NFTs and rewards..."),be(),V())},[G,ie]);const Ae=async()=>{if(k.length===0){a("Select NFTs to stake first");return}r(!0),a("");try{const s=await K(),P=new E(de,he,s);let N;k.length===1?N=await P.stake(k[0]):N=await P.stakeMultiple(k),a("Staking..."),await N.wait(),a("Staking successful!"),D([]),await be()}catch(s){a("Staking failed: "+(s.reason||s.message))}r(!1)},we=async()=>{if(B.length===0){a("Select staked NFTs to unstake first");return}r(!0),a("");try{const s=await K(),P=new E(de,he,s),N=B.map(ue=>{const re=f.find(q=>q.tokenId===ue);return re?re.receiptId:ue});console.log("🔥 Unstaking with receipt IDs:",N);let W;N.length===1?W=await P.unstake(N[0]):W=await P.unstakeMultiple(N),a("Unstaking..."),await W.wait(),a("Unstaking successful!"),A([]),await be()}catch(s){console.error("Unstaking failed:",s),a("Unstaking failed: "+(s.reason||s.message))}r(!1)},Ne=async()=>{r(!0),a("");try{const s=await K(),N=await new E(de,he,s).claimAllRewards();a("Claiming rewards..."),await N.wait(),a("Rewards claimed successfully!"),await V()}catch(s){a("Claim failed: "+(s.reason||s.message))}r(!1)},pe=async()=>{r(!0),a("");try{const s=await K(),N=await new E(de,he,s).claimRewardsOnly();a("Claiming native rewards..."),await N.wait(),a("Native rewards claimed successfully!"),await V()}catch(s){a("Native claim failed: "+(s.reason||s.message))}r(!1)},je=async s=>{r(!0),a("");try{const P=await K(),W=await new E(de,he,P).claimERC20Rewards(s);a("Claiming ERC20 rewards..."),await W.wait(),a("ERC20 rewards claimed successfully!"),await V()}catch(P){a("ERC20 claim failed: "+(P.reason||P.message))}r(!1)},Se=async()=>{r(!0);try{const s=await K();await(await new E(Re,["function setApprovalForAll(address,bool) external"],s).setApprovalForAll(de,!0)).wait(),z(!0),a("Approval successful!")}catch(s){a("Approval failed: "+(s.reason||s.message))}r(!1)};return e.jsx("div",{className:"p-6 bg-white/95 dark:bg-gray-800/95 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 backdrop-blur-sm space-y-6",children:G?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"🌿"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-green-400",children:"Stoner NFT Staking"}),e.jsxs("p",{className:"text-sm text-muted",children:["Connected: ",ie.slice(0,6),"...",ie.slice(-4)]})]})]}),e.jsx("button",{onClick:Ne,disabled:p,className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg hover:from-yellow-600 hover:to-orange-600 transition-all disabled:opacity-50 font-medium",children:"Claim Rewards"})]}),n&&e.jsx("div",{className:`p-3 rounded-lg ${n.includes("successful")||n.includes("claimed")?"bg-green-900/20 border border-green-500/20 text-green-400":n.includes("failed")||n.includes("error")?"bg-red-900/20 border border-red-500/20 text-red-400":"bg-blue-900/20 border border-blue-500/20 text-blue-400"}`,children:n}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/10 to-orange-500/10 rounded-xl border border-yellow-500/20 p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-lg",children:"💰"})}),e.jsx("h4",{className:"font-semibold text-yellow-400",children:"Claimable Rewards"})]}),e.jsx("button",{onClick:V,disabled:L,className:"px-3 py-1 bg-yellow-600 text-white rounded text-sm disabled:opacity-50 hover:bg-yellow-700 transition-colors",children:L?"Loading...":"Refresh"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-400 text-lg",children:"⚡"}),e.jsx("span",{className:"font-medium text-blue-400",children:"S Rewards"})]}),e.jsx("button",{onClick:pe,disabled:p||parseFloat(ne)===0,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm disabled:opacity-50 hover:bg-blue-700 transition-colors",children:"Claim S"})]}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:[parseFloat(ne).toFixed(6)," S"]})]}),ae.length>0?e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-400 text-lg",children:"🪙"}),e.jsx("span",{className:"font-medium text-green-400",children:"Token Rewards"})]}),e.jsx("button",{onClick:Ne,disabled:p||ae.every(s=>parseFloat(s.earned)===0),className:"px-3 py-1 bg-green-600 text-white rounded text-sm disabled:opacity-50 hover:bg-green-700 transition-colors",children:"Claim All"})]}),e.jsx("div",{className:"space-y-2 max-h-24 overflow-y-auto",children:ae.map((s,P)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-400",children:[s.symbol,":"]}),e.jsx("span",{className:"text-white font-medium",children:parseFloat(s.earned).toFixed(4)})]}),e.jsx("button",{onClick:()=>je(s.address),disabled:p||parseFloat(s.earned)===0,className:"px-2 py-1 bg-green-600/80 text-white rounded text-xs disabled:opacity-50 hover:bg-green-600 transition-colors",children:"Claim"})]},s.address))})]}):e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-gray-400 text-lg",children:"🪙"}),e.jsx("span",{className:"font-medium text-gray-400",children:"Token Rewards"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:"No whitelisted tokens or rewards available"})]})]}),(parseFloat(ne)>0||ae.some(s=>parseFloat(s.earned)>0))&&e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:Ne,disabled:p,className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-orange-600 text-white rounded-lg disabled:opacity-50 hover:from-yellow-600 hover:to-orange-700 transition-all font-semibold",children:p?"Claiming...":"Claim All Rewards"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-semibold text-green-400",children:["Stake NFTs (",k.length," selected)"]}),!ee&&e.jsx("button",{onClick:Se,disabled:p,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm disabled:opacity-50",children:"Approve All"})]}),i.length===0?e.jsxs("div",{className:"p-6 bg-card/30 rounded-xl text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"🔍"}),e.jsx("p",{className:"text-muted",children:"No Stoner NFTs found in wallet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-4 gap-3",children:i.map(s=>e.jsxs("div",{className:`relative cursor-pointer rounded-lg border-2 transition-all ${k.includes(s.tokenId)?"border-green-400 bg-green-400/10":"border-transparent hover:border-accent/30"}`,onClick:()=>{k.includes(s.tokenId)?D(P=>P.filter(N=>N!==s.tokenId)):D(P=>[...P,s.tokenId])},children:[e.jsx("div",{className:"aspect-square p-2",children:e.jsx(ve,{image:s.image,tokenId:s.tokenId,size:"100%"})}),e.jsxs("div",{className:"text-xs text-center p-1",children:["#",s.tokenId]})]},s.tokenId))}),e.jsx("button",{onClick:Ae,disabled:p||k.length===0||!ee,className:"w-full px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg disabled:opacity-50",children:p?"Staking...":`Stake ${k.length} NFT${k.length!==1?"s":""}`})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-blue-400",children:["Unstake NFTs (",B.length," selected)"]}),f.length===0?e.jsxs("div",{className:"p-6 bg-card/30 rounded-xl text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"📦"}),e.jsx("p",{className:"text-muted",children:"No staked NFTs"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-4 gap-3",children:f.slice(0,12).map(s=>e.jsxs("div",{className:`relative cursor-pointer rounded-lg border-2 transition-all ${B.includes(s.tokenId)?"border-blue-400 bg-blue-400/10":"border-transparent hover:border-accent/30"}`,onClick:()=>{B.includes(s.tokenId)?A(P=>P.filter(N=>N!==s.tokenId)):A(P=>[...P,s.tokenId])},children:[e.jsx("div",{className:"aspect-square p-2",children:e.jsx(ve,{image:s.image,tokenId:s.tokenId,size:"100%"})}),e.jsxs("div",{className:"text-xs text-center p-1",children:["#",s.tokenId]})]},s.tokenId))}),e.jsx("button",{onClick:we,disabled:p||B.length===0,className:"w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg disabled:opacity-50",children:p?"Unstaking...":`Unstake ${B.length} NFT${B.length!==1?"s":""}`})]})]})]})]}):e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-2xl",children:"🌿"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-green-400 mb-2",children:"Stoner NFT Staking"}),e.jsx("p",{className:"text-muted mb-4",children:"Connect your wallet to stake Stoner NFTs and earn rewards"}),e.jsx("button",{onClick:I,disabled:oe,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all disabled:opacity-50 font-medium flex items-center gap-2 mx-auto",children:oe?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Connecting..."]}):"Connect Wallet"})]})]})})}function wt(){return e.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-2xl",children:"🍃"})}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-400 via-emerald-500 to-teal-400 bg-clip-text text-transparent",children:"Stoner NFT Staking"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg max-w-2xl mx-auto",children:"Stake your Stoner NFTs to earn multiple token rewards and participate in the ecosystem"})]}),e.jsx(bt,{})]})}function Tt(){const n=Ve(),[a,p]=c.useState(()=>typeof window<"u"?localStorage.getItem("theme")!=="light":!0);return ke.useEffect(()=>{document.documentElement.classList.toggle("dark",a),localStorage.setItem("theme",a?"dark":"light")},[a]),e.jsx("div",{className:"min-h-screen p-0 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:bg-gradient-to-br dark:from-zinc-900 dark:via-gray-900 dark:to-slate-900 text-gray-900 dark:text-gray-100",children:e.jsxs("div",{className:"max-w-6xl mx-auto p-2 sm:p-4 md:p-6 w-full",children:[e.jsxs("header",{className:"flex flex-col sm:flex-row items-center justify-between mb-8 py-6 px-4 sm:px-6 rounded-2xl shadow-xl bg-white/95 dark:bg-gray-800/95 backdrop-blur-lg gap-4 border border-gray-200 dark:border-gray-700 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 via-blue-500 to-teal-500 rounded-xl shadow-lg flex items-center justify-center group-hover:shadow-glow transition-all duration-300",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"🏊"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-extrabold bg-gradient-to-r from-indigo-600 via-blue-500 to-teal-400 bg-clip-text text-transparent",children:"NFT Swap Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 hidden sm:block",children:"Decentralized NFT trading on Sonic Network"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[n.pathname==="/"&&e.jsx(Pe,{to:"/staking",className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-semibold text-sm shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:"🍃 Stoner Staking"}),n.pathname==="/staking"&&e.jsx(Pe,{to:"/",className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-indigo-500 to-blue-500 hover:from-indigo-600 hover:to-blue-600 text-white font-semibold text-sm shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:"← Back to Swap Pools"}),e.jsx("button",{onClick:()=>p(!a),className:"p-3 rounded-xl bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 transition-all duration-200 shadow-sm hover:shadow-md",title:"Toggle theme",children:e.jsx("span",{className:"text-lg",children:a?"🌙":"☀️"})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-100 to-blue-100 dark:from-indigo-900/50 dark:to-blue-900/50 text-indigo-800 dark:text-indigo-200 rounded-xl font-semibold text-sm shadow-sm border border-indigo-200 dark:border-indigo-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Sonic Network"]})]})]}),e.jsx("main",{children:e.jsxs(Ye,{children:[e.jsx(Ee,{path:"/",element:e.jsx(ct,{})}),e.jsx(Ee,{path:"/staking",element:e.jsx(wt,{})})]})})]})})}De(document.getElementById("root")).render(e.jsx(ke.StrictMode,{children:e.jsx(Je,{children:e.jsx(Tt,{})})}));
