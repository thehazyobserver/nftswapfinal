const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Blt0uD8X.js","assets/vendor-DnY-W9X-.js"])))=>i.map(i=>d[i]);
import{r as d,a as Ke,R as be,u as Ze,L as Ae,b as Je,c as Le,B as Qe}from"./vendor-DnY-W9X-.js";import{C as E,B as je,f as Ce,J as Ge,a as Xe}from"./ethers-BaJ96HYd.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))i(p);new MutationObserver(p=>{for(const l of p)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(p){const l={};return p.integrity&&(l.integrity=p.integrity),p.referrerPolicy&&(l.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?l.credentials="include":p.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(p){if(p.ep)return;p.ep=!0;const l=s(p);fetch(p.href,l)}})();var We={exports:{}},Ie={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var et=d,tt=Symbol.for("react.element"),nt=Symbol.for("react.fragment"),at=Object.prototype.hasOwnProperty,st=et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rt={key:!0,ref:!0,__self:!0,__source:!0};function Ue(t,a,s){var i,p={},l=null,r=null;s!==void 0&&(l=""+s),a.key!==void 0&&(l=""+a.key),a.ref!==void 0&&(r=a.ref);for(i in a)at.call(a,i)&&!rt.hasOwnProperty(i)&&(p[i]=a[i]);if(t&&t.defaultProps)for(i in a=t.defaultProps,a)p[i]===void 0&&(p[i]=a[i]);return{$$typeof:tt,type:t,key:l,ref:r,props:p,_owner:st.current}}Ie.Fragment=nt;Ie.jsx=Ue;Ie.jsxs=Ue;We.exports=Ie;var e=We.exports,_e,Ee=Ke;_e=Ee.createRoot,Ee.hydrateRoot;const it=[{inputs:[{internalType:"address",name:"_centralStonerFeePool",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidERC721",type:"error"},{inputs:[],name:"InvalidShareRange",type:"error"},{inputs:[],name:"PoolAlreadyExists",type:"error"},{inputs:[],name:"PoolDoesNotExist",type:"error"},{inputs:[],name:"ZeroAddressNotAllowed",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"swapFeeInWei",type:"uint256"},{indexed:!1,internalType:"uint256",name:"stonerShare",type:"uint256"}],name:"DefaultFeesUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"centralStonerFeePool",type:"address"},{indexed:!0,internalType:"address",name:"deployer",type:"address"}],name:"FactoryDeployed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"nftCollection",type:"address"},{indexed:!0,internalType:"address",name:"swapPool",type:"address"}],name:"PoolDeactivated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"nftCollection",type:"address"},{indexed:!0,internalType:"address",name:"swapPool",type:"address"},{indexed:!0,internalType:"address",name:"stakeReceipt",type:"address"},{indexed:!1,internalType:"address",name:"creator",type:"address"}],name:"PoolPairCreated",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allCollections",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allPools",outputs:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"bool",name:"active",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"centralStonerFeePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"collectionToPool",outputs:[{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"bool",name:"exists",type:"bool"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"uint256",name:"customSwapFee",type:"uint256"},{internalType:"uint256",name:"customStonerShare",type:"uint256"}],name:"createPoolPair",outputs:[{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"}],name:"deactivatePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"defaultStonerShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"defaultSwapFeeInWei",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getActivePools",outputs:[{components:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"bool",name:"active",type:"bool"}],internalType:"struct MultiPoolFactoryNonProxy.PoolData[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllCollections",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllPools",outputs:[{components:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"bool",name:"active",type:"bool"}],internalType:"struct MultiPoolFactoryNonProxy.PoolData[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getFactoryStats",outputs:[{internalType:"uint256",name:"totalPools",type:"uint256"},{internalType:"address",name:"centralPool",type:"address"},{internalType:"uint256",name:"defaultFee",type:"uint256"},{internalType:"uint256",name:"defaultShare",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"collections",type:"address[]"}],name:"getMultiplePoolInfos",outputs:[{components:[{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"bool",name:"exists",type:"bool"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"}],internalType:"struct MultiPoolFactoryNonProxy.PoolInfo[]",name:"poolInfos",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"}],name:"getPoolInfo",outputs:[{components:[{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"bool",name:"exists",type:"bool"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"}],internalType:"struct MultiPoolFactoryNonProxy.PoolInfo",name:"poolInfo",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"}],name:"poolExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"registerMe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"}],name:"registerPoolPair",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newSwapFeeInWei",type:"uint256"},{internalType:"uint256",name:"newStonerShare",type:"uint256"}],name:"setDefaultFees",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],Te=[{inputs:[{internalType:"address",name:"_nftCollection",type:"address"},{internalType:"address",name:"_receiptContract",type:"address"},{internalType:"address",name:"_stonerPool",type:"address"},{internalType:"uint256",name:"_swapFeeInWei",type:"uint256"},{internalType:"uint256",name:"_stonerShare",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AlreadyInitialized",type:"error"},{inputs:[],name:"IncorrectFee",type:"error"},{inputs:[],name:"InvalidReceiptToken",type:"error"},{inputs:[],name:"InvalidStonerShare",type:"error"},{inputs:[],name:"NoRewardsToClaim",type:"error"},{inputs:[],name:"NoTokensAvailable",type:"error"},{inputs:[],name:"NotInitialized",type:"error"},{inputs:[],name:"NotSlotOwner",type:"error"},{inputs:[],name:"NotTokenOwner",type:"error"},{inputs:[],name:"SameTokenSwap",type:"error"},{inputs:[],name:"SlotNotActive",type:"error"},{inputs:[],name:"TokenNotApproved",type:"error"},{inputs:[],name:"TokenUnavailable",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaxBatchSize",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newMaxUnstakeAll",type:"uint256"}],name:"BatchLimitsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"swapCount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalFeePaid",type:"uint256"}],name:"BatchSwapExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256[]",name:"receiptTokenIds",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"tokensReceived",type:"uint256[]"}],name:"BatchUnstaked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"stonerAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"rewardsAmount",type:"uint256"}],name:"FeeSplit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardsClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardsDistributed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"slotId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newShare",type:"uint256"}],name:"StonerShareUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenIdIn",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokenIdOut",type:"uint256"},{indexed:!1,internalType:"uint256",name:"slotId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"feePaid",type:"uint256"}],name:"SwapExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newFeeInWei",type:"uint256"}],name:"SwapFeeUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"slotId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"Unstaked",type:"event"},{inputs:[],name:"claimRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"emergencyWithdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"exit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getContractInfo",outputs:[{internalType:"address",name:"nft",type:"address"},{internalType:"address",name:"receipt",type:"address"},{internalType:"address",name:"stoner",type:"address"},{internalType:"uint256",name:"fee",type:"uint256"},{internalType:"uint256",name:"share",type:"uint256"},{internalType:"uint256",name:"poolSize",type:"uint256"},{internalType:"uint256",name:"stakedCount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPoolSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPoolTokens",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserActiveSlotCount",outputs:[{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserSlots",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserStakes",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"initialized",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastUpdateTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxBatchSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxUnstakeAllLimit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextSlotId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nftCollection",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"pure",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"pendingRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolSlots",outputs:[{internalType:"address",name:"originalStaker",type:"address"},{internalType:"uint256",name:"stakedAt",type:"uint256"},{internalType:"bool",name:"active",type:"bool"},{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"receiptContract",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptToSlot",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registerMe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardPerToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"newMaxBatchSize",type:"uint256"},{internalType:"uint256",name:"newMaxUnstakeAll",type:"uint256"}],name:"setBatchLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newShare",type:"uint256"}],name:"setStonerShare",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newFeeInWei",type:"uint256"}],name:"setSwapFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"stakeNFT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"stakeNFTBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stonerPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stonerShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"swapFeeInWei",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenIdIn",type:"uint256"}],name:"swapNFT",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIdsIn",type:"uint256[]"}],name:"swapNFTBatch",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenIndexInPool",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalActiveSlots",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalRewardsDistributed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unstakeAllNFTs",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"unstakeNFT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"receiptTokenIds",type:"uint256[]"}],name:"unstakeNFTBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"userSlots",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Se=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidURI",type:"error"},{inputs:[],name:"NonTransferable",type:"error"},{inputs:[],name:"OnlyPool",type:"error"},{inputs:[],name:"PoolAlreadySet",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"newBaseURI",type:"string"}],name:"BaseURIUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"pool",type:"address"}],name:"PoolSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"receiptTokenId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"originalTokenId",type:"uint256"}],name:"ReceiptBurned",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"originalTokenId",type:"uint256"}],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"originalTokenIds",type:"uint256[]"}],name:"batchMint",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"receiptTokenIds",type:"uint256[]"}],name:"batchBurn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserReceipts",outputs:[{internalType:"uint256[]",name:"receipts",type:"uint256[]"},{internalType:"uint256[]",name:"originalTokens",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"getOriginalTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"getReceiptInfo",outputs:[{internalType:"uint256",name:"originalTokenId",type:"uint256"},{internalType:"uint256",name:"mintTime",type:"uint256"},{internalType:"address",name:"originalMinter",type:"address"},{internalType:"uint256",name:"age",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserReceiptHistory",outputs:[{internalType:"uint256[]",name:"receiptIds",type:"uint256[]"},{internalType:"uint256[]",name:"originalTokenIds",type:"uint256[]"},{internalType:"uint256[]",name:"mintTimes",type:"uint256[]"},{internalType:"uint256[]",name:"ages",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCollectionTimeline",outputs:[{internalType:"uint256",name:"totalMinted",type:"uint256"},{internalType:"uint256",name:"totalBurned",type:"uint256"},{internalType:"uint256",name:"currentSupply",type:"uint256"},{internalType:"uint256",name:"averageAge",type:"uint256"},{internalType:"uint256",name:"oldestActive",type:"uint256"},{internalType:"uint256",name:"newestActive",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserReceiptPortfolio",outputs:[{internalType:"uint256",name:"totalReceipts",type:"uint256"},{internalType:"uint256",name:"averageHoldingTime",type:"uint256"},{internalType:"uint256",name:"totalOriginalValue",type:"uint256"},{internalType:"uint256[]",name:"receiptIds",type:"uint256[]"},{internalType:"uint256[]",name:"originalTokenIds",type:"uint256[]"},{internalType:"uint256[]",name:"holdingDurations",type:"uint256[]"},{internalType:"address[]",name:"poolAddresses",type:"address[]"},{internalType:"uint256",name:"oldestReceiptAge",type:"uint256"},{internalType:"uint256",name:"newestReceiptAge",type:"uint256"},{internalType:"bool",name:"hasLongTermHoldings",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"},{internalType:"address",name:"expectedPool",type:"address"}],name:"validateReceipt",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"uri",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_pool",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"registerMe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptToOriginalToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptMintTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptMinter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"approve",outputs:[],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"bool",name:"",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"}];function we({image:t,tokenId:a,size:s=64}){const[i,p]=be.useState(!1),[l,r]=be.useState(!0);return!t||i?e.jsx("div",{style:{width:s,height:s},className:"bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800 rounded-lg flex items-center justify-center text-gray-600 dark:text-gray-400 text-xs font-mono border border-gray-300 dark:border-gray-600 shadow-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg mb-1",children:"🖼️"}),e.jsxs("div",{children:["#",a]})]})}):e.jsxs("div",{className:"relative",style:{width:s,height:s},children:[l&&e.jsx("div",{style:{width:s,height:s},className:"absolute inset-0 bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800 rounded-lg flex items-center justify-center animate-pulse",children:e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})}),e.jsx("img",{src:t,alt:`NFT #${a}`,style:{width:s,height:s},className:"rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 object-cover",onError:()=>p(!0),onLoad:()=>r(!1)})]})}function Me({count:t=6,size:a=56}){return e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:Array.from({length:t}).map((s,i)=>e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"shimmer rounded-xl border-2 border-gray-200 dark:border-gray-700 shadow-sm",style:{width:a+8,height:a+32},children:[e.jsx("div",{className:"bg-gray-300 dark:bg-gray-600 rounded-lg m-1 animate-pulse",style:{width:a,height:a}}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded mx-2 mt-2 animate-pulse"})]})},i))})}const De=d.createContext(),Fe=()=>{const t=d.useContext(De);if(!t)throw new Error("useToast must be used within a ToastProvider");return t};function ot({children:t}){const[a,s]=d.useState([]),i=d.useCallback((u,c="info",y=5e3,f=null)=>{const b=Date.now()+Math.random(),z={id:b,message:u,type:c,txHash:f,createdAt:Date.now()};return s(S=>[...S,z]),y>0&&setTimeout(()=>{s(S=>S.filter(R=>R.id!==b))},y),b},[]),p=d.useCallback(u=>{s(c=>c.filter(y=>y.id!==u))},[]),l=d.useCallback((u,c=null,y=5e3)=>i(u,"success",y,c),[i]),r=d.useCallback((u,c=7e3)=>i(u,"error",c),[i]),w=d.useCallback((u,c=5e3)=>i(u,"info",c),[i]),o=d.useCallback((u,c=null)=>i(u,"loading",0,c),[i]);return e.jsxs(De.Provider,{value:{success:l,error:r,info:w,loading:o,removeToast:p},children:[t,e.jsx(lt,{toasts:a,onRemove:p})]})}function lt({toasts:t,onRemove:a}){return e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 pointer-events-none",children:t.map(s=>e.jsx(dt,{toast:s,onRemove:a},s.id))})}function dt({toast:t,onRemove:a}){const s=()=>{switch(t.type){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200";case"loading":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200";default:return"bg-gray-50 dark:bg-gray-900/20 border-gray-200 dark:border-gray-800 text-gray-800 dark:text-gray-200"}},i=()=>{switch(t.type){case"success":return e.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})});case"error":return e.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})});case"loading":return e.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"});default:return e.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"ℹ"})})}};return e.jsx("div",{className:`max-w-md w-full p-4 rounded-xl border shadow-lg backdrop-blur-sm pointer-events-auto transform transition-all duration-300 animate-slide-in ${s()}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[i(),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium leading-relaxed",children:t.message}),t.txHash&&e.jsx("a",{href:`https://explorer.sonic.org/tx/${t.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs underline opacity-75 hover:opacity-100 transition-opacity mt-1 inline-block",children:"View Transaction →"})]}),e.jsx("button",{onClick:()=>a(t.id),className:"opacity-50 hover:opacity-100 transition-opacity",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}function ct(){const[t,a]=d.useState({}),s=Fe();return{startTransaction:(u,c="Transaction pending...")=>{const y=s.loading(c);a(f=>({...f,[u]:{status:"pending",message:c,toastId:y,startTime:Date.now()}}))},updateTransaction:(u,c,y)=>{a(f=>{const b=f[u];if(!b)return f;s.removeToast(b.toastId);const z=s.success(y,c);return{...f,[u]:{...b,status:"success",txHash:c,message:y,toastId:z}}})},failTransaction:(u,c)=>{a(y=>{const f=y[u];if(!f)return y;s.removeToast(f.toastId);let b="Transaction failed";c!=null&&c.message&&(c.message.includes("user rejected")?b="Transaction cancelled by user":c.message.includes("insufficient funds")?b="Insufficient funds for transaction":b=c.message);const z=s.error(b);return{...y,[u]:{...f,status:"failed",message:b,toastId:z}}})},clearTransaction:u=>{a(c=>{const y=c[u];y!=null&&y.toastId&&s.removeToast(y.toastId);const{[u]:f,...b}=c;return b})},isTransactionPending:u=>{var c;return((c=t[u])==null?void 0:c.status)==="pending"},getTransactionState:u=>t[u]||null}}function ze(){const t=ct();return Fe(),{...t,executeTransaction:async(s,i,p={})=>{const{pendingMessage:l="Transaction pending...",successMessage:r="Transaction successful!",onSuccess:w,onError:o}=p;try{t.startTransaction(s,l);const u=await i();let c=null,y=r;if(u!=null&&u.hash&&(c=u.hash,u.wait&&(await u.wait()).status===0))throw new Error("Transaction failed during execution");return t.updateTransaction(s,c,y),w&&w(u),u}catch(u){throw console.error(`Transaction ${s} failed:`,u),t.failTransaction(s,u),o&&o(u),u}}}}function ut({walletNFTs:t,poolNFTs:a,loading:s,onSwap:i,status:p}){const[l,r]=d.useState([]),w=Fe(),{executeTransaction:o,isTransactionPending:u}=ze(),c=async()=>{if(l.length===0){w.error("Please select NFTs to swap");return}try{await o("swap",()=>i(l),{pendingMessage:`Swapping ${l.length} NFT${l.length>1?"s":""}...`,successMessage:`Successfully swapped ${l.length} NFT${l.length>1?"s":""}!`,onSuccess:()=>{r([])},onError:f=>{console.error("Swap failed:",f)}})}catch{}},y=u("swap");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 1H4m0 0l4 4M4 12l4-4"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent",children:"Swap Your NFTs"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Exchange your NFTs with those available in the pool"})]})]})}),e.jsx("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Selected for Swap:"}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${l.length>8?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 border border-yellow-300":l.length>0?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border border-blue-300":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 border border-gray-300"}`,children:[l.length,"/10 NFTs"]})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:"📦 Max 10 NFTs per batch"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:["Your NFTs (",t.length,")"]})]}),e.jsx("div",{className:"min-h-[120px] bg-white/75 dark:bg-gray-800/75 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:s?e.jsx(Me,{count:6,size:64}):t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-3",children:"🖼️"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No NFTs found in your wallet"})]}):e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:t.map(f=>e.jsxs("button",{className:`relative border-2 rounded-xl p-2 bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 shadow-sm transition-all duration-200 ${l.includes(f.tokenId)?"border-blue-400 scale-105 ring-2 ring-blue-400/50 shadow-lg":"border-gray-200 dark:border-gray-700 hover:border-blue-300 hover:shadow-md"} ${l.length>=10&&!l.includes(f.tokenId)?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>{l.includes(f.tokenId)?r(b=>b.filter(z=>z!==f.tokenId)):l.length<10&&r(b=>[...b,f.tokenId])},disabled:s||l.length>=10&&!l.includes(f.tokenId),children:[e.jsx(we,{image:f.image,tokenId:f.tokenId,size:64}),e.jsxs("div",{className:"text-xs text-center mt-2 font-mono text-gray-600 dark:text-gray-400",children:["#",f.tokenId]}),l.includes(f.tokenId)&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},f.tokenId))})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:["Available in Pool (",a.length,")"]})]}),e.jsx("div",{className:"min-h-[120px] bg-white/75 dark:bg-gray-800/75 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:s?e.jsx(Me,{count:6,size:64}):a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-3",children:"🏊‍♂️"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Pool is empty - stake NFTs first to enable swapping"})]}):e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:a.map(f=>e.jsxs("div",{className:"border-2 border-gray-200 dark:border-gray-700 rounded-xl p-2 bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 shadow-sm",children:[e.jsx(we,{image:f.image,tokenId:f.tokenId,size:64}),e.jsxs("div",{className:"text-xs text-center mt-2 font-mono text-gray-600 dark:text-gray-400",children:["#",f.tokenId]})]},f.tokenId))})})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-4",children:[e.jsx("button",{className:`flex-1 px-6 py-4 text-white rounded-xl shadow-lg font-semibold text-lg tracking-wide transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 ${a.length===0?"bg-gradient-to-r from-gray-400 to-gray-500 cursor-not-allowed":y?"bg-gradient-to-r from-blue-400 to-indigo-400 animate-pulse-glow":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 hover:shadow-xl hover:scale-105"}`,onClick:c,disabled:y||l.length===0||a.length===0,title:a.length===0?"Pool is empty - stake NFTs first to enable swapping":"",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"loading-dots",children:"Swapping"})]}):a.length===0?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Pool Empty - Stake NFTs First"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 1H4m0 0l4 4M4 12l4-4"})}),"Swap Selected NFTs (",l.length,")"]})}),l.length>0&&!y&&e.jsxs("button",{className:"px-4 py-4 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl shadow hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",onClick:()=>r([]),children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]})]}),p&&e.jsx("div",{className:`p-4 rounded-xl border transition-all duration-300 ${p.includes("successful")||p.includes("Swap successful")?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200":p.includes("failed")||p.includes("error")||p.includes("❌")?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200":p.includes("Swapping")?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200":"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:p.includes("successful")||p.includes("Swap successful")?e.jsx("div",{className:"w-5 h-5 bg-emerald-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}):p.includes("failed")||p.includes("error")||p.includes("❌")?e.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}):p.includes("Swapping")?e.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):e.jsx("div",{className:"w-5 h-5 bg-amber-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm leading-5",children:p}),p.includes("Swapping")&&e.jsx("div",{className:"text-xs opacity-75 mt-1",children:"This may take a few moments to complete..."})]})]})})]})}function pt({nftAddress:t,tokenId:a,spender:s,provider:i,onApproved:p,disabled:l}){const[r,w]=d.useState(!1),[o,u]=d.useState(!1),[c,y]=d.useState("");d.useEffect(()=>{if(u(!1),y(""),!t||!a||!s||!i)return;(async()=>{try{const S=await new E(t,["function getApproved(uint256) view returns (address)","function approve(address,uint256) external"],i).getApproved(a);u(S.toLowerCase()===s.toLowerCase())}catch{y("Failed to check approval")}})()},[t,a,s,i]);const f=async()=>{w(!0),y("");try{if(!window.ethereum)throw new Error("Wallet not found");const b=new je(window.ethereum).getSigner();await(await new E(t,["function approve(address,uint256) external"],await b).approve(s,a)).wait(),u(!0),p&&p()}catch(b){y(b.reason||b.message)}w(!1)};return a?o?e.jsxs("div",{className:"flex items-center gap-1 ml-2 px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-lg text-xs font-medium border border-green-200 dark:border-green-700",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Approved"]}):e.jsx("button",{className:"ml-2 px-3 py-1.5 bg-gradient-to-r from-indigo-500 to-blue-500 hover:from-indigo-600 hover:to-blue-600 text-white rounded-lg text-xs font-medium shadow-sm transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",onClick:f,disabled:r||l,children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin"}),"Approving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Approve"]})}):null}function mt({walletNFTs:t,receiptNFTs:a,stakedNFTs:s,loading:i,receiptLoading:p,onStake:l,onUnstake:r,onClaimRewards:w,status:o,approvedMap:u,isApprovedForAll:c,onApproveAll:y,approvingAll:f,nftCollection:b,swapPool:z,provider:S,pendingRewards:R="0"}){const[F,K]=d.useState([]),[A,ie]=d.useState([]),Z=Fe(),{executeTransaction:G,isTransactionPending:ne}=ze(),ue=async()=>{if(F.length===0){Z.error("Please select NFTs to stake");return}try{await G("stake",()=>l(F),{pendingMessage:`Staking ${F.length} NFT${F.length>1?"s":""}...`,successMessage:`Successfully staked ${F.length} NFT${F.length>1?"s":""}!`,onSuccess:()=>{K([])}})}catch{}},X=async()=>{if(A.length===0){Z.error("Please select staked NFTs to unstake");return}try{await G("unstake",()=>r(A),{pendingMessage:`Unstaking ${A.length} NFT${A.length>1?"s":""}...`,successMessage:`Successfully unstaked ${A.length} NFT${A.length>1?"s":""}!`,onSuccess:()=>{ie([])}})}catch{}},ye=async()=>{if(R==="0"||R==="0.0"){Z.info("No rewards to claim at the moment");return}try{await G("claim",()=>w(),{pendingMessage:"Claiming rewards...",successMessage:`Successfully claimed ${R} S tokens!`})}catch{}},ae=F.length>0&&F.every(N=>u[N]||c),L=ne("stake"),oe=ne("unstake"),le=ne("claim");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent",children:"Stake Your NFTs"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Stake NFTs to earn rewards and contribute to the swap pool"})]})]})}),s.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20 rounded-xl p-6 border border-yellow-200 dark:border-yellow-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-yellow-500 to-amber-500 rounded-xl flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"💰"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-800 dark:text-yellow-200",children:"Staking Rewards"}),e.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Earn from swap fees and trading activity"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-3xl font-bold text-yellow-800 dark:text-yellow-200",children:[parseFloat(R).toFixed(4)," S"]}),e.jsx("div",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Pending Rewards"})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-yellow-600/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-500/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-yellow-400 text-sm",children:"💎"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-yellow-200",children:"Swap Fee Earnings"}),e.jsx("div",{className:"text-xs text-yellow-300/70",children:"From your staked NFTs generating trading fees"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-yellow-200",children:[s.length," NFT",s.length!==1?"s":""]}),e.jsx("div",{className:"text-xs text-yellow-300/70",children:"Currently Staked"})]})]}),e.jsx("button",{onClick:ye,disabled:le||parseFloat(R)===0,className:`w-full px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 ${le?"bg-gradient-to-r from-yellow-400 to-amber-400 animate-pulse-glow":"bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-600 hover:to-amber-600"}`,children:le?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"loading-dots",children:"Claiming"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),parseFloat(R)>0?`Claim ${parseFloat(R).toFixed(4)} S`:"No Rewards Available"]})})]}),parseFloat(R)===0&&s.length>0&&e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-xs text-yellow-300/60 bg-yellow-900/30 px-3 py-2 rounded-lg border border-yellow-700/30",children:["💡 ",e.jsx("strong",{children:"Tip:"})," Rewards accumulate as users swap NFTs in this pool. Check back later!"]})})]}),e.jsx("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Selected to Stake:"}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${F.length>0?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 border border-green-300":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 border border-gray-300"}`,children:[F.length," NFTs"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Selected to Unstake:"}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${A.length>0?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border border-red-300":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 border border-gray-300"}`,children:[A.length," NFTs"]})]})]})}),t.length>0&&!c&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border border-blue-200 dark:border-blue-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"Approval Required"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Approve all NFTs for easier staking"})]})]}),e.jsx("button",{onClick:y,disabled:f,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Approving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Approve All"]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:["Available to Stake (",t.length,")"]})]}),e.jsx("div",{className:"min-h-[120px] bg-white/75 dark:bg-gray-800/75 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:i?e.jsx(Me,{count:6,size:64}):t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-3",children:"🖼️"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No NFTs available to stake"})]}):e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:t.map(N=>e.jsxs("div",{className:"relative",children:[e.jsxs("button",{className:`relative border-2 rounded-xl p-2 bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 shadow-sm transition-all duration-200 w-full ${F.includes(N.tokenId)?"border-green-400 scale-105 ring-2 ring-green-400/50 shadow-lg":"border-gray-200 dark:border-gray-700 hover:border-green-300 hover:shadow-md"}`,onClick:()=>{F.includes(N.tokenId)?K(H=>H.filter(j=>j!==N.tokenId)):K(H=>[...H,N.tokenId])},disabled:i,children:[e.jsx(we,{image:N.image,tokenId:N.tokenId,size:64}),e.jsxs("div",{className:"text-xs text-center mt-2 font-mono text-gray-600 dark:text-gray-400",children:["#",N.tokenId]}),F.includes(N.tokenId)&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),!c&&!u[N.tokenId]&&F.includes(N.tokenId)&&e.jsx("div",{className:"mt-2",children:e.jsx(pt,{nftAddress:b,tokenId:N.tokenId,spender:z,provider:S,disabled:i})})]},N.tokenId))})})]}),a.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-yellow-500 to-amber-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:["Currently Staked (",a.length,")"]})]}),e.jsx("div",{className:"min-h-[120px] bg-white/75 dark:bg-gray-800/75 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:p?e.jsx(Me,{count:6,size:64}):e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:a.map(N=>e.jsxs("button",{className:`relative border-2 rounded-xl p-2 bg-gradient-to-br from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20 shadow-sm transition-all duration-200 ${A.includes(N.tokenId)?"border-red-400 scale-105 ring-2 ring-red-400/50 shadow-lg":"border-yellow-200 dark:border-yellow-700 hover:border-red-300 hover:shadow-md"}`,onClick:()=>{A.includes(N.tokenId)?ie(H=>H.filter(j=>j!==N.tokenId)):ie(H=>[...H,N.tokenId])},disabled:i,children:[e.jsx(we,{image:N.image,tokenId:N.tokenId,size:64}),e.jsxs("div",{className:"text-xs text-center mt-2 font-mono text-yellow-700 dark:text-yellow-300",children:["#",N.tokenId]}),A.includes(N.tokenId)&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("div",{className:"absolute -bottom-1 -left-1 bg-yellow-500 text-white text-xs px-1 py-0.5 rounded text-[10px] font-bold",children:"STAKED"})]},N.tokenId))})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:`w-full px-6 py-4 text-white rounded-xl shadow-lg font-semibold text-lg tracking-wide transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 ${F.length===0||!ae?"bg-gradient-to-r from-gray-400 to-gray-500 cursor-not-allowed":L?"bg-gradient-to-r from-green-400 to-emerald-400 animate-pulse-glow":"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 hover:shadow-xl hover:scale-105"}`,onClick:ue,disabled:L||F.length===0||!ae,children:L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"loading-dots",children:"Staking"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Stake Selected (",F.length,")"]})}),F.length>0&&e.jsxs("button",{className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center justify-center gap-2",onClick:()=>K([]),disabled:i,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear Selection"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:`w-full px-6 py-4 text-white rounded-xl shadow-lg font-semibold text-lg tracking-wide transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 ${A.length===0?"bg-gradient-to-r from-gray-400 to-gray-500 cursor-not-allowed":oe?"bg-gradient-to-r from-red-400 to-pink-400 animate-pulse-glow":"bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 hover:shadow-xl hover:scale-105"}`,onClick:X,disabled:oe||A.length===0,children:oe?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"loading-dots",children:"Unstaking"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Unstake Selected (",A.length,")"]})}),A.length>0&&e.jsxs("button",{className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center justify-center gap-2",onClick:()=>ie([]),disabled:i,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear Selection"]})]})]}),o&&e.jsx("div",{className:`p-4 rounded-xl border transition-all duration-300 ${o.includes("successful")||o.includes("claimed")||o.includes("Stake successful")||o.includes("Unstake successful")||o.includes("Rewards claimed")?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200":o.includes("failed")||o.includes("error")||o.includes("❌")||o.includes("Cannot")?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200":o.includes("Staking...")||o.includes("Unstaking...")||o.includes("Claiming")?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200":"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:o.includes("successful")||o.includes("claimed")||o.includes("Stake successful")||o.includes("Unstake successful")||o.includes("Rewards claimed")?e.jsx("div",{className:"w-5 h-5 bg-emerald-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}):o.includes("failed")||o.includes("error")||o.includes("❌")||o.includes("Cannot")?e.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}):o.includes("Staking...")||o.includes("Unstaking...")||o.includes("Claiming")?e.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):e.jsx("div",{className:"w-5 h-5 bg-amber-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm leading-5",children:o}),(o.includes("Staking...")||o.includes("Unstaking...")||o.includes("Claiming"))&&e.jsx("div",{className:"text-xs opacity-75 mt-1",children:"This may take a few moments to complete..."})]})]})})]})}function yt({swapPool:t,stakeReceipt:a,provider:s}){const[i,p]=d.useState(null),[l,r]=d.useState(""),[w,o]=d.useState(!1),[u,c]=d.useState([]),[y,f]=d.useState({}),[b,z]=d.useState(null),[S,R]=d.useState(!1),[F,K]=d.useState(!1),[A,ie]=d.useState([]),[Z,G]=d.useState([]),[ne,ue]=d.useState([]),[X,ye]=d.useState(null),[ae,L]=d.useState(!1),[oe,le]=d.useState(!1),[N,H]=d.useState(!1),[j,V]=d.useState(null),[q,O]=d.useState("0"),n=async()=>{if(!window.ethereum)throw new Error("Wallet not found");return new je(window.ethereum).getSigner()},T=async m=>{o(!0),r("Swapping NFTs...");try{const g=await n();await(await new E(t,Te,g).swapNFTs(m)).wait(),r("Swap successful! ✅"),await re()}catch(g){r(`Swap failed: ${g.reason||g.message}`)}o(!1)},U=async m=>{o(!0),r("Staking NFTs...");try{const g=await n();await(await new E(t,Te,g).stakeNFTs(m)).wait(),r("Stake successful! ✅"),await re()}catch(g){r(`Stake failed: ${g.reason||g.message}`)}o(!1)},se=async m=>{o(!0),r("Unstaking NFTs...");try{const g=await n();await(await new E(a,Se,g).unstakeNFTs(m)).wait(),r("Unstake successful! ✅"),await re()}catch(g){r(`Unstake failed: ${g.reason||g.message}`)}o(!1)},Y=async()=>{o(!0),r("Claiming rewards...");try{const m=await n();await(await new E(a,Se,m).claimRewards()).wait(),r("Rewards claimed successfully! ✅"),await re()}catch(m){r(`Claim failed: ${m.reason||m.message}`)}o(!1)},de=async()=>{K(!0);try{const m=await n();await(await new E(b,["function setApprovalForAll(address,bool) external"],m).setApprovalForAll(t,!0)).wait(),R(!0),r("Approval successful! You can now stake NFTs.")}catch(m){r(`Approval failed: ${m.reason||m.message}`)}K(!1)},re=async()=>{console.log("Refreshing NFT data..."),L(!0),le(!0),H(!0),c([]),G([]),ue([]),ye(null),await new Promise(h=>setTimeout(h,100));const m=s||(window.ethereum?new je(window.ethereum):null);if(!m){console.warn("No provider available for NFT fetching"),L(!1),le(!1),H(!1);return}let g=null;if(window.ethereum)try{const h=await window.ethereum.request({method:"eth_accounts"});h&&h.length>0&&(g=await(await m.getSigner()).getAddress())}catch(h){console.warn("Could not get signer:",h)}if(ye(g),!g){c([]),L(!1),G([]),le(!1),ie([]),await B(m);return}await Promise.all([ce(g,m),ee(g,m),B(m),_(g,m)]),await W()},ce=async(m,g)=>{try{const k=await new E(t,Te,g).nftCollection();if(z(k),!k){console.log("❌ Could not get NFT collection address from SwapPool"),c([]),L(!1);return}const C=new E(k,["function balanceOf(address) view returns (uint256)","function ownerOf(uint256) view returns (address)","function tokenOfOwnerByIndex(address,uint256) view returns (uint256)","function tokenURI(uint256) view returns (string)","function getApproved(uint256) view returns (address)","function isApprovedForAll(address,address) view returns (bool)","function totalSupply() view returns (uint256)"],g),v=await C.balanceOf(m),I=Number(v);if(console.log(`🎯 Collection NFT Balance for ${m}: ${I}`),I===0){console.log("📭 No NFTs owned by user (balance=0)"),c([]),f({}),L(!1);return}let M=!1;try{M=await C.isApprovedForAll(m,t)}catch{}R(!!M);let x=[];if(I>0&&I<=1e3)try{console.log(`🔍 Trying enumerable approach for ${v.toString()} tokens...`);const $=[];for(let Q=0;Q<I;Q++)$.push(C.tokenOfOwnerByIndex(m,Q));x=await Promise.all($),console.log("✅ Enumerable approach successful, found tokens:",x.map(Q=>Q.toString()))}catch{console.log("❌ tokenOfOwnerByIndex not supported, using fallback scan"),x=[]}if(x.length===0){console.log("🎯 Starting direct ownership scan...");let $=2e3;try{const te=await C.totalSupply();$=Math.min(Number(te)+100,2e3),console.log(`📈 Total supply: ${te.toString()}, scanning up to token ${$}`)}catch{console.log(`📈 Total supply not available, scanning up to token ${$}`)}const Q=new Set,xe=20;let pe=0;const he=Number(I);for(let te=1;te<=$&&pe<he;te+=xe){const ve=Math.min(te+xe-1,$),ke=[];for(let me=te;me<=ve;me++)ke.push(C.ownerOf(me).then(Ne=>({tokenId:me,owner:Ne.toLowerCase()})).catch(()=>({tokenId:me,owner:null})));try{const me=await Promise.all(ke);for(const{tokenId:Ne,owner:Ye}of me)if(Ye===m.toLowerCase()&&(Q.add(Ne.toString()),pe++,console.log(`✅ Found owned token: #${Ne} (${pe}/${he})`),pe>=he))break}catch(me){console.warn(`Batch ${te}-${ve} failed:`,me.message)}if(pe>=he)break;await new Promise(me=>setTimeout(me,50))}x=Array.from(Q).map(te=>BigInt(te)),console.log(`✅ Direct ownership scan complete, found ${x.length} tokens`)}const P=x.map(async $=>{try{const Q=$.toString();let xe="",pe="";try{if(xe=await C.tokenURI($),xe){let te=xe;xe.startsWith("ipfs://")&&(te=xe.replace("ipfs://","https://ipfs.io/ipfs/"));try{const ke=await(await fetch(te)).json();ke.image&&(pe=ke.image,pe.startsWith("ipfs://")&&(pe=pe.replace("ipfs://","https://ipfs.io/ipfs/")))}catch(ve){console.warn(`Failed to fetch metadata for wallet token ${$}:`,ve)}}}catch{}let he=!1;try{he=(await C.getApproved($)).toLowerCase()===t.toLowerCase()}catch{}return{tokenId:Q,image:pe||"",approved:he}}catch(Q){return console.warn(`Failed to fetch metadata for token ${$}:`,Q),{tokenId:$.toString(),image:"",approved:!1}}}),D=await Promise.all(P);console.log("📦 Wallet NFTs loaded:",D.length);const J={};D.forEach($=>{J[$.tokenId]=$.approved}),c(D),f(J)}catch(h){console.error("Failed to fetch wallet NFTs:",h),c([]),f({})}finally{L(!1)}},ee=async(m,g)=>{try{const h=new E(a,["function balanceOf(address) view returns (uint256)","function tokenOfOwnerByIndex(address,uint256) view returns (uint256)","function tokenURI(uint256) view returns (string)","function receiptToOriginalToken(uint256) view returns (uint256)"],g),k=await h.balanceOf(m),C=[];for(let v=0;v<Number(k);v++)try{const I=await h.tokenOfOwnerByIndex(m,v),M=await h.receiptToOriginalToken(I);let x="",P="";try{if(x=await h.tokenURI(I),x){let D=x;x.startsWith("ipfs://")&&(D=x.replace("ipfs://","https://ipfs.io/ipfs/"));try{const $=await(await fetch(D)).json();$.image&&(P=$.image,P.startsWith("ipfs://")&&(P=P.replace("ipfs://","https://ipfs.io/ipfs/")))}catch(J){console.warn(`Failed to fetch metadata for receipt token ${I}:`,J)}}}catch{}C.push({tokenId:I.toString(),originalTokenId:M.toString(),image:P||""})}catch(I){console.warn(`Failed to fetch receipt token ${v}:`,I)}console.log("🧾 Receipt NFTs loaded:",C.length),G(C)}catch(h){console.error("Failed to fetch receipt NFTs:",h),G([])}finally{le(!1)}},B=async m=>{try{console.log("🏊 Fetching pool NFTs for pool:",t);const g=new E(t,Te,m),h=await g.getPoolTokens();console.log("🏊 Pool token IDs:",h);const k=await g.nftCollection();if(console.log("🏊 Collection address:",k),!k){console.warn("🏊 No collection address found"),ue([]),H(!1);return}const C=new E(k,["function tokenURI(uint256) view returns (string)"],m),v=h.map(async M=>{try{let x="",P="";try{if(x=await C.tokenURI(M),console.log(`🏊 Token ${M} URI:`,x),x){let D=x;x.startsWith("ipfs://")&&(D=x.replace("ipfs://","https://ipfs.io/ipfs/"));try{const $=await(await fetch(D)).json();$.image&&(P=$.image,P.startsWith("ipfs://")&&(P=P.replace("ipfs://","https://ipfs.io/ipfs/"))),console.log(`🏊 Token ${M} image:`,P)}catch(J){console.warn(`Failed to fetch metadata for token ${M}:`,J)}}}catch(D){console.warn(`Failed to get tokenURI for token ${M}:`,D)}return{tokenId:M.toString(),image:P||""}}catch(x){return console.warn(`Failed to fetch pool NFT metadata for token ${M}:`,x),{tokenId:M.toString(),image:""}}}),I=await Promise.all(v);console.log("🏊 Pool NFTs loaded:",I.length),ue(I)}catch(g){console.error("Failed to fetch pool NFTs:",g),ue([])}finally{H(!1)}},_=async(m,g)=>{try{const k=await new E(t,Te,g).getUserStakes(m);ie(k.map(C=>C.toString())),console.log("🔒 Staked NFTs loaded:",k.length)}catch(h){console.error("Failed to fetch staked NFTs:",h),ie([])}},W=async()=>{if(!X||!a){O("0");return}try{const m=await n(),g=new E(a,Se,m);if(g.earned){const h=await g.earned(X);O(Ce(h))}else{const h=await g.pendingRewards(X);O(Ce(h))}}catch(m){console.warn("Failed to fetch pending rewards:",m),O("0")}};return d.useEffect(()=>{t&&(re(),W())},[t,a]),d.useEffect(()=>{t&&s&&re()},[s]),d.useEffect(()=>{const m=setInterval(()=>{W()},3e4);return()=>clearInterval(m)},[X,a]),i==="swap"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("button",{onClick:()=>p(null),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Actions"]}),e.jsx(ut,{walletNFTs:u,poolNFTs:ne,loading:w||ae||N,onSwap:T,status:l})]}):i==="stake"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("button",{onClick:()=>p(null),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Actions"]}),e.jsx(mt,{walletNFTs:u,receiptNFTs:Z,stakedNFTs:A,loading:w,receiptLoading:oe,onStake:U,onUnstake:se,onClaimRewards:Y,status:l,approvedMap:y,isApprovedForAll:S,onApproveAll:de,approvingAll:F,nftCollection:b,swapPool:t,provider:s,pendingRewards:q})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 via-blue-500 to-teal-400 bg-clip-text text-transparent mb-4",children:"What would you like to do?"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"Choose your action to get started with the swap pool"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx("div",{className:"group",children:e.jsx("button",{onClick:()=>p("swap"),className:"w-full p-8 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-2xl border-2 border-blue-200 dark:border-blue-700 hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-300 hover:shadow-xl hover:shadow-blue-500/20 group-hover:scale-105",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow",children:e.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 1H4m0 0l4 4M4 12l4-4"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-blue-800 dark:text-blue-200 mb-2",children:"Swap NFTs"}),e.jsx("p",{className:"text-blue-600 dark:text-blue-400 leading-relaxed",children:"Exchange your NFTs with those available in the pool. Perfect for finding specific traits or collecting new pieces."})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400 font-medium",children:[e.jsx("span",{children:"Start Swapping"}),e.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-blue-500 dark:text-blue-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Instant Trading"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2z",clipRule:"evenodd"})}),e.jsx("span",{children:"Secure Exchange"})]})]})]})})}),e.jsx("div",{className:"group",children:e.jsx("button",{onClick:()=>p("stake"),className:"w-full p-8 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-2xl border-2 border-green-200 dark:border-green-700 hover:border-green-400 dark:hover:border-green-500 transition-all duration-300 hover:shadow-xl hover:shadow-green-500/20 group-hover:scale-105",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow",children:e.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-green-800 dark:text-green-200 mb-2",children:"Stake NFTs"}),e.jsx("p",{className:"text-green-600 dark:text-green-400 leading-relaxed",children:"Stake your NFTs to earn rewards from swap fees and contribute to pool liquidity. Passive income from your collection."})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400 font-medium",children:[e.jsx("span",{children:"Start Earning"}),e.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-green-500 dark:text-green-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}),e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z",clipRule:"evenodd"})]}),e.jsx("span",{children:"Earn Rewards"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{children:"Pool Liquidity"})]})]})]})})})]}),e.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 text-center",children:"Pool Overview"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:ne.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Available to Swap"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:A.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Currently Staked"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:u.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"In Your Wallet"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:Z.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Your Receipts"})]})]})]}),l&&e.jsx("div",{className:`p-4 rounded-xl border transition-all duration-300 ${l.includes("successful")||l.includes("✅")?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200":l.includes("failed")||l.includes("error")?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200"}`,children:e.jsx("div",{className:"text-center font-medium",children:l})})]})}const gt={"0xB6748d708B5Cda0eA8c53e7072566971FCCb6b49":"https://nftstorage.link/stoner.png","0xE3941DB58B9D35410A66636da07c9B28b878B89E":"https://nftstorage.link/boat.png"};function xt(t){if(!t)return"from-gray-400 to-gray-600";const a=t.split("").reduce((i,p)=>p.charCodeAt(0)+((i<<5)-i),0),s=["from-blue-400 to-purple-600","from-purple-400 to-pink-600","from-pink-400 to-red-600","from-red-400 to-orange-600","from-orange-400 to-yellow-600","from-yellow-400 to-green-600","from-green-400 to-teal-600","from-teal-400 to-blue-600","from-indigo-400 to-purple-600","from-violet-400 to-pink-600","from-cyan-400 to-blue-600","from-emerald-400 to-teal-600"];return s[Math.abs(a)%s.length]}function ht(t){if(!t||t==="Unknown Collection"||t==="Loading...")return"?";const a=t.trim().split(/\s+/);return a.length===1?a[0].substring(0,2).toUpperCase():a.slice(0,2).map(s=>s.charAt(0).toUpperCase()).join("")}function Ve({address:t,collectionName:a,size:s=48}){const[i,p]=be.useState(!1),[l,r]=be.useState(!0),w=gt[t==null?void 0:t.toLowerCase()];if(!w||i){const o=ht(a),u=xt(a||t),c=s<=32?"text-xs":s<=48?"text-sm":"text-base";return e.jsx("div",{style:{width:s,height:s},className:`bg-gradient-to-br ${u} rounded-lg flex items-center justify-center text-white font-bold ${c} shadow-lg`,children:o})}return e.jsxs("div",{className:"relative",children:[l&&e.jsx("div",{style:{width:s,height:s},className:"absolute inset-0 bg-gray-300 rounded animate-pulse"}),e.jsx("img",{src:w,alt:"NFT Collection",style:{width:s,height:s,borderRadius:8},onError:()=>p(!0),onLoad:()=>r(!1),className:l?"opacity-0":"opacity-100"})]})}function ft({pool:t,collectionName:a,onClose:s,provider:i}){return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-4xl max-h-[90vh] overflow-y-auto p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"sticky top-0 bg-white dark:bg-gray-800 pb-4 mb-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:"Pool Details"}),e.jsx("button",{className:"text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 px-3 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition flex-shrink-0",onClick:s,children:"✕ Close"})]})}),"        ",e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 mb-4",children:[e.jsx(Ve,{address:t.nftCollection,collectionName:a,size:64}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"font-semibold text-base sm:text-lg text-blue-600 dark:text-blue-400 mb-1",children:["Collection: ",e.jsxs("span",{className:"font-mono text-gray-600 dark:text-gray-400",children:[t.nftCollection.slice(0,6),"...",t.nftCollection.slice(-4)]})]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["SwapPool: ",e.jsxs("span",{className:"font-mono",children:[t.swapPool.slice(0,6),"...",t.swapPool.slice(-4)]})]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Receipt: ",e.jsxs("span",{className:"font-mono",children:[t.stakeReceipt.slice(0,6),"...",t.stakeReceipt.slice(-4)]})]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Creator: ",t.creator]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Created: ",t.createdAt]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Active: ",t.active?"Yes":"No"]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-2",children:[e.jsx("a",{className:"px-3 py-1.5 text-sm bg-blue-500 hover:bg-blue-600 text-white rounded shadow transition",href:`https://explorer.sonic.org/address/${t.swapPool}`,target:"_blank",rel:"noreferrer",children:"Explorer"}),e.jsx("button",{className:"px-3 py-1.5 text-sm bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 rounded transition",onClick:()=>navigator.clipboard.writeText(t.swapPool),children:"Copy Address"})]}),e.jsx(yt,{swapPool:t.swapPool,stakeReceipt:t.stakeReceipt,provider:i})]})})}const qe=d.createContext(),Pe=()=>{const t=d.useContext(qe);if(!t)throw new Error("useWallet must be used within a WalletProvider");return t},bt=({children:t})=>{const[a,s]=d.useState(""),[i,p]=d.useState(null),[l,r]=d.useState(null),[w,o]=d.useState(!1),[u,c]=d.useState(!1);d.useEffect(()=>{(async()=>{if(window.ethereum)try{(await window.ethereum.request({method:"eth_accounts"})).length>0&&await y()}catch{console.log("No existing wallet connection found")}})()},[]),d.useEffect(()=>{const S=async F=>{F.length===0?f():F[0]!==a&&await y()},R=()=>{window.location.reload()};return window.ethereum&&(window.ethereum.on("accountsChanged",S),window.ethereum.on("chainChanged",R)),()=>{window.ethereum&&(window.ethereum.removeListener("accountsChanged",S),window.ethereum.removeListener("chainChanged",R))}},[a]);const y=async()=>{if(!window.ethereum)throw new Error("Please install MetaMask or another wallet");o(!0);try{await window.ethereum.request({method:"eth_requestAccounts"});const S=new je(window.ethereum),R=await S.getSigner(),F=await R.getAddress(),K=await S.getNetwork(),A=K.chainId===146n;return p(S),r(R),s(F),c(A),console.log(`🔗 Wallet connected: ${F}`),console.log(`🌐 Network: ${K.name} (${K.chainId})`),A||console.warn("⚠️ Not on Sonic network"),{address:F,provider:S,signer:R,isCorrectNetwork:A}}catch(S){throw console.error("Wallet connection failed:",S),S}finally{o(!1)}},f=()=>{s(""),p(null),r(null),c(!1),console.log("🔌 Wallet disconnected")},z={address:a,provider:i,signer:l,isConnecting:w,isCorrectNetwork:u,connectWallet:y,disconnect:f,switchToSonicNetwork:async()=>{if(!window.ethereum)return!1;try{return await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x92"}]}),!0}catch(S){if(S.code===4902)try{return await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x92",chainName:"Sonic Network",nativeCurrency:{name:"Sonic",symbol:"S",decimals:18},rpcUrls:["https://rpc.soniclabs.com/"],blockExplorerUrls:["https://explorer.soniclabs.com/"]}]}),!0}catch(R){return console.error("Failed to add Sonic network:",R),!1}return console.error("Failed to switch to Sonic network:",S),!1}},isConnected:!!a};return e.jsx(qe.Provider,{value:z,children:t})};async function wt(t,a){try{return await new E(t,["function name() view returns (string)"],a).name()}catch{return"Unknown Collection"}}function vt(){const{address:t,provider:a,signer:s,isConnected:i,isCorrectNetwork:p}=Pe(),[l,r]=d.useState([]),[w,o]=d.useState({}),[u,c]=d.useState(!1),[y,f]=d.useState(null),[b,z]=d.useState(null),[S,R]=d.useState(""),[F,K]=d.useState(!0),[A,ie]=d.useState(""),[Z,G]=d.useState(""),[ne,ue]=d.useState(!1),[X,ye]=d.useState(new Set),ae="0x1Db92C2F11b7716f3fa6E94969a8649a32adB1De",[L,oe]=d.useState(ae),le=async(j,V)=>{if(!t||!V)return;const q=new Set;try{for(const O of j)try{const T=await new E(O.stakeReceipt,["function balanceOf(address) view returns (uint256)"],V).balanceOf(t);Number(T)>0&&q.add(O.swapPool)}catch(n){console.warn(`Failed to check stakes for pool ${O.swapPool}:`,n)}}catch(O){console.warn("Failed to check user stakes:",O)}ye(q)},N=l.filter(j=>{const V=Z.toLowerCase(),q=!Z||w[j.nftCollection]&&w[j.nftCollection].toLowerCase().includes(V)||j.nftCollection.toLowerCase().includes(V)||j.swapPool.toLowerCase().includes(V),O=!ne||X.has(j.swapPool);return q&&O});d.useEffect(()=>{(async()=>{K(!0);let V=!1;try{const q=["https://rpc.soniclabs.com","https://rpc.soniclabs.com","https://sonic.drpc.org","https://sonic.api.onfinality.io/public","https://sonic-rpc.publicnode.com"].filter(Boolean);for(const O of q)try{const n=new Ge(O);await n.getBlockNumber(),z(n),R(""),console.log("Provider set: "+O),V=!0;break}catch(n){console.warn("RPC failed",O,n)}if(window.ethereum&&V)try{const O=await window.ethereum.request({method:"eth_chainId"}),n=parseInt(O,16);n!==146&&console.warn("Wallet connected to chainId",n,"but using RPC for read operations")}catch(O){console.warn("Could not read chainId from wallet",O)}V||console.warn("No working provider found")}catch(q){console.warn("Provider init failed",q)}K(!1)})()},[]);const H=async()=>{if(!L){console.warn("Factory address not set. Provide VITE_FACTORY_ADDRESS or public/contracts.json");return}if(!b){console.warn("fetchPools called without provider");return}c(!0),ie("");try{try{const n=await b.getNetwork();n&&n.chainId&&Number(n.chainId)!==146&&console.warn(`Connected to chain ${n.chainId}, expected 146 (Sonic)`);const T=await b.send("eth_getCode",[L,"latest"]);(!T||T==="0x"||T==="0x0")&&console.warn(`No contract found at ${L}`)}catch(n){console.warn("Network/code check failed",n)}const j=new E(L,it,b);let V=[];try{V=await j.getAllPools(),V=V.filter(n=>n.active)}catch(n){console.error("Failed to get pools from factory:",n),V=[]}console.log("All active pools from contract:",V);const q=V.map(n=>({nftCollection:n.nftCollection,swapPool:n.swapPool,stakeReceipt:n.stakeReceipt,createdAt:new Date(Number(n.createdAt)*1e3).toLocaleString(),creator:n.creator,active:n.active,poolAddress:n.swapPool}));console.log("All pools (no deduplication applied):",q),r(q);const O={};for(const n of q)O[n.nftCollection]=await wt(n.nftCollection,b);o(O),t&&await le(q,b)}catch(j){console.error("Failed to fetch pools",j)}c(!1)};return d.useEffect(()=>{b&&L&&H()},[b,L]),e.jsxs("div",{className:"space-y-6",children:[A&&e.jsxs("div",{className:"p-4 bg-red-900/20 border border-red-500/20 text-red-400 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{children:"⚠️"}),e.jsx("span",{className:"font-semibold",children:"Error"})]}),e.jsx("p",{className:"text-sm",children:A})]}),F&&e.jsxs("div",{className:"p-6 bg-card/30 rounded-xl text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-accent border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"font-semibold",children:"Connecting to Sonic Network..."})]}),e.jsx("p",{className:"text-sm text-muted",children:"Please wait while we establish connection"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-xl font-bold text-accent",children:"Swap Pools"}),e.jsxs("div",{className:"px-3 py-1 bg-accent/10 text-accent rounded-full text-sm font-medium",children:[N.length," ",ne?"staked":"active"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-xs text-muted",children:["Factory: ",e.jsxs("span",{className:"font-mono text-accent",children:[L==null?void 0:L.slice(0,6),"...",(L==null?void 0:L.slice(-4))||"Not set"]})]}),e.jsxs("button",{onClick:H,disabled:u,className:"px-4 py-2 bg-accent text-white rounded-lg shadow hover:bg-accent/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-medium",children:[u&&e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),u?"Loading...":"Refresh Pools"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 p-4 bg-white/50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Search by collection name, address, or pool address...",value:Z,onChange:j=>G(j.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-sm placeholder-gray-500 dark:placeholder-gray-400"}),Z&&e.jsx("button",{onClick:()=>G(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ne,onChange:j=>ue(j.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-green-500",children:"🎯"}),"My Staked Pools"]})]}),ne&&e.jsxs("div",{className:"px-2 py-1 bg-green-500/10 text-green-600 dark:text-green-400 rounded text-xs font-medium",children:[X.size," staked"]})]})]}),u&&N.length===0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(j=>e.jsx("div",{className:"p-4 sm:p-5 bg-card rounded-2xl shadow-lg animate-pulse",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-gray-600 rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-600 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-600 rounded w-1/2"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-600 rounded w-2/3"}),e.jsx("div",{className:"h-3 bg-gray-600 rounded w-1/2"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-6 bg-gray-600 rounded w-16"}),e.jsx("div",{className:"h-6 bg-gray-600 rounded w-20"})]})]})},j))}):N.length===0?e.jsx("div",{className:"p-8 bg-white/90 dark:bg-gray-800/90 rounded-2xl text-center border border-gray-200 dark:border-gray-700",children:l.length===0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-6xl mb-4",children:"🏊‍♂️"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Swap Pools Found"}),e.jsx("p",{className:"text-muted mb-4",children:L?"No pools are currently registered with this factory.":"Please set a factory address first."}),L&&e.jsx("button",{onClick:H,className:"px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/80 transition-colors",children:"Refresh Pools"})]}):ne?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎯"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Staked Pools"}),e.jsx("p",{className:"text-muted mb-4",children:"You haven't staked any NFTs in pools yet. Start staking to earn rewards from trading fees!"}),e.jsx("button",{onClick:()=>ue(!1),className:"px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/80 transition-colors",children:"Show All Pools"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Results Found"}),e.jsxs("p",{className:"text-muted mb-4",children:['No pools match your search "',Z,'". Try adjusting your search terms.']}),e.jsx("button",{onClick:()=>G(""),className:"px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/80 transition-colors",children:"Clear Search"})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map((j,V)=>e.jsxs("div",{className:"group p-4 sm:p-5 bg-white/95 dark:bg-gray-800/95 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-200 dark:border-gray-700 hover:border-blue-400/50 cursor-pointer",onClick:()=>f(j),children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{address:j.nftCollection,collectionName:w[j.nftCollection],size:56}),X.has(j.swapPool)&&e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"✓"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-blue-600 dark:text-blue-400 truncate",children:w[j.nftCollection]||"Loading..."}),X.has(j.swapPool)&&e.jsxs("div",{className:"px-2 py-1 bg-green-500/10 text-green-600 dark:text-green-400 rounded-full text-xs font-medium flex items-center gap-1",children:[e.jsx("span",{children:"🎯"}),e.jsx("span",{children:"Staked"})]})]}),e.jsxs("p",{className:"text-xs text-muted font-mono truncate",children:[j.nftCollection.slice(0,8),"...",j.nftCollection.slice(-6)]})]})]}),e.jsxs("div",{className:"space-y-2 text-xs text-muted mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pool:"}),e.jsxs("span",{className:"font-mono",children:[j.swapPool.slice(0,8),"...",j.swapPool.slice(-6)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Receipt:"}),e.jsxs("span",{className:"font-mono",children:[j.stakeReceipt.slice(0,8),"...",j.stakeReceipt.slice(-6)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Created:"}),e.jsx("span",{children:new Date(Number(j.createdAt)).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-colors text-sm font-medium shadow-sm",onClick:q=>{q.stopPropagation(),f(j)},children:"View Details"}),e.jsx("button",{className:"px-3 py-2 bg-secondary/50 hover:bg-secondary text-text rounded-lg transition-colors text-xs",onClick:q=>{q.stopPropagation(),navigator.clipboard.writeText(j.swapPool)},title:"Copy pool address",children:"📋"})]})]},`${j.swapPool}-${V}`))})]}),y&&e.jsx(ft,{pool:y,collectionName:w[y.nftCollection],onClose:()=>f(null),provider:b})]})}const kt="modulepreload",Tt=function(t){return"/"+t},Be={},jt=function(a,s,i){let p=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),w=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));p=Promise.allSettled(s.map(o=>{if(o=Tt(o),o in Be)return;Be[o]=!0;const u=o.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${c}`))return;const y=document.createElement("link");if(y.rel=u?"stylesheet":kt,u||(y.as="script"),y.crossOrigin="",y.href=o,w&&y.setAttribute("nonce",w),document.head.appendChild(y),u)return new Promise((f,b)=>{y.addEventListener("load",f),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${o}`)))})}))}function l(r){const w=new Event("vite:preloadError",{cancelable:!0});if(w.payload=r,window.dispatchEvent(w),!w.defaultPrevented)throw r}return p.then(r=>{for(const w of r||[])w.status==="rejected"&&l(w.reason);return a().catch(l)})},fe=[{inputs:[{internalType:"address",name:"_stonerNFT",type:"address"},{internalType:"address",name:"_receiptToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AlreadyStaked",type:"error"},{inputs:[],name:"DuplicateTokenId",type:"error"},{inputs:[],name:"EmptyArray",type:"error"},{inputs:[],name:"NoERC20Rewards",type:"error"},{inputs:[],name:"NoRewards",type:"error"},{inputs:[],name:"NoStakers",type:"error"},{inputs:[],name:"NotStaked",type:"error"},{inputs:[],name:"NotYourToken",type:"error"},{inputs:[],name:"TokenAlreadyWhitelisted",type:"error"},{inputs:[],name:"TokenNotWhitelisted",type:"error"},{inputs:[],name:"TooManyTokens",type:"error"},{inputs:[],name:"TransferFailed",type:"error"},{inputs:[],name:"ZeroAddress",type:"error"},{inputs:[],name:"ZeroETH",type:"error"},{inputs:[],name:"ZeroTokenAmount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ERC20RewardClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ERC20RewardReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"EmergencyERC20Withdrawal",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"EmergencyETHWithdrawal",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"EmergencyUnstake",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"}],name:"TokenRemovedFromWhitelist",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"}],name:"TokenWhitelisted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Unstaked",type:"event"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"addWhitelistedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"address",name:"token",type:"address"}],name:"calculatePendingERC20Rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"calculatePendingRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimAllERC20Rewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimAllRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"claimERC20Rewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimRewardsOnly",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"address",name:"token",type:"address"}],name:"earnedERC20",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"to",type:"address"}],name:"emergencyUnstake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"emergencyUnstakeWithClaim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"emergencyWithdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"emergencyWithdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"erc20RewardCarry",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"erc20RewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"erc20Rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"erc20TotalRewardsClaimed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"erc20UserRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"exit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getAllPendingERC20Rewards",outputs:[{internalType:"address[]",name:"tokens",type:"address[]"},{internalType:"uint256[]",name:"rewardAmounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"getERC20PoolInfo",outputs:[{internalType:"address",name:"tokenAddress",type:"address"},{internalType:"uint256",name:"totalClaimedAmount",type:"uint256"},{internalType:"uint256",name:"contractBalance",type:"uint256"},{internalType:"bool",name:"isWhitelisted",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPoolInfo",outputs:[{internalType:"address",name:"nftAddress",type:"address"},{internalType:"uint256",name:"totalStakedTokens",type:"uint256"},{internalType:"uint256",name:"totalRewards",type:"uint256"},{internalType:"uint256",name:"contractBalance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getStakeInfo",outputs:[{internalType:"address",name:"staker",type:"address"},{internalType:"uint256",name:"stakedAt",type:"uint256"},{internalType:"uint256",name:"stakingDuration",type:"uint256"},{internalType:"bool",name:"active",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getStakedTokens",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getWhitelistedTokens",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"isStaked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"notifyERC20Reward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"notifyNativeReward",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"pure",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptIdByOriginal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"receiptToken",outputs:[{internalType:"contract IStakeReceipt",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"registerMe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"removeWhitelistedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardCarry",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"stakeMultiple",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"stakedTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"stakerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stonerNFT",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalRewardsClaimed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalStaked",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"unstake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"unstakeMultiple",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whitelistedTokens",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"whitelistedTokensList",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],$e=[{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"_startTime",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AlreadyExists",type:"error"},{inputs:[],name:"InvalidOwner",type:"error"},{inputs:[],name:"InvalidRecipient",type:"error"},{inputs:[],name:"InvalidSender",type:"error"},{inputs:[],name:"NotFound",type:"error"},{inputs:[],name:"Unauthorized",type:"error"},{inputs:[],name:"UnsafeRecipient",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ERC20Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"ERC721Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"activePhase",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amountOrId",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"availableIds",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseTokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"phase",type:"uint256"},{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"}],name:"canMintAmountInPhase",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"}],name:"contractNFTBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"}],name:"contractTokenBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"enoughTokenBalance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"phase",type:"uint256"},{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256",name:"quantity",type:"uint256"}],name:"grantPhaseAccess",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"phase",type:"uint256"},{internalType:"address",name:"account",type:"address"}],name:"hasPhaseAccess",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxMintPerTx",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxMintable",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"quantity",type:"uint256"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"mintActive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"mintHasStarted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"minted",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"}],name:"ownerMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"owner",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"phaseDuration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"phaseMintsRemaining",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"phases",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"revokeOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"royaltyAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"royaltyReceiver",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"secondsUntilStart",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_baseURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxMintPerTx",type:"uint256"}],name:"setMaxPerTx",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"mintActive_",type:"bool"}],name:"setMintActive",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_paused",type:"bool"}],name:"setPaused",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_price",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_royaltyAmount",type:"uint256"}],name:"setRoyaltyAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_receiver",type:"address"}],name:"setRoyaltyReceiver",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_startTime",type:"uint256"}],name:"setStartTime",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"target",type:"address"},{internalType:"bool",name:"state",type:"bool"}],name:"setWhitelist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"startTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalAvailableIds",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"totalNFTsOwned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalNativeSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whitelist",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],Nt="0xB6748d708B5Cda0eA8c53e7072566971FCCb6b49",St="0x5777fc6ca7f6BDc02dF3323A0C05970bB9D05b74",He={stonerStakeReceipt:Nt,stonerFeePool:St},ge=He.stonerFeePool,Ct=He.stonerStakeReceipt,Re="0x9b567e03d891F537b2B7874aA4A3308Cfe2F4FBb";function Mt(){console.log("🎯 StonerFeePoolActions component loaded!");const{address:t,signer:a,provider:s,isConnected:i,isCorrectNetwork:p}=Pe(),[l,r]=d.useState(""),[w,o]=d.useState(!1),[u,c]=d.useState([]),[y,f]=d.useState([]),[b,z]=d.useState([]),[S,R]=d.useState([]),[F,K]=d.useState(!1),[A,ie]=d.useState("0"),[Z,G]=d.useState([]),[ne,ue]=d.useState([]),[X,ye]=d.useState(!1),ae=async()=>{if(!a)throw new Error("Wallet not connected");return a},L=async()=>{if(console.log("🎯 fetchNFTs called in StonerFeePoolActions"),!i||!s||!t){console.log("❌ Wallet not connected, skipping NFT fetch");return}try{const n=t,T=new E(Re,$e,s),U=new E(ge,fe,s),se=await T.isApprovedForAll(n,ge);K(se);const Y=await T.totalNFTsOwned(n);console.log("🔢 Stoner NFT balance:",Y.toString());const de=Number(Y),re=1e3;if(de>re){console.log(`⚠️ Balance seems unusually large (${de}), limiting to ${re}`),c([]),f([]),r(`Warning: NFT balance appears corrupted (${de}). Please check the contract.`);return}const ce=[];let ee=!1;try{await T.tokenOfOwnerByIndex(n,0),ee=!0,console.log("✅ Using tokenOfOwnerByIndex approach");for(let B=0;B<Math.min(Number(Y),50);B++)try{const _=await T.tokenOfOwnerByIndex(n,B);console.log(`📝 Found wallet token ${B+1}/${Y}: #${_.toString()}`);let W=null;try{let m=await T.tokenURI(_);if(m.startsWith("ipfs://")&&(m=m.replace("ipfs://","https://ipfs.io/ipfs/")),m.startsWith("http")){const h=await(await fetch(m)).json();W=h.image||h.image_url,W&&W.startsWith("ipfs://")&&(W=W.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for token",_.toString())}ce.push({tokenId:_.toString(),image:W})}catch(_){console.warn(`Failed to get token at index ${B}:`,_.message);continue}}catch{console.log("❌ tokenOfOwnerByIndex not supported (ERC404 contract), trying event-based approach"),ee=!1;try{console.log("🔍 Using direct ownership verification for ERC404 contract...");const _=new Set,W=Math.max(1e4,Number(Y)*50),m=20;let g=0;for(let v=1;v<=W&&g<Number(Y);v+=m){const I=Math.min(v+m-1,W),M=[];for(let x=v;x<=I;x++)M.push(T.ownerOf(x).then(P=>({tokenId:x,owner:P.toLowerCase()})).catch(()=>({tokenId:x,owner:null})));try{const x=await Promise.all(M);for(const{tokenId:P,owner:D}of x)if(D===n.toLowerCase()&&(_.add(P.toString()),g++,console.log(`✅ Found owned token via direct check: #${P} (${g}/${Y})`),g>=Number(Y)))break}catch(x){console.warn(`Batch ${v}-${I} failed:`,x.message)}if(g>=Number(Y))break;await new Promise(x=>setTimeout(x,10))}console.log(`🎯 Direct check found ${g} total tokens`);const h=Array.from(_).slice(0,50);console.log(`📋 Validating ${h.length} tokens and fetching metadata...`);const k=5;let C=0;for(let v=0;v<h.length;v+=k){const M=h.slice(v,v+k).map(async x=>{try{if((await T.ownerOf(x)).toLowerCase()!==n.toLowerCase())return null;let D=null;try{let J=await T.tokenURI(x);if(J.startsWith("ipfs://")&&(J=J.replace("ipfs://","https://ipfs.io/ipfs/")),J.startsWith("http")){const Q=await(await fetch(J)).json();D=Q.image||Q.image_url,D&&D.startsWith("ipfs://")&&(D=D.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for token",x)}return{tokenId:x.toString(),image:D}}catch(P){return console.warn(`Token ${x} validation failed:`,P.message),null}});try{const x=await Promise.all(M);for(const P of x)P&&(ce.push(P),C++,console.log(`✅ Validated token #${P.tokenId} (${C}/${h.length})`))}catch(x){console.warn(`Metadata batch ${v} failed:`,x.message)}v+k<h.length&&await new Promise(x=>setTimeout(x,50))}C>0&&(ee=!0,console.log(`🎉 Successfully loaded ${C} Stoner NFTs via direct ownership check`))}catch(_){console.warn("Direct ownership check failed:",_.message)}}if(!ee||ce.length<Number(Y)){console.log("🔍 Trying multicall brute force token discovery...");try{const{Multicall:B}=await jt(async()=>{const{Multicall:v}=await import("./index-Blt0uD8X.js");return{Multicall:v}},__vite__mapDeps([0,1])),_=new B({ethersProvider:s,tryAggregate:!0}),W=1e3,m=[];for(let v=0;v<=W;v++)m.push({reference:`ownerOf_${v}`,contractAddress:Re,abi:$e,calls:[{methodName:"ownerOf",methodParameters:[v]}]});const g=await _.call(m),k=Object.entries(g.results).filter(([v,I])=>I.callsReturnContext&&I.callsReturnContext[0].returnValues&&I.callsReturnContext[0].returnValues[0]&&I.callsReturnContext[0].returnValues[0].toLowerCase()===n.toLowerCase()).map(([v])=>parseInt(v.replace("ownerOf_",""))).map(async v=>{if(ce.some(x=>x.tokenId===v.toString()))return null;let M=null;try{let x=await T.tokenURI(v);if(x.startsWith("ipfs://")&&(x=x.replace("ipfs://","https://ipfs.io/ipfs/")),x.startsWith("http")){const D=await(await fetch(x)).json();M=D.image||D.image_url,M&&M.startsWith("ipfs://")&&(M=M.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for token",v.toString())}return{tokenId:v.toString(),image:M}});(await Promise.all(k)).forEach(v=>{v&&ce.push(v)})}catch(B){console.warn("Multicall failed (network may not support it):",B.message),console.log("📋 Continuing with enumerable results only")}}console.log(`✅ Loaded ${ce.length}/${Y} wallet Stoner NFTs`),c(ce);try{console.log("🔥 Fetching staked NFTs from StakeReceipt contract...");const B=new E(Ct,Se,s);let _=[];try{const[W,m]=await B.getUserReceipts(n);console.log("🔥 Raw receipts and original tokens from getUserReceipts:",W,m);const g=Array.from(W).map(k=>k.toString()),h=Array.from(m).map(k=>k.toString());console.log("🔥 Staked Stoner NFT token IDs from receipts:",h);for(let k=0;k<h.length;k++){const C=h[k],v=g[k];let I=null;try{let M=await T.tokenURI(C);if(M.startsWith("ipfs://")&&(M=M.replace("ipfs://","https://ipfs.io/ipfs/")),M.startsWith("http")){const P=await(await fetch(M)).json();I=P.image||P.image_url,I&&I.startsWith("ipfs://")&&(I=I.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for staked token",C)}_.push({tokenId:C,receiptId:v,image:I})}}catch{console.log("🔥 getUserReceipts() not available, trying fallback method...");try{const m=await B.balanceOf(n);if(console.log("🔥 StakeReceipt balance:",m.toString()),m>0){const g=[];try{for(let h=0;h<Number(m);h++){const k=await B.tokenOfOwnerByIndex(n,h);g.push(k.toString())}console.log("🔥 Receipt token IDs:",g)}catch{console.log("🔥 tokenOfOwnerByIndex not available, using brute force for receipts...");for(let k=1;k<=1e3;k++)try{(await B.ownerOf(k)).toLowerCase()===n.toLowerCase()&&g.push(k.toString())}catch{}}for(const h of g){let k=null;try{k=await B.receiptToOriginalToken(h)}catch{try{k=await B.getOriginalTokenId(h)}catch{k=h}}if(k){let C=null;try{let v=await T.tokenURI(k);if(v.startsWith("ipfs://")&&(v=v.replace("ipfs://","https://ipfs.io/ipfs/")),v.startsWith("http")){const M=await(await fetch(v)).json();C=M.image||M.image_url,C&&C.startsWith("ipfs://")&&(C=C.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for staked token",k.toString())}_.push({tokenId:k.toString(),receiptId:h,image:C})}}}}catch(m){console.log("🔥 Fallback method also failed:",m)}}console.log(`✅ Loaded ${_.length} staked Stoner NFTs:`,_.map(W=>W.tokenId)),f(_)}catch(B){console.warn("Failed to fetch staked NFTs:",B)}}catch(n){console.error("Failed to fetch NFTs:",n)}},oe=async()=>{if(console.log("💰 fetchRewards called in StonerFeePoolActions"),!window.ethereum||!i){console.log("❌ Wallet not connected, skipping rewards fetch");return}try{ye(!0);const n=new je(window.ethereum),U=await(await n.getSigner()).getAddress(),se=new E(ge,fe,n),Y=await se.calculatePendingRewards(U);ie(Ce(Y)),console.log("💎 Native S rewards:",Ce(Y));const de=await se.getWhitelistedTokens();ue(de),console.log("📋 Whitelisted tokens:",de);const re=de.map(async ee=>{try{const B=await se.calculatePendingERC20Rewards(U,ee);let _="Unknown",W=18;try{const m=new E(ee,["function symbol() view returns (string)","function decimals() view returns (uint8)"],n);_=await m.symbol(),W=await m.decimals()}catch(m){console.warn(`Failed to get token info for ${ee}:`,m.message)}return{address:ee,symbol:_,decimals:W,earned:Xe(B,W),rawEarned:B.toString()}}catch(B){return console.warn(`Failed to get rewards for token ${ee}:`,B.message),null}}),ce=(await Promise.all(re)).filter(ee=>ee!==null);G(ce),console.log("🪙 ERC20 rewards:",ce)}catch(n){console.error("Failed to fetch rewards:",n)}finally{ye(!1)}};d.useEffect(()=>{i&&t&&p&&(console.log("🔗 Wallet connected, fetching NFTs and rewards..."),L(),oe())},[i,t,p]);const le=async()=>{if(b.length===0){r("Select NFTs to stake first");return}o(!0),r("");try{const n=await ae(),T=new E(ge,fe,n);let U;b.length===1?U=await T.stake(b[0]):U=await T.stakeMultiple(b),r("Staking..."),await U.wait(),r("Staking successful!"),z([]),await L()}catch(n){r("Staking failed: "+(n.reason||n.message))}o(!1)},N=async()=>{if(S.length===0){r("Select staked NFTs to unstake first");return}o(!0),r("");try{const n=await ae(),T=new E(ge,fe,n),U=S.map(Y=>{const de=y.find(re=>re.tokenId===Y);return de?de.receiptId:Y});console.log("🔥 Unstaking with receipt IDs:",U);let se;U.length===1?se=await T.unstake(U[0]):se=await T.unstakeMultiple(U),r("Unstaking..."),await se.wait(),r("Unstaking successful!"),R([]),await L()}catch(n){console.error("Unstaking failed:",n),r("Unstaking failed: "+(n.reason||n.message))}o(!1)},H=async()=>{o(!0),r("");try{const n=await ae(),U=await new E(ge,fe,n).claimAllRewards();r("Claiming rewards..."),await U.wait(),r("Rewards claimed successfully!"),await oe()}catch(n){r("Claim failed: "+(n.reason||n.message))}o(!1)},j=async()=>{o(!0),r("");try{const n=await ae(),U=await new E(ge,fe,n).claimRewardsOnly();r("Claiming native rewards..."),await U.wait(),r("Native rewards claimed successfully!"),await oe()}catch(n){r("Native claim failed: "+(n.reason||n.message))}o(!1)},V=async n=>{o(!0),r("");try{const T=await ae(),se=await new E(ge,fe,T).claimERC20Rewards(n);r("Claiming ERC20 rewards..."),await se.wait(),r("ERC20 rewards claimed successfully!"),await oe()}catch(T){r("ERC20 claim failed: "+(T.reason||T.message))}o(!1)},q=async()=>{o(!0);try{const n=await ae();await(await new E(Re,["function setApprovalForAll(address,bool) external"],n).setApprovalForAll(ge,!0)).wait(),K(!0),r("Approval successful!")}catch(n){r("Approval failed: "+(n.reason||n.message))}o(!1)},O=!i;return e.jsxs("div",{className:"p-6 bg-white/95 dark:bg-gray-800/95 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 backdrop-blur-sm space-y-6",children:[O&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-600 dark:text-blue-400 mb-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"font-medium",children:"Connect Wallet to Interact"})]}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Connect your wallet using the button in the header to stake NFTs and claim rewards"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"🌿"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-green-400",children:"Stoner NFT Staking"}),e.jsx("p",{className:"text-sm text-muted",children:i?`Connected: ${t.slice(0,6)}...${t.slice(-4)}`:"Preview Mode - Connect wallet to interact"})]})]}),e.jsx("button",{onClick:H,disabled:w||!i,className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg hover:from-yellow-600 hover:to-orange-600 transition-all disabled:opacity-50 font-medium",title:i?"":"Connect wallet to claim rewards",children:"Claim Rewards"})]}),l&&e.jsx("div",{className:`p-3 rounded-lg ${l.includes("successful")||l.includes("claimed")?"bg-green-900/20 border border-green-500/20 text-green-400":l.includes("failed")||l.includes("error")?"bg-red-900/20 border border-red-500/20 text-red-400":"bg-blue-900/20 border border-blue-500/20 text-blue-400"}`,children:l}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/10 to-orange-500/10 rounded-xl border border-yellow-500/20 p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-lg",children:"💰"})}),e.jsx("h4",{className:"font-semibold text-yellow-400",children:"Claimable Rewards"})]}),e.jsx("button",{onClick:oe,disabled:X||!i,className:"px-3 py-1 bg-yellow-600 text-white rounded text-sm disabled:opacity-50 hover:bg-yellow-700 transition-colors",title:i?"":"Connect wallet to refresh rewards",children:X?"Loading...":"Refresh"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-400 text-lg",children:"⚡"}),e.jsx("span",{className:"font-medium text-blue-400",children:"S Rewards"})]}),e.jsx("button",{onClick:j,disabled:w||parseFloat(A)===0||!i,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm disabled:opacity-50 hover:bg-blue-700 transition-colors",title:i?"":"Connect wallet to claim",children:"Claim S"})]}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:[parseFloat(A).toFixed(6)," S"]})]}),Z.length>0?e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-400 text-lg",children:"🪙"}),e.jsx("span",{className:"font-medium text-green-400",children:"Token Rewards"})]}),e.jsx("button",{onClick:H,disabled:w||Z.every(n=>parseFloat(n.earned)===0)||!i,className:"px-3 py-1 bg-green-600 text-white rounded text-sm disabled:opacity-50 hover:bg-green-700 transition-colors",title:i?"":"Connect wallet to claim",children:"Claim All"})]}),e.jsx("div",{className:"space-y-2 max-h-24 overflow-y-auto",children:Z.map((n,T)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-400",children:[n.symbol,":"]}),e.jsx("span",{className:"text-white font-medium",children:parseFloat(n.earned).toFixed(4)})]}),e.jsx("button",{onClick:()=>V(n.address),disabled:w||parseFloat(n.earned)===0||!i,className:"px-2 py-1 bg-green-600/80 text-white rounded text-xs disabled:opacity-50 hover:bg-green-600 transition-colors",title:i?"":"Connect wallet to claim",children:"Claim"})]},n.address))})]}):e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-gray-400 text-lg",children:"🪙"}),e.jsx("span",{className:"font-medium text-gray-400",children:"Token Rewards"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:"No whitelisted tokens or rewards available"})]})]}),(parseFloat(A)>0||Z.some(n=>parseFloat(n.earned)>0))&&e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:H,disabled:w||!i,className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-orange-600 text-white rounded-lg disabled:opacity-50 hover:from-yellow-600 hover:to-orange-700 transition-all font-semibold",title:i?"":"Connect wallet to claim rewards",children:w?"Claiming...":"Claim All Rewards"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-semibold text-green-400",children:["Stake NFTs (",b.length," selected)"]}),!F&&e.jsx("button",{onClick:q,disabled:w||!i,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm disabled:opacity-50",title:i?"":"Connect wallet to approve",children:"Approve All"})]}),u.length===0?e.jsxs("div",{className:"p-6 bg-card/30 rounded-xl text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"🔍"}),e.jsx("p",{className:"text-muted",children:"No Stoner NFTs found in wallet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-4 gap-3",children:u.map(n=>e.jsxs("div",{className:`relative cursor-pointer rounded-lg border-2 transition-all ${b.includes(n.tokenId)?"border-green-400 bg-green-400/10":"border-transparent hover:border-accent/30"}`,onClick:()=>{b.includes(n.tokenId)?z(T=>T.filter(U=>U!==n.tokenId)):z(T=>[...T,n.tokenId])},children:[e.jsx("div",{className:"aspect-square p-2",children:e.jsx(we,{image:n.image,tokenId:n.tokenId,size:"100%"})}),e.jsxs("div",{className:"text-xs text-center p-1",children:["#",n.tokenId]})]},n.tokenId))}),e.jsx("button",{onClick:le,disabled:w||b.length===0||!F||!i,className:"w-full px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg disabled:opacity-50",title:i?"":"Connect wallet to stake NFTs",children:w?"Staking...":`Stake ${b.length} NFT${b.length!==1?"s":""}`})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-blue-400",children:["Unstake NFTs (",S.length," selected)"]}),y.length===0?e.jsxs("div",{className:"p-6 bg-card/30 rounded-xl text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"📦"}),e.jsx("p",{className:"text-muted",children:"No staked NFTs"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-4 gap-3",children:y.slice(0,12).map(n=>e.jsxs("div",{className:`relative cursor-pointer rounded-lg border-2 transition-all ${S.includes(n.tokenId)?"border-blue-400 bg-blue-400/10":"border-transparent hover:border-accent/30"}`,onClick:()=>{S.includes(n.tokenId)?R(T=>T.filter(U=>U!==n.tokenId)):R(T=>[...T,n.tokenId])},children:[e.jsx("div",{className:"aspect-square p-2",children:e.jsx(we,{image:n.image,tokenId:n.tokenId,size:"100%"})}),e.jsxs("div",{className:"text-xs text-center p-1",children:["#",n.tokenId]})]},n.tokenId))}),e.jsx("button",{onClick:N,disabled:w||S.length===0||!i,className:"w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg disabled:opacity-50",title:i?"":"Connect wallet to unstake NFTs",children:w?"Unstaking...":`Unstake ${S.length} NFT${S.length!==1?"s":""}`})]})]})]})]})}function It(){return e.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-2xl",children:"🍃"})}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-400 via-emerald-500 to-teal-400 bg-clip-text text-transparent",children:"Stoner NFT Staking"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg max-w-2xl mx-auto",children:"Stake your Stoner NFTs to earn multiple token rewards and participate in the ecosystem"})]}),e.jsx(Mt,{})]})}const Oe={chainId:"0x92",chainName:"Sonic Network",rpcUrls:["https://rpc.sonic.org"],nativeCurrency:{name:"S",symbol:"S",decimals:18},blockExplorerUrls:["https://explorer.sonic.org"]};function Ft({onNetworkReady:t}){const[a,s]=d.useState(null),[i,p]=d.useState(!1),[l,r]=d.useState(!1);d.useEffect(()=>{if(o(),window.ethereum)return window.ethereum.on("chainChanged",w),()=>window.ethereum.removeListener("chainChanged",w)},[]);const w=c=>{const y=parseInt(c,16);s(y),p(y===146),y===146&&(t==null||t(!0))},o=async()=>{if(window.ethereum)try{const c=await window.ethereum.request({method:"eth_chainId"}),y=parseInt(c,16);s(y),p(y===146),y===146&&(t==null||t(!0))}catch(c){console.warn("Failed to check network:",c)}},u=async()=>{if(window.ethereum){r(!0);try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:Oe.chainId}]})}catch(c){if(c.code===4902)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[Oe]})}catch(y){console.error("Failed to add Sonic network:",y)}else console.error("Failed to switch to Sonic network:",c)}r(!1)}};return window.ethereum?!i&&a!==null?e.jsx("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:"🔄"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-800 dark:text-orange-200",children:"Wrong Network"}),e.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:"Please switch to Sonic Network (Chain ID: 146)"})]})]}),e.jsx("button",{onClick:u,disabled:l,className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium disabled:opacity-50 flex items-center gap-2 transition-colors",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Switching..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"🔄"}),"Switch to Sonic"]})})]})}):null:e.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:"🦊"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-amber-800 dark:text-amber-200",children:"Wallet Required"}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Please install MetaMask or another Ethereum wallet to continue."})]})]})})}function Rt(){const{address:t,isConnecting:a,isCorrectNetwork:s,connectWallet:i,disconnect:p,switchToSonicNetwork:l,isConnected:r}=Pe(),w=async()=>{try{await i()}catch(c){console.error("Failed to connect wallet:",c)}},o=async()=>{try{await l()}catch(c){console.error("Failed to switch network:",c)}},u=c=>c?`${c.slice(0,6)}...${c.slice(-4)}`:"";return r&&!s?e.jsx("button",{onClick:o,className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-semibold text-sm shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:"⚠️ Switch to Sonic"}):r?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900/50 dark:to-emerald-900/50 text-green-800 dark:text-green-200 rounded-xl font-semibold text-sm shadow-sm border border-green-200 dark:border-green-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),u(t)]}),e.jsx("button",{onClick:p,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",title:"Disconnect wallet",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsx("button",{onClick:w,disabled:a,className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-indigo-500 to-blue-500 hover:from-indigo-600 hover:to-blue-600 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold text-sm shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2 disabled:cursor-not-allowed",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Connecting..."]}):e.jsx(e.Fragment,{children:"🔗 Connect Wallet"})})}function Pt(){const t=Ze(),[a,s]=d.useState(()=>typeof window<"u"?localStorage.getItem("theme")!=="light":!0);return be.useEffect(()=>{document.documentElement.classList.toggle("dark",a),localStorage.setItem("theme",a?"dark":"light")},[a]),e.jsx(bt,{children:e.jsx(ot,{children:e.jsxs("div",{className:"min-h-screen p-0 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:bg-gradient-to-br dark:from-zinc-900 dark:via-gray-900 dark:to-slate-900 text-gray-900 dark:text-gray-100",children:[e.jsx(Ft,{}),e.jsxs("div",{className:"max-w-6xl mx-auto p-2 sm:p-4 md:p-6 w-full",children:[e.jsxs("header",{className:"flex flex-col sm:flex-row items-center justify-between mb-8 py-6 px-4 sm:px-6 rounded-2xl shadow-xl bg-white/95 dark:bg-gray-800/95 backdrop-blur-lg gap-4 border border-gray-200 dark:border-gray-700 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 via-blue-500 to-teal-500 rounded-xl shadow-lg flex items-center justify-center group-hover:shadow-glow transition-all duration-300",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"🏊"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-extrabold bg-gradient-to-r from-indigo-600 via-blue-500 to-teal-400 bg-clip-text text-transparent",children:"NFT Swap Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 hidden sm:block",children:"Decentralized NFT trading on Sonic Network"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[t.pathname==="/"&&e.jsx(Ae,{to:"/staking",className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-semibold text-sm shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:"🍃 Stoner Staking"}),t.pathname==="/staking"&&e.jsx(Ae,{to:"/",className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-indigo-500 to-blue-500 hover:from-indigo-600 hover:to-blue-600 text-white font-semibold text-sm shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:"← Back to Swap Pools"}),e.jsx(Rt,{}),e.jsx("button",{onClick:()=>s(!a),className:"p-3 rounded-xl bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 transition-all duration-200 shadow-sm hover:shadow-md",title:"Toggle theme",children:e.jsx("span",{className:"text-lg",children:a?"🌙":"☀️"})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-100 to-blue-100 dark:from-indigo-900/50 dark:to-blue-900/50 text-indigo-800 dark:text-indigo-200 rounded-xl font-semibold text-sm shadow-sm border border-indigo-200 dark:border-indigo-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Sonic Network"]})]})]}),e.jsx("main",{children:e.jsxs(Je,{children:[e.jsx(Le,{path:"/",element:e.jsx(vt,{})}),e.jsx(Le,{path:"/staking",element:e.jsx(It,{})})]})})]})]})})})}_e(document.getElementById("root")).render(e.jsx(be.StrictMode,{children:e.jsx(Qe,{children:e.jsx(Pt,{})})}));
