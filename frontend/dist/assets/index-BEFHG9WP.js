const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Blt0uD8X.js","assets/vendor-DnY-W9X-.js"])))=>i.map(i=>d[i]);
import{r as o,a as Ke,R as we,u as Ze,L as Ae,b as Je,c as Le,B as Qe}from"./vendor-DnY-W9X-.js";import{C as B,B as Ne,f as ve,J as Ge,p as Xe,a as et}from"./ethers-Bg9Q1_ah.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))n(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const l of d.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(u){if(u.ep)return;u.ep=!0;const d=s(u);fetch(u.href,d)}})();var Oe={exports:{}},Ie={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tt=o,nt=Symbol.for("react.element"),at=Symbol.for("react.fragment"),st=Object.prototype.hasOwnProperty,rt=tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,it={key:!0,ref:!0,__self:!0,__source:!0};function Ue(t,a,s){var n,u={},d=null,l=null;s!==void 0&&(d=""+s),a.key!==void 0&&(d=""+a.key),a.ref!==void 0&&(l=a.ref);for(n in a)st.call(a,n)&&!it.hasOwnProperty(n)&&(u[n]=a[n]);if(t&&t.defaultProps)for(n in a=t.defaultProps,a)u[n]===void 0&&(u[n]=a[n]);return{$$typeof:nt,type:t,key:d,ref:l,props:u,_owner:rt.current}}Ie.Fragment=at;Ie.jsx=Ue;Ie.jsxs=Ue;Oe.exports=Ie;var e=Oe.exports,_e,Ee=Ke;_e=Ee.createRoot,Ee.hydrateRoot;const ot=[{inputs:[{internalType:"address",name:"_centralStonerFeePool",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidERC721",type:"error"},{inputs:[],name:"InvalidShareRange",type:"error"},{inputs:[],name:"PoolAlreadyExists",type:"error"},{inputs:[],name:"PoolDoesNotExist",type:"error"},{inputs:[],name:"ZeroAddressNotAllowed",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"swapFeeInWei",type:"uint256"},{indexed:!1,internalType:"uint256",name:"stonerShare",type:"uint256"}],name:"DefaultFeesUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"centralStonerFeePool",type:"address"},{indexed:!0,internalType:"address",name:"deployer",type:"address"}],name:"FactoryDeployed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"nftCollection",type:"address"},{indexed:!0,internalType:"address",name:"swapPool",type:"address"}],name:"PoolDeactivated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"nftCollection",type:"address"},{indexed:!0,internalType:"address",name:"swapPool",type:"address"},{indexed:!0,internalType:"address",name:"stakeReceipt",type:"address"},{indexed:!1,internalType:"address",name:"creator",type:"address"}],name:"PoolPairCreated",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allCollections",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allPools",outputs:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"bool",name:"active",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"centralStonerFeePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"collectionToPool",outputs:[{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"bool",name:"exists",type:"bool"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"uint256",name:"customSwapFee",type:"uint256"},{internalType:"uint256",name:"customStonerShare",type:"uint256"}],name:"createPoolPair",outputs:[{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"}],name:"deactivatePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"defaultStonerShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"defaultSwapFeeInWei",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getActivePools",outputs:[{components:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"bool",name:"active",type:"bool"}],internalType:"struct MultiPoolFactoryNonProxy.PoolData[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllCollections",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllPools",outputs:[{components:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"bool",name:"active",type:"bool"}],internalType:"struct MultiPoolFactoryNonProxy.PoolData[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getFactoryStats",outputs:[{internalType:"uint256",name:"totalPools",type:"uint256"},{internalType:"address",name:"centralPool",type:"address"},{internalType:"uint256",name:"defaultFee",type:"uint256"},{internalType:"uint256",name:"defaultShare",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"collections",type:"address[]"}],name:"getMultiplePoolInfos",outputs:[{components:[{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"bool",name:"exists",type:"bool"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"}],internalType:"struct MultiPoolFactoryNonProxy.PoolInfo[]",name:"poolInfos",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"}],name:"getPoolInfo",outputs:[{components:[{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"},{internalType:"bool",name:"exists",type:"bool"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"}],internalType:"struct MultiPoolFactoryNonProxy.PoolInfo",name:"poolInfo",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"}],name:"poolExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"registerMe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"nftCollection",type:"address"},{internalType:"address",name:"swapPool",type:"address"},{internalType:"address",name:"stakeReceipt",type:"address"}],name:"registerPoolPair",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newSwapFeeInWei",type:"uint256"},{internalType:"uint256",name:"newStonerShare",type:"uint256"}],name:"setDefaultFees",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],be=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidURI",type:"error"},{inputs:[],name:"NonTransferable",type:"error"},{inputs:[],name:"OnlyPool",type:"error"},{inputs:[],name:"PoolAlreadySet",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"newBaseURI",type:"string"}],name:"BaseURIUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"pool",type:"address"}],name:"PoolSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"receiptTokenId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"originalTokenId",type:"uint256"}],name:"ReceiptBurned",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"originalTokenId",type:"uint256"}],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"originalTokenIds",type:"uint256[]"}],name:"batchMint",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"receiptTokenIds",type:"uint256[]"}],name:"batchBurn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserReceipts",outputs:[{internalType:"uint256[]",name:"receipts",type:"uint256[]"},{internalType:"uint256[]",name:"originalTokens",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"getOriginalTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"getReceiptInfo",outputs:[{internalType:"uint256",name:"originalTokenId",type:"uint256"},{internalType:"uint256",name:"mintTime",type:"uint256"},{internalType:"address",name:"originalMinter",type:"address"},{internalType:"uint256",name:"age",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserReceiptHistory",outputs:[{internalType:"uint256[]",name:"receiptIds",type:"uint256[]"},{internalType:"uint256[]",name:"originalTokenIds",type:"uint256[]"},{internalType:"uint256[]",name:"mintTimes",type:"uint256[]"},{internalType:"uint256[]",name:"ages",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCollectionTimeline",outputs:[{internalType:"uint256",name:"totalMinted",type:"uint256"},{internalType:"uint256",name:"totalBurned",type:"uint256"},{internalType:"uint256",name:"currentSupply",type:"uint256"},{internalType:"uint256",name:"averageAge",type:"uint256"},{internalType:"uint256",name:"oldestActive",type:"uint256"},{internalType:"uint256",name:"newestActive",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserReceiptPortfolio",outputs:[{internalType:"uint256",name:"totalReceipts",type:"uint256"},{internalType:"uint256",name:"averageHoldingTime",type:"uint256"},{internalType:"uint256",name:"totalOriginalValue",type:"uint256"},{internalType:"uint256[]",name:"receiptIds",type:"uint256[]"},{internalType:"uint256[]",name:"originalTokenIds",type:"uint256[]"},{internalType:"uint256[]",name:"holdingDurations",type:"uint256[]"},{internalType:"address[]",name:"poolAddresses",type:"address[]"},{internalType:"uint256",name:"oldestReceiptAge",type:"uint256"},{internalType:"uint256",name:"newestReceiptAge",type:"uint256"},{internalType:"bool",name:"hasLongTermHoldings",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"},{internalType:"address",name:"expectedPool",type:"address"}],name:"validateReceipt",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"uri",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_pool",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"registerMe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptToOriginalToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptMintTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptMinter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"approve",outputs:[],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"bool",name:"",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"}],fe=[{inputs:[{internalType:"address",name:"_nftCollection",type:"address"},{internalType:"address",name:"_receiptContract",type:"address"},{internalType:"address",name:"_stonerPool",type:"address"},{internalType:"uint256",name:"_swapFeeInWei",type:"uint256"},{internalType:"uint256",name:"_stonerShare",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AlreadyInitialized",type:"error"},{inputs:[],name:"IncorrectFee",type:"error"},{inputs:[],name:"InvalidReceiptToken",type:"error"},{inputs:[],name:"InvalidStonerShare",type:"error"},{inputs:[],name:"NoRewardsToClaim",type:"error"},{inputs:[],name:"NoTokensAvailable",type:"error"},{inputs:[],name:"NotInitialized",type:"error"},{inputs:[],name:"NotSlotOwner",type:"error"},{inputs:[],name:"NotTokenOwner",type:"error"},{inputs:[],name:"SameTokenSwap",type:"error"},{inputs:[],name:"SlotNotActive",type:"error"},{inputs:[],name:"TokenNotApproved",type:"error"},{inputs:[],name:"TokenUnavailable",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaxBatchSize",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newMaxUnstakeAll",type:"uint256"}],name:"BatchLimitsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"swapCount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalFeePaid",type:"uint256"}],name:"BatchSwapExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256[]",name:"receiptTokenIds",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"tokensReceived",type:"uint256[]"}],name:"BatchUnstaked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"stonerAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"rewardsAmount",type:"uint256"}],name:"FeeSplit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardsClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardsDistributed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"slotId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newShare",type:"uint256"}],name:"StonerShareUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenIdIn",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokenIdOut",type:"uint256"},{indexed:!1,internalType:"uint256",name:"slotId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"feePaid",type:"uint256"}],name:"SwapExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newFeeInWei",type:"uint256"}],name:"SwapFeeUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"slotId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"Unstaked",type:"event"},{inputs:[],name:"claimRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"emergencyWithdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"exit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getContractInfo",outputs:[{internalType:"address",name:"nft",type:"address"},{internalType:"address",name:"receipt",type:"address"},{internalType:"address",name:"stoner",type:"address"},{internalType:"uint256",name:"fee",type:"uint256"},{internalType:"uint256",name:"share",type:"uint256"},{internalType:"uint256",name:"poolSize",type:"uint256"},{internalType:"uint256",name:"stakedCount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPoolSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPoolTokens",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserActiveSlotCount",outputs:[{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserSlots",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserStakes",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"initialized",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastUpdateTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxBatchSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxUnstakeAllLimit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextSlotId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nftCollection",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"pure",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"pendingRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolSlots",outputs:[{internalType:"address",name:"originalStaker",type:"address"},{internalType:"uint256",name:"stakedAt",type:"uint256"},{internalType:"bool",name:"active",type:"bool"},{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"receiptContract",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptToSlot",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registerMe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardPerToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"newMaxBatchSize",type:"uint256"},{internalType:"uint256",name:"newMaxUnstakeAll",type:"uint256"}],name:"setBatchLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newShare",type:"uint256"}],name:"setStonerShare",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newFeeInWei",type:"uint256"}],name:"setSwapFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"stakeNFT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"stakeNFTBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stonerPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stonerShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"swapFeeInWei",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenIdIn",type:"uint256"}],name:"swapNFT",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIdsIn",type:"uint256[]"}],name:"swapNFTBatch",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenIndexInPool",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalActiveSlots",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalRewardsDistributed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unstakeAllNFTs",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"receiptTokenId",type:"uint256"}],name:"unstakeNFT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"receiptTokenIds",type:"uint256[]"}],name:"unstakeNFTBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"userSlots",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];function ke({image:t,tokenId:a,size:s=64}){const[n,u]=we.useState(!1),[d,l]=we.useState(!0);return!t||n?e.jsx("div",{style:{width:s,height:s},className:"bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800 rounded-lg flex items-center justify-center text-gray-600 dark:text-gray-400 text-xs font-mono border border-gray-300 dark:border-gray-600 shadow-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg mb-1",children:"ðŸ–¼ï¸"}),e.jsxs("div",{children:["#",a]})]})}):e.jsxs("div",{className:"relative",style:{width:s,height:s},children:[d&&e.jsx("div",{style:{width:s,height:s},className:"absolute inset-0 bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800 rounded-lg flex items-center justify-center animate-pulse",children:e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})}),e.jsx("img",{src:t,alt:`NFT #${a}`,style:{width:s,height:s},className:"rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 object-cover",onError:()=>u(!0),onLoad:()=>l(!1)})]})}function Me({count:t=6,size:a=56}){return e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:Array.from({length:t}).map((s,n)=>e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"shimmer rounded-xl border-2 border-gray-200 dark:border-gray-700 shadow-sm",style:{width:a+8,height:a+32},children:[e.jsx("div",{className:"bg-gray-300 dark:bg-gray-600 rounded-lg m-1 animate-pulse",style:{width:a,height:a}}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded mx-2 mt-2 animate-pulse"})]})},n))})}const ze=o.createContext(),Fe=()=>{const t=o.useContext(ze);if(!t)throw new Error("useToast must be used within a ToastProvider");return t};function lt({children:t}){const[a,s]=o.useState([]),n=o.useCallback((p,c="info",x=5e3,g=null)=>{const b=Date.now()+Math.random(),D={id:b,message:p,type:c,txHash:g,createdAt:Date.now()};return s(I=>[...I,D]),x>0&&setTimeout(()=>{s(I=>I.filter($=>$.id!==b))},x),b},[]),u=o.useCallback(p=>{s(c=>c.filter(x=>x.id!==p))},[]),d=o.useCallback((p,c=null,x=5e3)=>n(p,"success",x,c),[n]),l=o.useCallback((p,c=7e3)=>n(p,"error",c),[n]),h=o.useCallback((p,c=5e3)=>n(p,"info",c),[n]),r=o.useCallback((p,c=null)=>n(p,"loading",0,c),[n]);return e.jsxs(ze.Provider,{value:{success:d,error:l,info:h,loading:r,removeToast:u},children:[t,e.jsx(dt,{toasts:a,onRemove:u})]})}function dt({toasts:t,onRemove:a}){return e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 pointer-events-none",children:t.map(s=>e.jsx(ct,{toast:s,onRemove:a},s.id))})}function ct({toast:t,onRemove:a}){const s=()=>{switch(t.type){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200";case"loading":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200";default:return"bg-gray-50 dark:bg-gray-900/20 border-gray-200 dark:border-gray-800 text-gray-800 dark:text-gray-200"}},n=()=>{switch(t.type){case"success":return e.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})});case"error":return e.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})});case"loading":return e.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"});default:return e.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"â„¹"})})}};return e.jsx("div",{className:`max-w-md w-full p-4 rounded-xl border shadow-lg backdrop-blur-sm pointer-events-auto transform transition-all duration-300 animate-slide-in ${s()}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[n(),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium leading-relaxed",children:t.message}),t.txHash&&e.jsx("a",{href:`https://explorer.sonic.org/tx/${t.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs underline opacity-75 hover:opacity-100 transition-opacity mt-1 inline-block",children:"View Transaction â†’"})]}),e.jsx("button",{onClick:()=>a(t.id),className:"opacity-50 hover:opacity-100 transition-opacity",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}function ut(){const[t,a]=o.useState({}),s=Fe();return{startTransaction:(p,c="Transaction pending...")=>{const x=s.loading(c);a(g=>({...g,[p]:{status:"pending",message:c,toastId:x,startTime:Date.now()}}))},updateTransaction:(p,c,x)=>{a(g=>{const b=g[p];if(!b)return g;s.removeToast(b.toastId);const D=s.success(x,c);return{...g,[p]:{...b,status:"success",txHash:c,message:x,toastId:D}}})},failTransaction:(p,c)=>{a(x=>{const g=x[p];if(!g)return x;s.removeToast(g.toastId);let b="Transaction failed";c!=null&&c.message&&(c.message.includes("user rejected")?b="Transaction cancelled by user":c.message.includes("insufficient funds")?b="Insufficient funds for transaction":b=c.message);const D=s.error(b);return{...x,[p]:{...g,status:"failed",message:b,toastId:D}}})},clearTransaction:p=>{a(c=>{const x=c[p];x!=null&&x.toastId&&s.removeToast(x.toastId);const{[p]:g,...b}=c;return b})},isTransactionPending:p=>{var c;return((c=t[p])==null?void 0:c.status)==="pending"},getTransactionState:p=>t[p]||null}}function De(){const t=ut();return Fe(),{...t,executeTransaction:async(s,n,u={})=>{const{pendingMessage:d="Transaction pending...",successMessage:l="Transaction successful!",onSuccess:h,onError:r}=u;try{t.startTransaction(s,d);const p=await n();let c=null,x=l;if(p!=null&&p.hash&&(c=p.hash,p.wait&&(await p.wait()).status===0))throw new Error("Transaction failed during execution");return t.updateTransaction(s,c,x),h&&h(p),p}catch(p){throw console.error(`Transaction ${s} failed:`,p),t.failTransaction(s,p),r&&r(p),p}}}}function pt({walletNFTs:t,poolNFTs:a,loading:s,onSwap:n,status:u}){const[d,l]=o.useState([]),h=Fe(),{executeTransaction:r,isTransactionPending:p}=De(),c=async()=>{if(d.length===0){h.error("Please select NFTs to swap");return}try{await r("swap",()=>n(d),{pendingMessage:`Swapping ${d.length} NFT${d.length>1?"s":""}...`,successMessage:`Successfully swapped ${d.length} NFT${d.length>1?"s":""}!`,onSuccess:()=>{l([])},onError:g=>{console.error("Swap failed:",g)}})}catch{}},x=p("swap");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 1H4m0 0l4 4M4 12l4-4"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent",children:"Swap Your NFTs"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Exchange your NFTs with those available in the pool"})]})]})}),e.jsx("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Selected for Swap:"}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${d.length>8?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 border border-yellow-300":d.length>0?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border border-blue-300":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 border border-gray-300"}`,children:[d.length,"/10 NFTs"]})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:"ðŸ“¦ Max 10 NFTs per batch"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:["Your NFTs (",t.length,")"]})]}),e.jsx("div",{className:"min-h-[120px] bg-white/75 dark:bg-gray-800/75 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:s?e.jsx(Me,{count:6,size:64}):t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ–¼ï¸"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No NFTs found in your wallet"})]}):e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:t.map(g=>e.jsxs("button",{className:`relative border-2 rounded-xl p-2 bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 shadow-sm transition-all duration-200 ${d.includes(g.tokenId)?"border-blue-400 scale-105 ring-2 ring-blue-400/50 shadow-lg":"border-gray-200 dark:border-gray-700 hover:border-blue-300 hover:shadow-md"} ${d.length>=10&&!d.includes(g.tokenId)?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>{d.includes(g.tokenId)?l(b=>b.filter(D=>D!==g.tokenId)):d.length<10&&l(b=>[...b,g.tokenId])},disabled:s||d.length>=10&&!d.includes(g.tokenId),children:[e.jsx(ke,{image:g.image,tokenId:g.tokenId,size:64}),e.jsxs("div",{className:"text-xs text-center mt-2 font-mono text-gray-600 dark:text-gray-400",children:["#",g.tokenId]}),d.includes(g.tokenId)&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},g.tokenId))})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:["Available in Pool (",a.length,")"]})]}),e.jsx("div",{className:"min-h-[120px] bg-white/75 dark:bg-gray-800/75 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:s?e.jsx(Me,{count:6,size:64}):a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸŠâ€â™‚ï¸"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Pool is empty - stake NFTs first to enable swapping"})]}):e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:a.map(g=>e.jsxs("div",{className:"border-2 border-gray-200 dark:border-gray-700 rounded-xl p-2 bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 shadow-sm",children:[e.jsx(ke,{image:g.image,tokenId:g.tokenId,size:64}),e.jsxs("div",{className:"text-xs text-center mt-2 font-mono text-gray-600 dark:text-gray-400",children:["#",g.tokenId]})]},g.tokenId))})})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-4",children:[e.jsx("button",{className:`flex-1 px-6 py-4 text-white rounded-xl shadow-lg font-semibold text-lg tracking-wide transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 ${a.length===0?"bg-gradient-to-r from-gray-400 to-gray-500 cursor-not-allowed":x?"bg-gradient-to-r from-blue-400 to-indigo-400 animate-pulse-glow":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 hover:shadow-xl hover:scale-105"}`,onClick:c,disabled:x||d.length===0||a.length===0,title:a.length===0?"Pool is empty - stake NFTs first to enable swapping":"",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"loading-dots",children:"Swapping"})]}):a.length===0?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Pool Empty - Stake NFTs First"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 1H4m0 0l4 4M4 12l4-4"})}),"Swap Selected NFTs (",d.length,")"]})}),d.length>0&&!x&&e.jsxs("button",{className:"px-4 py-4 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl shadow hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",onClick:()=>l([]),children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]})]}),u&&e.jsx("div",{className:`p-4 rounded-xl border transition-all duration-300 ${u.includes("successful")||u.includes("Swap successful")?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200":u.includes("failed")||u.includes("error")||u.includes("âŒ")?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200":u.includes("Swapping")?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200":"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:u.includes("successful")||u.includes("Swap successful")?e.jsx("div",{className:"w-5 h-5 bg-emerald-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}):u.includes("failed")||u.includes("error")||u.includes("âŒ")?e.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}):u.includes("Swapping")?e.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):e.jsx("div",{className:"w-5 h-5 bg-amber-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm leading-5",children:u}),u.includes("Swapping")&&e.jsx("div",{className:"text-xs opacity-75 mt-1",children:"This may take a few moments to complete..."})]})]})})]})}function mt({nftAddress:t,tokenId:a,spender:s,provider:n,onApproved:u,disabled:d}){const[l,h]=o.useState(!1),[r,p]=o.useState(!1),[c,x]=o.useState("");o.useEffect(()=>{if(p(!1),x(""),!t||!a||!s||!n)return;(async()=>{try{const I=await new B(t,["function getApproved(uint256) view returns (address)","function approve(address,uint256) external"],n).getApproved(a);p(I.toLowerCase()===s.toLowerCase())}catch{x("Failed to check approval")}})()},[t,a,s,n]);const g=async()=>{h(!0),x("");try{if(!window.ethereum)throw new Error("Wallet not found");const b=new Ne(window.ethereum).getSigner();await(await new B(t,["function approve(address,uint256) external"],await b).approve(s,a)).wait(),p(!0),u&&u()}catch(b){x(b.reason||b.message)}h(!1)};return a?r?e.jsxs("div",{className:"flex items-center gap-1 ml-2 px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-lg text-xs font-medium border border-green-200 dark:border-green-700",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Approved"]}):e.jsx("button",{className:"ml-2 px-3 py-1.5 bg-gradient-to-r from-indigo-500 to-blue-500 hover:from-indigo-600 hover:to-blue-600 text-white rounded-lg text-xs font-medium shadow-sm transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",onClick:g,disabled:l||d,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin"}),"Approving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Approve"]})}):null}function yt({walletNFTs:t,receiptNFTs:a,stakedNFTs:s,loading:n,receiptLoading:u,onStake:d,onUnstake:l,onClaimRewards:h,status:r,approvedMap:p,isApprovedForAll:c,onApproveAll:x,approvingAll:g,nftCollection:b,swapPool:D,provider:I,pendingRewards:$="0"}){const[E,Z]=o.useState([]),[O,oe]=o.useState([]),J=Fe(),{executeTransaction:se,isTransactionPending:re}=De(),le=async()=>{if(E.length===0){J.error("Please select NFTs to stake");return}try{await se("stake",()=>d(E),{pendingMessage:`Staking ${E.length} NFT${E.length>1?"s":""}...`,successMessage:`Successfully staked ${E.length} NFT${E.length>1?"s":""}!`,onSuccess:()=>{Z([])}})}catch{}},Y=async()=>{if(O.length===0){J.error("Please select staked NFTs to unstake");return}try{await se("unstake",()=>l(O),{pendingMessage:`Unstaking ${O.length} NFT${O.length>1?"s":""}...`,successMessage:`Successfully unstaked ${O.length} NFT${O.length>1?"s":""}!`,onSuccess:()=>{oe([])}})}catch{}},de=async()=>{if($==="0"||$==="0.0"){J.info("No rewards to claim at the moment");return}try{await se("claim",()=>h(),{pendingMessage:"Claiming rewards...",successMessage:`Successfully claimed ${$} S tokens!`})}catch{}},te=E.length>0&&E.every(F=>p[F]||c),K=re("stake"),ne=re("unstake"),ie=re("claim");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent",children:"Stake Your NFTs"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Stake NFTs to earn rewards and contribute to the swap pool"})]})]})}),s.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20 rounded-xl p-6 border border-yellow-200 dark:border-yellow-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-yellow-500 to-amber-500 rounded-xl flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"ðŸ’°"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-800 dark:text-yellow-200",children:"Staking Rewards"}),e.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Earn from swap fees and trading activity"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-3xl font-bold text-yellow-800 dark:text-yellow-200",children:[parseFloat($).toFixed(4)," S"]}),e.jsx("div",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Pending Rewards"})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-yellow-600/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-500/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-yellow-400 text-sm",children:"ðŸ’Ž"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-yellow-200",children:"Swap Fee Earnings"}),e.jsx("div",{className:"text-xs text-yellow-300/70",children:"From your staked NFTs generating trading fees"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-yellow-200",children:[s.length," NFT",s.length!==1?"s":""]}),e.jsx("div",{className:"text-xs text-yellow-300/70",children:"Currently Staked"})]})]}),e.jsx("button",{onClick:de,disabled:ie||parseFloat($)===0,className:`w-full px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 ${ie?"bg-gradient-to-r from-yellow-400 to-amber-400 animate-pulse-glow":"bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-600 hover:to-amber-600"}`,children:ie?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"loading-dots",children:"Claiming"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),parseFloat($)>0?`Claim ${parseFloat($).toFixed(4)} S`:"No Rewards Available"]})})]}),parseFloat($)===0&&s.length>0&&e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-xs text-yellow-300/60 bg-yellow-900/30 px-3 py-2 rounded-lg border border-yellow-700/30",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Rewards accumulate as users swap NFTs in this pool. Check back later!"]})})]}),e.jsx("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Selected to Stake:"}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${E.length>0?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 border border-green-300":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 border border-gray-300"}`,children:[E.length," NFTs"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Selected to Unstake:"}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${O.length>0?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border border-red-300":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 border border-gray-300"}`,children:[O.length," NFTs"]})]})]})}),t.length>0&&!c&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border border-blue-200 dark:border-blue-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"Approval Required"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Approve all NFTs for easier staking"})]})]}),e.jsx("button",{onClick:x,disabled:g,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Approving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Approve All"]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:["Available to Stake (",t.length,")"]})]}),e.jsx("div",{className:"min-h-[120px] bg-white/75 dark:bg-gray-800/75 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:n?e.jsx(Me,{count:6,size:64}):t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ–¼ï¸"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No NFTs available to stake"})]}):e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:t.map(F=>e.jsxs("div",{className:"relative",children:[e.jsxs("button",{className:`relative border-2 rounded-xl p-2 bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 shadow-sm transition-all duration-200 w-full ${E.includes(F.tokenId)?"border-green-400 scale-105 ring-2 ring-green-400/50 shadow-lg":"border-gray-200 dark:border-gray-700 hover:border-green-300 hover:shadow-md"}`,onClick:()=>{E.includes(F.tokenId)?Z(H=>H.filter(me=>me!==F.tokenId)):Z(H=>[...H,F.tokenId])},disabled:n,children:[e.jsx(ke,{image:F.image,tokenId:F.tokenId,size:64}),e.jsxs("div",{className:"text-xs text-center mt-2 font-mono text-gray-600 dark:text-gray-400",children:["#",F.tokenId]}),E.includes(F.tokenId)&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),!c&&!p[F.tokenId]&&E.includes(F.tokenId)&&e.jsx("div",{className:"mt-2",children:e.jsx(mt,{nftAddress:b,tokenId:F.tokenId,spender:D,provider:I,disabled:n})})]},F.tokenId))})})]}),a.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-yellow-500 to-amber-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:["Currently Staked (",a.length,")"]})]}),e.jsx("div",{className:"min-h-[120px] bg-white/75 dark:bg-gray-800/75 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:u?e.jsx(Me,{count:6,size:64}):e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3",children:a.map(F=>e.jsxs("button",{className:`relative border-2 rounded-xl p-2 bg-gradient-to-br from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20 shadow-sm transition-all duration-200 ${O.includes(F.tokenId)?"border-red-400 scale-105 ring-2 ring-red-400/50 shadow-lg":"border-yellow-200 dark:border-yellow-700 hover:border-red-300 hover:shadow-md"}`,onClick:()=>{O.includes(F.tokenId)?oe(H=>H.filter(me=>me!==F.tokenId)):oe(H=>[...H,F.tokenId])},disabled:n,children:[e.jsx(ke,{image:F.image,tokenId:F.tokenId,size:64}),e.jsxs("div",{className:"text-xs text-center mt-2 font-mono text-yellow-700 dark:text-yellow-300",children:["#",F.tokenId]}),O.includes(F.tokenId)&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("div",{className:"absolute -bottom-1 -left-1 bg-yellow-500 text-white text-xs px-1 py-0.5 rounded text-[10px] font-bold",children:"STAKED"})]},F.tokenId))})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:`w-full px-6 py-4 text-white rounded-xl shadow-lg font-semibold text-lg tracking-wide transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 ${E.length===0||!te?"bg-gradient-to-r from-gray-400 to-gray-500 cursor-not-allowed":K?"bg-gradient-to-r from-green-400 to-emerald-400 animate-pulse-glow":"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 hover:shadow-xl hover:scale-105"}`,onClick:le,disabled:K||E.length===0||!te,children:K?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"loading-dots",children:"Staking"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Stake Selected (",E.length,")"]})}),E.length>0&&e.jsxs("button",{className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center justify-center gap-2",onClick:()=>Z([]),disabled:n,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear Selection"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:`w-full px-6 py-4 text-white rounded-xl shadow-lg font-semibold text-lg tracking-wide transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 ${O.length===0?"bg-gradient-to-r from-gray-400 to-gray-500 cursor-not-allowed":ne?"bg-gradient-to-r from-red-400 to-pink-400 animate-pulse-glow":"bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 hover:shadow-xl hover:scale-105"}`,onClick:Y,disabled:ne||O.length===0,children:ne?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"loading-dots",children:"Unstaking"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Unstake Selected (",O.length,")"]})}),O.length>0&&e.jsxs("button",{className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center justify-center gap-2",onClick:()=>oe([]),disabled:n,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear Selection"]})]})]}),r&&e.jsx("div",{className:`p-4 rounded-xl border transition-all duration-300 ${r.includes("successful")||r.includes("claimed")||r.includes("Stake successful")||r.includes("Unstake successful")||r.includes("Rewards claimed")?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200":r.includes("failed")||r.includes("error")||r.includes("âŒ")||r.includes("Cannot")?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200":r.includes("Staking...")||r.includes("Unstaking...")||r.includes("Claiming")?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200":"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.includes("successful")||r.includes("claimed")||r.includes("Stake successful")||r.includes("Unstake successful")||r.includes("Rewards claimed")?e.jsx("div",{className:"w-5 h-5 bg-emerald-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}):r.includes("failed")||r.includes("error")||r.includes("âŒ")||r.includes("Cannot")?e.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}):r.includes("Staking...")||r.includes("Unstaking...")||r.includes("Claiming")?e.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):e.jsx("div",{className:"w-5 h-5 bg-amber-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm leading-5",children:r}),(r.includes("Staking...")||r.includes("Unstaking...")||r.includes("Claiming"))&&e.jsx("div",{className:"text-xs opacity-75 mt-1",children:"This may take a few moments to complete..."})]})]})})]})}const Ve=o.createContext(),Re=()=>{const t=o.useContext(Ve);if(!t)throw new Error("useWallet must be used within a WalletProvider");return t},xt=({children:t})=>{const[a,s]=o.useState(""),[n,u]=o.useState(null),[d,l]=o.useState(null),[h,r]=o.useState(!1),[p,c]=o.useState(!1);o.useEffect(()=>{(async()=>{if(window.ethereum)try{(await window.ethereum.request({method:"eth_accounts"})).length>0&&await x()}catch{console.log("No existing wallet connection found")}})()},[]),o.useEffect(()=>{const I=async E=>{E.length===0?g():E[0]!==a&&await x()},$=()=>{window.location.reload()};return window.ethereum&&(window.ethereum.on("accountsChanged",I),window.ethereum.on("chainChanged",$)),()=>{window.ethereum&&(window.ethereum.removeListener("accountsChanged",I),window.ethereum.removeListener("chainChanged",$))}},[a]);const x=async()=>{if(!window.ethereum)throw new Error("Please install MetaMask or another wallet");r(!0);try{await window.ethereum.request({method:"eth_requestAccounts"});const I=new Ne(window.ethereum),$=await I.getSigner(),E=await $.getAddress(),Z=await I.getNetwork(),O=Z.chainId===146n;return u(I),l($),s(E),c(O),console.log(`ðŸ”— Wallet connected: ${E}`),console.log(`ðŸŒ Network: ${Z.name} (${Z.chainId})`),O||console.warn("âš ï¸ Not on Sonic network"),{address:E,provider:I,signer:$,isCorrectNetwork:O}}catch(I){throw console.error("Wallet connection failed:",I),I}finally{r(!1)}},g=()=>{s(""),u(null),l(null),c(!1),console.log("ðŸ”Œ Wallet disconnected")},D={address:a,provider:n,signer:d,isConnecting:h,isCorrectNetwork:p,connectWallet:x,disconnect:g,switchToSonicNetwork:async()=>{if(!window.ethereum)return!1;try{return await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x92"}]}),!0}catch(I){if(I.code===4902)try{return await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x92",chainName:"Sonic Network",nativeCurrency:{name:"Sonic",symbol:"S",decimals:18},rpcUrls:["https://rpc.soniclabs.com/"],blockExplorerUrls:["https://explorer.soniclabs.com/"]}]}),!0}catch($){return console.error("Failed to add Sonic network:",$),!1}return console.error("Failed to switch to Sonic network:",I),!1}},isConnected:!!a};return e.jsx(Ve.Provider,{value:D,children:t})};function ht({swapPool:t,stakeReceipt:a,provider:s}){const{account:n,isConnected:u}=Re(),[d,l]=o.useState(null),[h,r]=o.useState(""),[p,c]=o.useState(!1),[x,g]=o.useState([]),[b,D]=o.useState({}),[I,$]=o.useState(null),[E,Z]=o.useState(!1),[O,oe]=o.useState(!1),[J,se]=o.useState([]),[re,le]=o.useState([]),[Y,de]=o.useState([]),[te,K]=o.useState(!1),[ne,ie]=o.useState(!1),[F,H]=o.useState(!1),[me,Q]=o.useState(null),[Se,ye]=o.useState("0"),i=async()=>{if(!window.ethereum)throw new Error("Wallet not found");return new Ne(window.ethereum).getSigner()},C=async y=>{c(!0),r("Swapping NFTs...");try{const v=await i();await(await new B(t,fe,v).swapNFTs(y)).wait(),r("Swap successful! âœ…"),await N()}catch(v){r(`Swap failed: ${v.reason||v.message}`)}c(!1)},U=async y=>{c(!0),r("Staking NFTs...");try{const v=await i();await(await new B(t,fe,v).stakeNFTs(y)).wait(),r("Stake successful! âœ…"),await N()}catch(v){r(`Stake failed: ${v.reason||v.message}`)}c(!1)},G=async y=>{c(!0),r("Unstaking NFTs...");try{const v=await i();await(await new B(a,be,v).unstakeNFTs(y)).wait(),r("Unstake successful! âœ…"),await N()}catch(v){r(`Unstake failed: ${v.reason||v.message}`)}c(!1)},m=async()=>{c(!0),r("Claiming rewards...");try{const y=await i();await(await new B(a,be,y).claimRewards()).wait(),r("Rewards claimed successfully! âœ…"),await N()}catch(y){r(`Claim failed: ${y.reason||y.message}`)}c(!1)},M=async()=>{oe(!0);try{const y=await i();await(await new B(I,["function setApprovalForAll(address,bool) external"],y).setApprovalForAll(t,!0)).wait(),Z(!0),r("Approval successful! You can now stake NFTs.")}catch(y){r(`Approval failed: ${y.reason||y.message}`)}oe(!1)},N=async()=>{console.log("Refreshing NFT data...",{account:n,isConnected:u}),K(!0),ie(!0),H(!0),g([]),le([]),de([]),await new Promise(v=>setTimeout(v,100));const y=s||(window.ethereum?new Ne(window.ethereum):null);if(!y){console.warn("No provider available for NFT fetching"),K(!1),ie(!1),H(!1);return}if(!u||!n){console.log("No wallet connected, fetching pool NFTs only"),g([]),K(!1),le([]),ie(!1),se([]),await A(y);return}console.log("Wallet connected, fetching all NFT data for:",n),await Promise.all([S(n,y),w(n,y),A(y),V(n,y)]),await _()},S=async(y,v)=>{try{const j=await new B(t,fe,v).nftCollection();if($(j),!j){console.log("âŒ Could not get NFT collection address from SwapPool"),g([]),K(!1);return}const R=new B(j,["function balanceOf(address) view returns (uint256)","function ownerOf(uint256) view returns (address)","function tokenOfOwnerByIndex(address,uint256) view returns (uint256)","function tokenURI(uint256) view returns (string)","function getApproved(uint256) view returns (address)","function isApprovedForAll(address,address) view returns (bool)","function totalSupply() view returns (uint256)"],v),k=await R.balanceOf(y),L=Number(k);if(console.log(`ðŸŽ¯ Collection NFT Balance for ${y}: ${L}`),L===0){console.log("ðŸ“­ No NFTs owned by user (balance=0)"),g([]),D({}),K(!1);return}let P=!1;try{P=await R.isApprovedForAll(y,t)}catch{}Z(!!P);let f=[];if(L>0&&L<=1e3)try{console.log(`ðŸ” Trying enumerable approach for ${k.toString()} tokens...`);const z=[];for(let ee=0;ee<L;ee++)z.push(R.tokenOfOwnerByIndex(y,ee));f=await Promise.all(z),console.log("âœ… Enumerable approach successful, found tokens:",f.map(ee=>ee.toString()))}catch{console.log("âŒ tokenOfOwnerByIndex not supported, using fallback scan"),f=[]}if(f.length===0){console.log("ðŸŽ¯ Starting direct ownership scan...");let z=2e3;try{const ae=await R.totalSupply();z=Math.min(Number(ae)+100,2e3),console.log(`ðŸ“ˆ Total supply: ${ae.toString()}, scanning up to token ${z}`)}catch{console.log(`ðŸ“ˆ Total supply not available, scanning up to token ${z}`)}const ee=new Set,xe=20;let ce=0;const he=Number(L);for(let ae=1;ae<=z&&ce<he;ae+=xe){const Te=Math.min(ae+xe-1,z),je=[];for(let ue=ae;ue<=Te;ue++)je.push(R.ownerOf(ue).then(Ce=>({tokenId:ue,owner:Ce.toLowerCase()})).catch(()=>({tokenId:ue,owner:null})));try{const ue=await Promise.all(je);for(const{tokenId:Ce,owner:Ye}of ue)if(Ye===y.toLowerCase()&&(ee.add(Ce.toString()),ce++,console.log(`âœ… Found owned token: #${Ce} (${ce}/${he})`),ce>=he))break}catch(ue){console.warn(`Batch ${ae}-${Te} failed:`,ue.message)}if(ce>=he)break;await new Promise(ue=>setTimeout(ue,50))}f=Array.from(ee).map(ae=>BigInt(ae)),console.log(`âœ… Direct ownership scan complete, found ${f.length} tokens`)}const W=f.map(async z=>{try{const ee=z.toString();let xe="",ce="";try{if(xe=await R.tokenURI(z),xe){let ae=xe;xe.startsWith("ipfs://")&&(ae=xe.replace("ipfs://","https://ipfs.io/ipfs/"));try{const je=await(await fetch(ae)).json();je.image&&(ce=je.image,ce.startsWith("ipfs://")&&(ce=ce.replace("ipfs://","https://ipfs.io/ipfs/")))}catch(Te){console.warn(`Failed to fetch metadata for wallet token ${z}:`,Te)}}}catch{}let he=!1;try{he=(await R.getApproved(z)).toLowerCase()===t.toLowerCase()}catch{}return{tokenId:ee,image:ce||"",approved:he}}catch(ee){return console.warn(`Failed to fetch metadata for token ${z}:`,ee),{tokenId:z.toString(),image:"",approved:!1}}}),q=await Promise.all(W);console.log("ðŸ“¦ Wallet NFTs loaded:",q.length);const X={};q.forEach(z=>{X[z.tokenId]=z.approved}),g(q),D(X)}catch(T){console.error("Failed to fetch wallet NFTs:",T),g([]),D({})}finally{K(!1)}},w=async(y,v)=>{try{const T=new B(a,["function balanceOf(address) view returns (uint256)","function tokenOfOwnerByIndex(address,uint256) view returns (uint256)","function tokenURI(uint256) view returns (string)","function receiptToOriginalToken(uint256) view returns (uint256)"],v),j=await T.balanceOf(y),R=[];for(let k=0;k<Number(j);k++)try{const L=await T.tokenOfOwnerByIndex(y,k),P=await T.receiptToOriginalToken(L);let f="",W="";try{if(f=await T.tokenURI(L),f){let q=f;f.startsWith("ipfs://")&&(q=f.replace("ipfs://","https://ipfs.io/ipfs/"));try{const z=await(await fetch(q)).json();z.image&&(W=z.image,W.startsWith("ipfs://")&&(W=W.replace("ipfs://","https://ipfs.io/ipfs/")))}catch(X){console.warn(`Failed to fetch metadata for receipt token ${L}:`,X)}}}catch{}R.push({tokenId:L.toString(),originalTokenId:P.toString(),image:W||""})}catch(L){console.warn(`Failed to fetch receipt token ${k}:`,L)}console.log("ðŸ§¾ Receipt NFTs loaded:",R.length),le(R)}catch(T){console.error("Failed to fetch receipt NFTs:",T),le([])}finally{ie(!1)}},A=async y=>{try{console.log("ðŸŠ Fetching pool NFTs for pool:",t);const v=new B(t,fe,y),T=await v.getPoolTokens();console.log("ðŸŠ Pool token IDs:",T);const j=await v.nftCollection();if(console.log("ðŸŠ Collection address:",j),!j){console.warn("ðŸŠ No collection address found"),de([]),H(!1);return}const R=new B(j,["function tokenURI(uint256) view returns (string)"],y),k=T.map(async P=>{try{let f="",W="";try{if(f=await R.tokenURI(P),console.log(`ðŸŠ Token ${P} URI:`,f),f){let q=f;f.startsWith("ipfs://")&&(q=f.replace("ipfs://","https://ipfs.io/ipfs/"));try{const z=await(await fetch(q)).json();z.image&&(W=z.image,W.startsWith("ipfs://")&&(W=W.replace("ipfs://","https://ipfs.io/ipfs/"))),console.log(`ðŸŠ Token ${P} image:`,W)}catch(X){console.warn(`Failed to fetch metadata for token ${P}:`,X)}}}catch(q){console.warn(`Failed to get tokenURI for token ${P}:`,q)}return{tokenId:P.toString(),image:W||""}}catch(f){return console.warn(`Failed to fetch pool NFT metadata for token ${P}:`,f),{tokenId:P.toString(),image:""}}}),L=await Promise.all(k);console.log("ðŸŠ Pool NFTs loaded:",L.length),de(L)}catch(v){console.error("Failed to fetch pool NFTs:",v),de([])}finally{H(!1)}},V=async(y,v)=>{try{const j=await new B(t,fe,v).getUserStakes(y);se(j.map(R=>R.toString())),console.log("ðŸ”’ Staked NFTs loaded:",j.length)}catch(T){console.error("Failed to fetch staked NFTs:",T),se([])}},_=async()=>{if(!n||!a||!u){ye("0");return}try{const y=await i(),v=new B(a,be,y);if(v.earned){const T=await v.earned(n);ye(ve(T))}else{const T=await v.pendingRewards(n);ye(ve(T))}}catch(y){console.warn("Failed to fetch pending rewards:",y),ye("0")}};return o.useEffect(()=>{t&&(N(),_())},[t,a]),o.useEffect(()=>{t&&s&&N()},[s]),o.useEffect(()=>{t&&(console.log("Wallet connection changed:",{account:n,isConnected:u}),N(),_())},[n,u,t,a]),o.useEffect(()=>{const y=setInterval(()=>{_()},3e4);return()=>clearInterval(y)},[n,a]),d==="swap"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("button",{onClick:()=>l(null),className:"inline-flex items-center gap-2 px-4 py-2.5 text-sm font-medium bg-gray-500 hover:bg-gray-600 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Actions"]}),e.jsx(pt,{walletNFTs:x,poolNFTs:Y,loading:p||te||F,onSwap:C,status:h})]}):d==="stake"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("button",{onClick:()=>l(null),className:"inline-flex items-center gap-2 px-4 py-2.5 text-sm font-medium bg-gray-500 hover:bg-gray-600 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Actions"]}),e.jsx(yt,{walletNFTs:x,receiptNFTs:re,stakedNFTs:J,loading:p,receiptLoading:ne,onStake:U,onUnstake:G,onClaimRewards:m,status:h,approvedMap:b,isApprovedForAll:E,onApproveAll:M,approvingAll:O,nftCollection:I,swapPool:t,provider:s,pendingRewards:Se})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 via-blue-500 to-teal-400 bg-clip-text text-transparent mb-4",children:"What would you like to do?"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"Choose your action to get started with the swap pool"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx("div",{className:"group",children:e.jsx("button",{onClick:()=>l("swap"),className:"w-full p-8 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-2xl border-2 border-blue-200 dark:border-blue-700 hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-300 hover:shadow-xl hover:shadow-blue-500/20 group-hover:scale-105",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow",children:e.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 1H4m0 0l4 4M4 12l4-4"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-blue-800 dark:text-blue-200 mb-2",children:"Swap NFTs"}),e.jsx("p",{className:"text-blue-600 dark:text-blue-400 leading-relaxed",children:"Exchange your NFTs with those available in the pool. Perfect for finding specific traits or collecting new pieces."})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400 font-medium",children:[e.jsx("span",{children:"Start Swapping"}),e.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-blue-500 dark:text-blue-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Instant Trading"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2z",clipRule:"evenodd"})}),e.jsx("span",{children:"Secure Exchange"})]})]})]})})}),e.jsx("div",{className:"group",children:e.jsx("button",{onClick:()=>l("stake"),className:"w-full p-8 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-2xl border-2 border-green-200 dark:border-green-700 hover:border-green-400 dark:hover:border-green-500 transition-all duration-300 hover:shadow-xl hover:shadow-green-500/20 group-hover:scale-105",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow",children:e.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-green-800 dark:text-green-200 mb-2",children:"Stake NFTs"}),e.jsx("p",{className:"text-green-600 dark:text-green-400 leading-relaxed",children:"Stake your NFTs to earn rewards from swap fees and contribute to pool liquidity. Passive income from your collection."})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400 font-medium",children:[e.jsx("span",{children:"Start Earning"}),e.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-green-500 dark:text-green-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}),e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z",clipRule:"evenodd"})]}),e.jsx("span",{children:"Earn Rewards"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{children:"Pool Liquidity"})]})]})]})})})]}),e.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 text-center",children:"Pool Overview"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:Y.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Available to Swap"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:J.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Currently Staked"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:x.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"In Your Wallet"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:re.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Your Receipts"})]})]})]}),h&&e.jsx("div",{className:`p-4 rounded-xl border transition-all duration-300 ${h.includes("successful")||h.includes("âœ…")?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200":h.includes("failed")||h.includes("error")?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200"}`,children:e.jsx("div",{className:"text-center font-medium",children:h})})]})}const gt={"0xB6748d708B5Cda0eA8c53e7072566971FCCb6b49":"https://nftstorage.link/stoner.png","0xE3941DB58B9D35410A66636da07c9B28b878B89E":"https://nftstorage.link/boat.png"};function ft(t){if(!t)return"from-gray-400 to-gray-600";const a=t.split("").reduce((n,u)=>u.charCodeAt(0)+((n<<5)-n),0),s=["from-blue-400 to-purple-600","from-purple-400 to-pink-600","from-pink-400 to-red-600","from-red-400 to-orange-600","from-orange-400 to-yellow-600","from-yellow-400 to-green-600","from-green-400 to-teal-600","from-teal-400 to-blue-600","from-indigo-400 to-purple-600","from-violet-400 to-pink-600","from-cyan-400 to-blue-600","from-emerald-400 to-teal-600"];return s[Math.abs(a)%s.length]}function bt(t){if(!t||t==="Unknown Collection"||t==="Loading...")return"?";const a=t.trim().split(/\s+/);return a.length===1?a[0].substring(0,2).toUpperCase():a.slice(0,2).map(s=>s.charAt(0).toUpperCase()).join("")}function He({address:t,collectionName:a,size:s=48}){const[n,u]=we.useState(!1),[d,l]=we.useState(!0),h=gt[t==null?void 0:t.toLowerCase()];if(!h||n){const r=bt(a),p=ft(a||t),c=s<=32?"text-xs":s<=48?"text-sm":"text-base";return e.jsx("div",{style:{width:s,height:s},className:`bg-gradient-to-br ${p} rounded-lg flex items-center justify-center text-white font-bold ${c} shadow-lg`,children:r})}return e.jsxs("div",{className:"relative",children:[d&&e.jsx("div",{style:{width:s,height:s},className:"absolute inset-0 bg-gray-300 rounded animate-pulse"}),e.jsx("img",{src:h,alt:"NFT Collection",style:{width:s,height:s,borderRadius:8},onError:()=>u(!0),onLoad:()=>l(!1),className:d?"opacity-0":"opacity-100"})]})}function wt({pool:t,collectionName:a,onClose:s,provider:n}){const[u,d]=o.useState(null);return o.useEffect(()=>{(async()=>{try{if(!n||!t.swapPool)return;const r=await new B(t.swapPool,fe,n).swapFeeInWei(),p=ve(r);d(p)}catch(h){console.error("Error fetching pool fee:",h),d("N/A")}})()},[t.swapPool,n]),e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-4xl max-h-[90vh] overflow-y-auto p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"sticky top-0 bg-white dark:bg-gray-800 pb-4 mb-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:"Pool Details"}),e.jsx("button",{className:"text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 px-3 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition flex-shrink-0",onClick:s,children:"âœ• Close"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-amber-600 dark:text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"Swap Fee"}),e.jsx("div",{className:"text-xl font-bold text-amber-900 dark:text-amber-100",children:u?`${u} S`:"Loading..."})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 mb-4",children:[e.jsx(He,{address:t.nftCollection,collectionName:a,size:64}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"font-semibold text-base sm:text-lg text-blue-600 dark:text-blue-400 mb-1",children:["Collection: ",e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:a||"Loading..."})]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["SwapPool: ",e.jsxs("span",{className:"font-mono",children:[t.swapPool.slice(0,6),"...",t.swapPool.slice(-4)]})]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Receipt: ",e.jsxs("span",{className:"font-mono",children:[t.stakeReceipt.slice(0,6),"...",t.stakeReceipt.slice(-4)]})]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Creator: ",t.creator]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Created: ",t.createdAt]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Active: ",t.active?"Yes":"No"]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-3 flex-wrap",children:[e.jsxs("a",{className:"inline-flex items-center gap-2 px-4 py-2.5 text-sm font-medium bg-blue-500 hover:bg-blue-600 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200",href:`https://explorer.sonic.org/address/${t.swapPool}`,target:"_blank",rel:"noreferrer",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Explorer"]}),e.jsxs("a",{className:"inline-flex items-center gap-2 px-4 py-2.5 text-sm font-medium bg-purple-500 hover:bg-purple-600 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200",href:`https://nft.paintswap.io/sonic/collections/${t.nftCollection}`,target:"_blank",rel:"noreferrer",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2h4a1 1 0 110 2h-1v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6H3a1 1 0 110-2h4zM9 3v1h6V3H9zm2 5a1 1 0 100 2 1 1 0 000-2zm0 4a1 1 0 100 2 1 1 0 000-2z"})}),"PaintSwap"]}),e.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2.5 text-sm font-medium bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg shadow-md hover:shadow-lg transition-all duration-200",onClick:()=>navigator.clipboard.writeText(t.swapPool),children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Address"]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(ht,{swapPool:t.swapPool,stakeReceipt:t.stakeReceipt,provider:n})})]})})}async function vt(t,a){try{return await new B(t,["function name() view returns (string)"],a).name()}catch{return"Unknown Collection"}}function kt(){const{address:t,provider:a,signer:s,isConnected:n,isCorrectNetwork:u}=Re(),[d,l]=o.useState([]),[h,r]=o.useState({}),[p,c]=o.useState(!1),[x,g]=o.useState(null),[b,D]=o.useState(null),[I,$]=o.useState(""),[E,Z]=o.useState(!0),[O,oe]=o.useState(""),[J,se]=o.useState(""),[re,le]=o.useState(!1),[Y,de]=o.useState(new Set),[te,K]=o.useState("0"),[ne,ie]=o.useState(!1),[F,H]=o.useState(""),me="0x1Db92C2F11b7716f3fa6E94969a8649a32adB1De",[Q,Se]=o.useState(me),ye=async(m,M)=>{if(!t||!M)return;const N=new Set;try{for(const S of m)try{const A=await new B(S.stakeReceipt,["function balanceOf(address) view returns (uint256)"],M).balanceOf(t);Number(A)>0&&N.add(S.swapPool)}catch(w){console.warn(`Failed to check stakes for pool ${S.swapPool}:`,w)}}catch(S){console.warn("Failed to check user stakes:",S)}de(N)},i=d.filter(m=>{const M=J.toLowerCase(),N=!J||h[m.nftCollection]&&h[m.nftCollection].toLowerCase().includes(M)||m.nftCollection.toLowerCase().includes(M)||m.swapPool.toLowerCase().includes(M),S=!re||Y.has(m.swapPool);return N&&S});o.useEffect(()=>{(async()=>{Z(!0);let M=!1;try{const N=["https://rpc.soniclabs.com","https://rpc.soniclabs.com","https://sonic.drpc.org","https://sonic.api.onfinality.io/public","https://sonic-rpc.publicnode.com"].filter(Boolean);for(const S of N)try{const w=new Ge(S);await w.getBlockNumber(),D(w),$(""),console.log("Provider set: "+S),M=!0;break}catch(w){console.warn("RPC failed",S,w)}if(window.ethereum&&M)try{const S=await window.ethereum.request({method:"eth_chainId"}),w=parseInt(S,16);w!==146&&console.warn("Wallet connected to chainId",w,"but using RPC for read operations")}catch(S){console.warn("Could not read chainId from wallet",S)}M||console.warn("No working provider found")}catch(N){console.warn("Provider init failed",N)}Z(!1)})()},[]);const C=async()=>{if(!Q){console.warn("Factory address not set. Provide VITE_FACTORY_ADDRESS or public/contracts.json");return}if(!b){console.warn("fetchPools called without provider");return}c(!0),oe("");try{try{const w=await b.getNetwork();w&&w.chainId&&Number(w.chainId)!==146&&console.warn(`Connected to chain ${w.chainId}, expected 146 (Sonic)`);const A=await b.send("eth_getCode",[Q,"latest"]);(!A||A==="0x"||A==="0x0")&&console.warn(`No contract found at ${Q}`)}catch(w){console.warn("Network/code check failed",w)}const m=new B(Q,ot,b);let M=[];try{M=await m.getAllPools(),M=M.filter(w=>w.active)}catch(w){console.error("Failed to get pools from factory:",w),M=[]}console.log("All active pools from contract:",M);const N=M.map(w=>({nftCollection:w.nftCollection,swapPool:w.swapPool,stakeReceipt:w.stakeReceipt,createdAt:new Date(Number(w.createdAt)*1e3).toLocaleString(),creator:w.creator,active:w.active,poolAddress:w.swapPool}));console.log("All pools (no deduplication applied):",N),l(N);const S={};for(const w of N)S[w.nftCollection]=await vt(w.nftCollection,b);r(S),t&&await ye(N,b)}catch(m){console.error("Failed to fetch pools",m)}c(!1)},U=async()=>{if(!t||!b||Y.size===0){K("0");return}try{let m=Xe("0");for(const M of d)if(Y.has(M.swapPool))try{const N=new B(M.stakeReceipt,be,b);let S;N.earned?S=await N.earned(t):S=await N.pendingRewards(t),m=m+S}catch(N){console.warn(`Failed to fetch rewards for pool ${M.swapPool}:`,N)}K(ve(m))}catch(m){console.error("Failed to calculate total rewards:",m),K("0")}},G=async()=>{if(!(!s||Y.size===0)){ie(!0),H("Claiming rewards from all pools...");try{let m=0,M=0;for(const N of d)if(Y.has(N.swapPool))try{const S=new B(N.stakeReceipt,be,s);let w;S.earned?w=await S.earned(t):w=await S.pendingRewards(t),w>0&&(await(await S.claimRewards()).wait(),m++,console.log(`âœ… Claimed rewards from pool: ${N.swapPool}`))}catch(S){M++,console.error(`âŒ Failed to claim from pool ${N.swapPool}:`,S)}m>0?(H(`âœ… Successfully claimed rewards from ${m} pool(s)!`),await U()):M>0?H(`âŒ Failed to claim rewards from ${M} pool(s)`):H("No rewards to claim")}catch(m){H(`âŒ Claim all failed: ${m.reason||m.message}`)}ie(!1),setTimeout(()=>H(""),5e3)}};return o.useEffect(()=>{b&&Q&&C()},[b,Q]),o.useEffect(()=>{U()},[d,Y,t]),o.useEffect(()=>{if(Y.size>0){const m=setInterval(U,3e4);return()=>clearInterval(m)}},[Y]),e.jsxs("div",{className:"space-y-6",children:[O&&e.jsxs("div",{className:"p-4 bg-red-900/20 border border-red-500/20 text-red-400 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{children:"âš ï¸"}),e.jsx("span",{className:"font-semibold",children:"Error"})]}),e.jsx("p",{className:"text-sm",children:O})]}),E&&e.jsxs("div",{className:"p-6 bg-card/30 rounded-xl text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-accent border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"font-semibold",children:"Connecting to Sonic Network..."})]}),e.jsx("p",{className:"text-sm text-muted",children:"Please wait while we establish connection"})]}),n&&Y.size>0&&e.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-green-50 dark:from-emerald-900/20 dark:to-green-900/20 border border-emerald-200 dark:border-emerald-800 rounded-xl p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-emerald-100 dark:bg-emerald-900/30 rounded-full",children:e.jsx("svg",{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-emerald-900 dark:text-emerald-100",children:"Total Pending Rewards"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:[te," S"]}),e.jsxs("div",{className:"text-sm text-emerald-700 dark:text-emerald-300",children:["From ",Y.size," staked pool",Y.size!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("button",{onClick:G,disabled:ne||parseFloat(te)===0,className:"inline-flex items-center gap-2 px-6 py-3 bg-emerald-600 hover:bg-emerald-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 disabled:transform-none",children:ne?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Claiming..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Claim All Rewards"]})}),F&&e.jsx("div",{className:`text-sm font-medium ${F.includes("âœ…")?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:F})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-xl font-bold text-accent",children:"Swap Pools"}),e.jsxs("div",{className:"px-3 py-1 bg-accent/10 text-accent rounded-full text-sm font-medium",children:[i.length," ",re?"staked":"active"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-xs text-muted",children:["Factory: ",e.jsxs("span",{className:"font-mono text-accent",children:[Q==null?void 0:Q.slice(0,6),"...",(Q==null?void 0:Q.slice(-4))||"Not set"]})]}),e.jsxs("button",{onClick:C,disabled:p,className:"px-4 py-2 bg-accent text-white rounded-lg shadow hover:bg-accent/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-medium",children:[p&&e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),p?"Loading...":"Refresh Pools"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 p-4 bg-white/50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Search by collection name, address, or pool address...",value:J,onChange:m=>se(m.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-sm placeholder-gray-500 dark:placeholder-gray-400"}),J&&e.jsx("button",{onClick:()=>se(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:re,onChange:m=>le(m.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-green-500",children:"ðŸŽ¯"}),"My Staked Pools"]})]}),re&&e.jsxs("div",{className:"px-2 py-1 bg-green-500/10 text-green-600 dark:text-green-400 rounded text-xs font-medium",children:[Y.size," staked"]})]})]}),p&&i.length===0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(m=>e.jsx("div",{className:"p-4 sm:p-5 bg-card rounded-2xl shadow-lg animate-pulse",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-gray-600 rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-600 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-600 rounded w-1/2"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-600 rounded w-2/3"}),e.jsx("div",{className:"h-3 bg-gray-600 rounded w-1/2"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-6 bg-gray-600 rounded w-16"}),e.jsx("div",{className:"h-6 bg-gray-600 rounded w-20"})]})]})},m))}):i.length===0?e.jsx("div",{className:"p-8 bg-white/90 dark:bg-gray-800/90 rounded-2xl text-center border border-gray-200 dark:border-gray-700",children:d.length===0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸŠâ€â™‚ï¸"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Swap Pools Found"}),e.jsx("p",{className:"text-muted mb-4",children:Q?"No pools are currently registered with this factory.":"Please set a factory address first."}),Q&&e.jsx("button",{onClick:C,className:"px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/80 transition-colors",children:"Refresh Pools"})]}):re?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸŽ¯"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Staked Pools"}),e.jsx("p",{className:"text-muted mb-4",children:"You haven't staked any NFTs in pools yet. Start staking to earn rewards from trading fees!"}),e.jsx("button",{onClick:()=>le(!1),className:"px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/80 transition-colors",children:"Show All Pools"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ”"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Results Found"}),e.jsxs("p",{className:"text-muted mb-4",children:['No pools match your search "',J,'". Try adjusting your search terms.']}),e.jsx("button",{onClick:()=>se(""),className:"px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/80 transition-colors",children:"Clear Search"})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map((m,M)=>e.jsxs("div",{className:"group p-4 sm:p-5 bg-white/95 dark:bg-gray-800/95 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-200 dark:border-gray-700 hover:border-blue-400/50 cursor-pointer",onClick:()=>g(m),children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(He,{address:m.nftCollection,collectionName:h[m.nftCollection],size:56}),Y.has(m.swapPool)&&e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"âœ“"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-blue-600 dark:text-blue-400 truncate",children:h[m.nftCollection]||"Loading..."}),Y.has(m.swapPool)&&e.jsxs("div",{className:"px-2 py-1 bg-green-500/10 text-green-600 dark:text-green-400 rounded-full text-xs font-medium flex items-center gap-1",children:[e.jsx("span",{children:"ðŸŽ¯"}),e.jsx("span",{children:"Staked"})]})]}),e.jsxs("p",{className:"text-xs text-muted font-mono truncate",children:[m.nftCollection.slice(0,8),"...",m.nftCollection.slice(-6)]})]})]}),e.jsxs("div",{className:"space-y-2 text-xs text-muted mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pool:"}),e.jsxs("span",{className:"font-mono",children:[m.swapPool.slice(0,8),"...",m.swapPool.slice(-6)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Receipt:"}),e.jsxs("span",{className:"font-mono",children:[m.stakeReceipt.slice(0,8),"...",m.stakeReceipt.slice(-6)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Created:"}),e.jsx("span",{children:new Date(Number(m.createdAt)).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-colors text-sm font-medium shadow-sm",onClick:N=>{N.stopPropagation(),g(m)},children:"View Details"}),e.jsx("button",{className:"px-3 py-2 bg-secondary/50 hover:bg-secondary text-text rounded-lg transition-colors text-xs",onClick:N=>{N.stopPropagation(),navigator.clipboard.writeText(m.swapPool)},title:"Copy pool address",children:"ðŸ“‹"})]})]},`${m.swapPool}-${M}`))})]}),x&&e.jsx(wt,{pool:x,collectionName:h[x.nftCollection],onClose:()=>g(null),provider:b})]})}const Tt="modulepreload",jt=function(t){return"/"+t},Be={},Nt=function(a,s,n){let u=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),h=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));u=Promise.allSettled(s.map(r=>{if(r=jt(r),r in Be)return;Be[r]=!0;const p=r.endsWith(".css"),c=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${c}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":Tt,p||(x.as="script"),x.crossOrigin="",x.href=r,h&&x.setAttribute("nonce",h),document.head.appendChild(x),p)return new Promise((g,b)=>{x.addEventListener("load",g),x.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${r}`)))})}))}function d(l){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=l,window.dispatchEvent(h),!h.defaultPrevented)throw l}return u.then(l=>{for(const h of l||[])h.status==="rejected"&&d(h.reason);return a().catch(d)})},ge=[{inputs:[{internalType:"address",name:"_stonerNFT",type:"address"},{internalType:"address",name:"_receiptToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AlreadyStaked",type:"error"},{inputs:[],name:"DuplicateTokenId",type:"error"},{inputs:[],name:"EmptyArray",type:"error"},{inputs:[],name:"NoERC20Rewards",type:"error"},{inputs:[],name:"NoRewards",type:"error"},{inputs:[],name:"NoStakers",type:"error"},{inputs:[],name:"NotStaked",type:"error"},{inputs:[],name:"NotYourToken",type:"error"},{inputs:[],name:"TokenAlreadyWhitelisted",type:"error"},{inputs:[],name:"TokenNotWhitelisted",type:"error"},{inputs:[],name:"TooManyTokens",type:"error"},{inputs:[],name:"TransferFailed",type:"error"},{inputs:[],name:"ZeroAddress",type:"error"},{inputs:[],name:"ZeroETH",type:"error"},{inputs:[],name:"ZeroTokenAmount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ERC20RewardClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ERC20RewardReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"EmergencyERC20Withdrawal",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"EmergencyETHWithdrawal",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"EmergencyUnstake",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"}],name:"TokenRemovedFromWhitelist",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"}],name:"TokenWhitelisted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Unstaked",type:"event"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"addWhitelistedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"address",name:"token",type:"address"}],name:"calculatePendingERC20Rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"calculatePendingRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimAllERC20Rewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimAllRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"claimERC20Rewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimRewardsOnly",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"address",name:"token",type:"address"}],name:"earnedERC20",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"to",type:"address"}],name:"emergencyUnstake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"emergencyUnstakeWithClaim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"emergencyWithdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"emergencyWithdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"erc20RewardCarry",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"erc20RewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"erc20Rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"erc20TotalRewardsClaimed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"erc20UserRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"exit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getAllPendingERC20Rewards",outputs:[{internalType:"address[]",name:"tokens",type:"address[]"},{internalType:"uint256[]",name:"rewardAmounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"getERC20PoolInfo",outputs:[{internalType:"address",name:"tokenAddress",type:"address"},{internalType:"uint256",name:"totalClaimedAmount",type:"uint256"},{internalType:"uint256",name:"contractBalance",type:"uint256"},{internalType:"bool",name:"isWhitelisted",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPoolInfo",outputs:[{internalType:"address",name:"nftAddress",type:"address"},{internalType:"uint256",name:"totalStakedTokens",type:"uint256"},{internalType:"uint256",name:"totalRewards",type:"uint256"},{internalType:"uint256",name:"contractBalance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getStakeInfo",outputs:[{internalType:"address",name:"staker",type:"address"},{internalType:"uint256",name:"stakedAt",type:"uint256"},{internalType:"uint256",name:"stakingDuration",type:"uint256"},{internalType:"bool",name:"active",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getStakedTokens",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getWhitelistedTokens",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"isStaked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"notifyERC20Reward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"notifyNativeReward",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"pure",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receiptIdByOriginal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"receiptToken",outputs:[{internalType:"contract IStakeReceipt",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"registerMe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"removeWhitelistedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardCarry",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"stakeMultiple",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"stakedTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"stakerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stonerNFT",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalRewardsClaimed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalStaked",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"unstake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"unstakeMultiple",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whitelistedTokens",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"whitelistedTokensList",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],We=[{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"_startTime",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AlreadyExists",type:"error"},{inputs:[],name:"InvalidOwner",type:"error"},{inputs:[],name:"InvalidRecipient",type:"error"},{inputs:[],name:"InvalidSender",type:"error"},{inputs:[],name:"NotFound",type:"error"},{inputs:[],name:"Unauthorized",type:"error"},{inputs:[],name:"UnsafeRecipient",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ERC20Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"ERC721Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"activePhase",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amountOrId",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"availableIds",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseTokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"phase",type:"uint256"},{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"}],name:"canMintAmountInPhase",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"}],name:"contractNFTBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"}],name:"contractTokenBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"enoughTokenBalance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"phase",type:"uint256"},{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256",name:"quantity",type:"uint256"}],name:"grantPhaseAccess",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"phase",type:"uint256"},{internalType:"address",name:"account",type:"address"}],name:"hasPhaseAccess",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxMintPerTx",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxMintable",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"quantity",type:"uint256"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"mintActive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"mintHasStarted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"minted",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"}],name:"ownerMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"owner",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"phaseDuration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"phaseMintsRemaining",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"phases",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"revokeOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"royaltyAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"royaltyReceiver",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"secondsUntilStart",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_baseURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxMintPerTx",type:"uint256"}],name:"setMaxPerTx",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"mintActive_",type:"bool"}],name:"setMintActive",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_paused",type:"bool"}],name:"setPaused",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_price",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_royaltyAmount",type:"uint256"}],name:"setRoyaltyAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_receiver",type:"address"}],name:"setRoyaltyReceiver",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_startTime",type:"uint256"}],name:"setStartTime",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"target",type:"address"},{internalType:"bool",name:"state",type:"bool"}],name:"setWhitelist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"startTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalAvailableIds",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"totalNFTsOwned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalNativeSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whitelist",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],St="0xB6748d708B5Cda0eA8c53e7072566971FCCb6b49",Ct="0x5777fc6ca7f6BDc02dF3323A0C05970bB9D05b74",qe={stonerStakeReceipt:St,stonerFeePool:Ct},pe=qe.stonerFeePool,Mt=qe.stonerStakeReceipt,Pe="0x9b567e03d891F537b2B7874aA4A3308Cfe2F4FBb";function It(){console.log("ðŸŽ¯ StonerFeePoolActions component loaded!");const{address:t,signer:a,provider:s,isConnected:n,isCorrectNetwork:u}=Re(),[d,l]=o.useState(""),[h,r]=o.useState(!1),[p,c]=o.useState([]),[x,g]=o.useState([]),[b,D]=o.useState([]),[I,$]=o.useState([]),[E,Z]=o.useState(!1),[O,oe]=o.useState("0"),[J,se]=o.useState([]),[re,le]=o.useState([]),[Y,de]=o.useState(!1),te=async()=>{if(!a)throw new Error("Wallet not connected");return a},K=async()=>{if(console.log("ðŸŽ¯ fetchNFTs called in StonerFeePoolActions"),!n||!s||!t){console.log("âŒ Wallet not connected, skipping NFT fetch");return}try{const i=t,C=new B(Pe,We,s),U=new B(pe,ge,s),G=await C.isApprovedForAll(i,pe);Z(G);const m=await C.totalNFTsOwned(i);console.log("ðŸ”¢ Stoner NFT balance:",m.toString());const M=Number(m),N=1e3;if(M>N){console.log(`âš ï¸ Balance seems unusually large (${M}), limiting to ${N}`),c([]),g([]),l(`Warning: NFT balance appears corrupted (${M}). Please check the contract.`);return}const S=[];let w=!1;try{await C.tokenOfOwnerByIndex(i,0),w=!0,console.log("âœ… Using tokenOfOwnerByIndex approach");for(let A=0;A<Math.min(Number(m),50);A++)try{const V=await C.tokenOfOwnerByIndex(i,A);console.log(`ðŸ“ Found wallet token ${A+1}/${m}: #${V.toString()}`);let _=null;try{let y=await C.tokenURI(V);if(y.startsWith("ipfs://")&&(y=y.replace("ipfs://","https://ipfs.io/ipfs/")),y.startsWith("http")){const T=await(await fetch(y)).json();_=T.image||T.image_url,_&&_.startsWith("ipfs://")&&(_=_.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for token",V.toString())}S.push({tokenId:V.toString(),image:_})}catch(V){console.warn(`Failed to get token at index ${A}:`,V.message);continue}}catch{console.log("âŒ tokenOfOwnerByIndex not supported (ERC404 contract), trying event-based approach"),w=!1;try{console.log("ðŸ” Using direct ownership verification for ERC404 contract...");const V=new Set,_=Math.max(1e4,Number(m)*50),y=20;let v=0;for(let k=1;k<=_&&v<Number(m);k+=y){const L=Math.min(k+y-1,_),P=[];for(let f=k;f<=L;f++)P.push(C.ownerOf(f).then(W=>({tokenId:f,owner:W.toLowerCase()})).catch(()=>({tokenId:f,owner:null})));try{const f=await Promise.all(P);for(const{tokenId:W,owner:q}of f)if(q===i.toLowerCase()&&(V.add(W.toString()),v++,console.log(`âœ… Found owned token via direct check: #${W} (${v}/${m})`),v>=Number(m)))break}catch(f){console.warn(`Batch ${k}-${L} failed:`,f.message)}if(v>=Number(m))break;await new Promise(f=>setTimeout(f,10))}console.log(`ðŸŽ¯ Direct check found ${v} total tokens`);const T=Array.from(V).slice(0,50);console.log(`ðŸ“‹ Validating ${T.length} tokens and fetching metadata...`);const j=5;let R=0;for(let k=0;k<T.length;k+=j){const P=T.slice(k,k+j).map(async f=>{try{if((await C.ownerOf(f)).toLowerCase()!==i.toLowerCase())return null;let q=null;try{let X=await C.tokenURI(f);if(X.startsWith("ipfs://")&&(X=X.replace("ipfs://","https://ipfs.io/ipfs/")),X.startsWith("http")){const ee=await(await fetch(X)).json();q=ee.image||ee.image_url,q&&q.startsWith("ipfs://")&&(q=q.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for token",f)}return{tokenId:f.toString(),image:q}}catch(W){return console.warn(`Token ${f} validation failed:`,W.message),null}});try{const f=await Promise.all(P);for(const W of f)W&&(S.push(W),R++,console.log(`âœ… Validated token #${W.tokenId} (${R}/${T.length})`))}catch(f){console.warn(`Metadata batch ${k} failed:`,f.message)}k+j<T.length&&await new Promise(f=>setTimeout(f,50))}R>0&&(w=!0,console.log(`ðŸŽ‰ Successfully loaded ${R} Stoner NFTs via direct ownership check`))}catch(V){console.warn("Direct ownership check failed:",V.message)}}if(!w||S.length<Number(m)){console.log("ðŸ” Trying multicall brute force token discovery...");try{const{Multicall:A}=await Nt(async()=>{const{Multicall:k}=await import("./index-Blt0uD8X.js");return{Multicall:k}},__vite__mapDeps([0,1])),V=new A({ethersProvider:s,tryAggregate:!0}),_=1e3,y=[];for(let k=0;k<=_;k++)y.push({reference:`ownerOf_${k}`,contractAddress:Pe,abi:We,calls:[{methodName:"ownerOf",methodParameters:[k]}]});const v=await V.call(y),j=Object.entries(v.results).filter(([k,L])=>L.callsReturnContext&&L.callsReturnContext[0].returnValues&&L.callsReturnContext[0].returnValues[0]&&L.callsReturnContext[0].returnValues[0].toLowerCase()===i.toLowerCase()).map(([k])=>parseInt(k.replace("ownerOf_",""))).map(async k=>{if(S.some(f=>f.tokenId===k.toString()))return null;let P=null;try{let f=await C.tokenURI(k);if(f.startsWith("ipfs://")&&(f=f.replace("ipfs://","https://ipfs.io/ipfs/")),f.startsWith("http")){const q=await(await fetch(f)).json();P=q.image||q.image_url,P&&P.startsWith("ipfs://")&&(P=P.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for token",k.toString())}return{tokenId:k.toString(),image:P}});(await Promise.all(j)).forEach(k=>{k&&S.push(k)})}catch(A){console.warn("Multicall failed (network may not support it):",A.message),console.log("ðŸ“‹ Continuing with enumerable results only")}}console.log(`âœ… Loaded ${S.length}/${m} wallet Stoner NFTs`),c(S);try{console.log("ðŸ”¥ Fetching staked NFTs from StakeReceipt contract...");const A=new B(Mt,be,s);let V=[];try{const[_,y]=await A.getUserReceipts(i);console.log("ðŸ”¥ Raw receipts and original tokens from getUserReceipts:",_,y);const v=Array.from(_).map(j=>j.toString()),T=Array.from(y).map(j=>j.toString());console.log("ðŸ”¥ Staked Stoner NFT token IDs from receipts:",T);for(let j=0;j<T.length;j++){const R=T[j],k=v[j];let L=null;try{let P=await C.tokenURI(R);if(P.startsWith("ipfs://")&&(P=P.replace("ipfs://","https://ipfs.io/ipfs/")),P.startsWith("http")){const W=await(await fetch(P)).json();L=W.image||W.image_url,L&&L.startsWith("ipfs://")&&(L=L.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for staked token",R)}V.push({tokenId:R,receiptId:k,image:L})}}catch{console.log("ðŸ”¥ getUserReceipts() not available, trying fallback method...");try{const y=await A.balanceOf(i);if(console.log("ðŸ”¥ StakeReceipt balance:",y.toString()),y>0){const v=[];try{for(let T=0;T<Number(y);T++){const j=await A.tokenOfOwnerByIndex(i,T);v.push(j.toString())}console.log("ðŸ”¥ Receipt token IDs:",v)}catch{console.log("ðŸ”¥ tokenOfOwnerByIndex not available, using brute force for receipts...");for(let j=1;j<=1e3;j++)try{(await A.ownerOf(j)).toLowerCase()===i.toLowerCase()&&v.push(j.toString())}catch{}}for(const T of v){let j=null;try{j=await A.receiptToOriginalToken(T)}catch{try{j=await A.getOriginalTokenId(T)}catch{j=T}}if(j){let R=null;try{let k=await C.tokenURI(j);if(k.startsWith("ipfs://")&&(k=k.replace("ipfs://","https://ipfs.io/ipfs/")),k.startsWith("http")){const P=await(await fetch(k)).json();R=P.image||P.image_url,R&&R.startsWith("ipfs://")&&(R=R.replace("ipfs://","https://ipfs.io/ipfs/"))}}catch{console.warn("Failed to fetch metadata for staked token",j.toString())}V.push({tokenId:j.toString(),receiptId:T,image:R})}}}}catch(y){console.log("ðŸ”¥ Fallback method also failed:",y)}}console.log(`âœ… Loaded ${V.length} staked Stoner NFTs:`,V.map(_=>_.tokenId)),g(V)}catch(A){console.warn("Failed to fetch staked NFTs:",A)}}catch(i){console.error("Failed to fetch NFTs:",i)}},ne=async()=>{if(console.log("ðŸ’° fetchRewards called in StonerFeePoolActions"),!window.ethereum||!n){console.log("âŒ Wallet not connected, skipping rewards fetch");return}try{de(!0);const i=new Ne(window.ethereum),U=await(await i.getSigner()).getAddress(),G=new B(pe,ge,i),m=await G.calculatePendingRewards(U);oe(ve(m)),console.log("ðŸ’Ž Native S rewards:",ve(m));const M=await G.getWhitelistedTokens();le(M),console.log("ðŸ“‹ Whitelisted tokens:",M);const N=M.map(async w=>{try{const A=await G.calculatePendingERC20Rewards(U,w);let V="Unknown",_=18;try{const y=new B(w,["function symbol() view returns (string)","function decimals() view returns (uint8)"],i);V=await y.symbol(),_=await y.decimals()}catch(y){console.warn(`Failed to get token info for ${w}:`,y.message)}return{address:w,symbol:V,decimals:_,earned:et(A,_),rawEarned:A.toString()}}catch(A){return console.warn(`Failed to get rewards for token ${w}:`,A.message),null}}),S=(await Promise.all(N)).filter(w=>w!==null);se(S),console.log("ðŸª™ ERC20 rewards:",S)}catch(i){console.error("Failed to fetch rewards:",i)}finally{de(!1)}};o.useEffect(()=>{n&&t&&u&&(console.log("ðŸ”— Wallet connected, fetching NFTs and rewards..."),K(),ne())},[n,t,u]);const ie=async()=>{if(b.length===0){l("Select NFTs to stake first");return}r(!0),l("");try{const i=await te(),C=new B(pe,ge,i);let U;b.length===1?U=await C.stake(b[0]):U=await C.stakeMultiple(b),l("Staking..."),await U.wait(),l("Staking successful!"),D([]),await K()}catch(i){l("Staking failed: "+(i.reason||i.message))}r(!1)},F=async()=>{if(I.length===0){l("Select staked NFTs to unstake first");return}r(!0),l("");try{const i=await te(),C=new B(pe,ge,i),U=I.map(m=>{const M=x.find(N=>N.tokenId===m);return M?M.receiptId:m});console.log("ðŸ”¥ Unstaking with receipt IDs:",U);let G;U.length===1?G=await C.unstake(U[0]):G=await C.unstakeMultiple(U),l("Unstaking..."),await G.wait(),l("Unstaking successful!"),$([]),await K()}catch(i){console.error("Unstaking failed:",i),l("Unstaking failed: "+(i.reason||i.message))}r(!1)},H=async()=>{r(!0),l("");try{const i=await te(),U=await new B(pe,ge,i).claimAllRewards();l("Claiming rewards..."),await U.wait(),l("Rewards claimed successfully!"),await ne()}catch(i){l("Claim failed: "+(i.reason||i.message))}r(!1)},me=async()=>{r(!0),l("");try{const i=await te(),U=await new B(pe,ge,i).claimRewardsOnly();l("Claiming native rewards..."),await U.wait(),l("Native rewards claimed successfully!"),await ne()}catch(i){l("Native claim failed: "+(i.reason||i.message))}r(!1)},Q=async i=>{r(!0),l("");try{const C=await te(),G=await new B(pe,ge,C).claimERC20Rewards(i);l("Claiming ERC20 rewards..."),await G.wait(),l("ERC20 rewards claimed successfully!"),await ne()}catch(C){l("ERC20 claim failed: "+(C.reason||C.message))}r(!1)},Se=async()=>{r(!0);try{const i=await te();await(await new B(Pe,["function setApprovalForAll(address,bool) external"],i).setApprovalForAll(pe,!0)).wait(),Z(!0),l("Approval successful!")}catch(i){l("Approval failed: "+(i.reason||i.message))}r(!1)},ye=!n;return e.jsxs("div",{className:"p-6 bg-white/95 dark:bg-gray-800/95 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 backdrop-blur-sm space-y-6",children:[ye&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-600 dark:text-blue-400 mb-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"font-medium",children:"Connect Wallet to Interact"})]}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Connect your wallet using the button in the header to stake NFTs and claim rewards"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"ðŸŒ¿"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-green-400",children:"Stoner NFT Staking"}),e.jsx("p",{className:"text-sm text-muted",children:n?`Connected: ${t.slice(0,6)}...${t.slice(-4)}`:"Preview Mode - Connect wallet to interact"})]})]}),e.jsx("button",{onClick:H,disabled:h||!n,className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg hover:from-yellow-600 hover:to-orange-600 transition-all disabled:opacity-50 font-medium",title:n?"":"Connect wallet to claim rewards",children:"Claim Rewards"})]}),d&&e.jsx("div",{className:`p-3 rounded-lg ${d.includes("successful")||d.includes("claimed")?"bg-green-900/20 border border-green-500/20 text-green-400":d.includes("failed")||d.includes("error")?"bg-red-900/20 border border-red-500/20 text-red-400":"bg-blue-900/20 border border-blue-500/20 text-blue-400"}`,children:d}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/10 to-orange-500/10 rounded-xl border border-yellow-500/20 p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-lg",children:"ðŸ’°"})}),e.jsx("h4",{className:"font-semibold text-yellow-400",children:"Claimable Rewards"})]}),e.jsx("button",{onClick:ne,disabled:Y||!n,className:"px-3 py-1 bg-yellow-600 text-white rounded text-sm disabled:opacity-50 hover:bg-yellow-700 transition-colors",title:n?"":"Connect wallet to refresh rewards",children:Y?"Loading...":"Refresh"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-400 text-lg",children:"âš¡"}),e.jsx("span",{className:"font-medium text-blue-400",children:"S Rewards"})]}),e.jsx("button",{onClick:me,disabled:h||parseFloat(O)===0||!n,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm disabled:opacity-50 hover:bg-blue-700 transition-colors",title:n?"":"Connect wallet to claim",children:"Claim S"})]}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:[parseFloat(O).toFixed(6)," S"]})]}),J.length>0?e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-400 text-lg",children:"ðŸª™"}),e.jsx("span",{className:"font-medium text-green-400",children:"Token Rewards"})]}),e.jsx("button",{onClick:H,disabled:h||J.every(i=>parseFloat(i.earned)===0)||!n,className:"px-3 py-1 bg-green-600 text-white rounded text-sm disabled:opacity-50 hover:bg-green-700 transition-colors",title:n?"":"Connect wallet to claim",children:"Claim All"})]}),e.jsx("div",{className:"space-y-2 max-h-24 overflow-y-auto",children:J.map((i,C)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-400",children:[i.symbol,":"]}),e.jsx("span",{className:"text-white font-medium",children:parseFloat(i.earned).toFixed(4)})]}),e.jsx("button",{onClick:()=>Q(i.address),disabled:h||parseFloat(i.earned)===0||!n,className:"px-2 py-1 bg-green-600/80 text-white rounded text-xs disabled:opacity-50 hover:bg-green-600 transition-colors",title:n?"":"Connect wallet to claim",children:"Claim"})]},i.address))})]}):e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-gray-400 text-lg",children:"ðŸª™"}),e.jsx("span",{className:"font-medium text-gray-400",children:"Token Rewards"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:"No whitelisted tokens or rewards available"})]})]}),(parseFloat(O)>0||J.some(i=>parseFloat(i.earned)>0))&&e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:H,disabled:h||!n,className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-orange-600 text-white rounded-lg disabled:opacity-50 hover:from-yellow-600 hover:to-orange-700 transition-all font-semibold",title:n?"":"Connect wallet to claim rewards",children:h?"Claiming...":"Claim All Rewards"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-semibold text-green-400",children:["Stake NFTs (",b.length," selected)"]}),!E&&e.jsx("button",{onClick:Se,disabled:h||!n,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm disabled:opacity-50",title:n?"":"Connect wallet to approve",children:"Approve All"})]}),p.length===0?e.jsxs("div",{className:"p-6 bg-card/30 rounded-xl text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ”"}),e.jsx("p",{className:"text-muted",children:"No Stoner NFTs found in wallet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-4 gap-3",children:p.map(i=>e.jsxs("div",{className:`relative cursor-pointer rounded-lg border-2 transition-all ${b.includes(i.tokenId)?"border-green-400 bg-green-400/10":"border-transparent hover:border-accent/30"}`,onClick:()=>{b.includes(i.tokenId)?D(C=>C.filter(U=>U!==i.tokenId)):D(C=>[...C,i.tokenId])},children:[e.jsx("div",{className:"aspect-square p-2",children:e.jsx(ke,{image:i.image,tokenId:i.tokenId,size:"100%"})}),e.jsxs("div",{className:"text-xs text-center p-1",children:["#",i.tokenId]})]},i.tokenId))}),e.jsx("button",{onClick:ie,disabled:h||b.length===0||!E||!n,className:"w-full px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg disabled:opacity-50",title:n?"":"Connect wallet to stake NFTs",children:h?"Staking...":`Stake ${b.length} NFT${b.length!==1?"s":""}`})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-blue-400",children:["Unstake NFTs (",I.length," selected)"]}),x.length===0?e.jsxs("div",{className:"p-6 bg-card/30 rounded-xl text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ“¦"}),e.jsx("p",{className:"text-muted",children:"No staked NFTs"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-4 gap-3",children:x.slice(0,12).map(i=>e.jsxs("div",{className:`relative cursor-pointer rounded-lg border-2 transition-all ${I.includes(i.tokenId)?"border-blue-400 bg-blue-400/10":"border-transparent hover:border-accent/30"}`,onClick:()=>{I.includes(i.tokenId)?$(C=>C.filter(U=>U!==i.tokenId)):$(C=>[...C,i.tokenId])},children:[e.jsx("div",{className:"aspect-square p-2",children:e.jsx(ke,{image:i.image,tokenId:i.tokenId,size:"100%"})}),e.jsxs("div",{className:"text-xs text-center p-1",children:["#",i.tokenId]})]},i.tokenId))}),e.jsx("button",{onClick:F,disabled:h||I.length===0||!n,className:"w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg disabled:opacity-50",title:n?"":"Connect wallet to unstake NFTs",children:h?"Unstaking...":`Unstake ${I.length} NFT${I.length!==1?"s":""}`})]})]})]})]})}function Ft(){return e.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-2xl",children:"ðŸƒ"})}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-400 via-emerald-500 to-teal-400 bg-clip-text text-transparent",children:"Stoner NFT Staking"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg max-w-2xl mx-auto",children:"Stake your Stoner NFTs to earn multiple token rewards and participate in the ecosystem"})]}),e.jsx(It,{})]})}const $e={chainId:"0x92",chainName:"Sonic Network",rpcUrls:["https://rpc.sonic.org"],nativeCurrency:{name:"S",symbol:"S",decimals:18},blockExplorerUrls:["https://explorer.sonic.org"]};function Rt({onNetworkReady:t}){const[a,s]=o.useState(null),[n,u]=o.useState(!1),[d,l]=o.useState(!1);o.useEffect(()=>{if(r(),window.ethereum)return window.ethereum.on("chainChanged",h),()=>window.ethereum.removeListener("chainChanged",h)},[]);const h=c=>{const x=parseInt(c,16);s(x),u(x===146),x===146&&(t==null||t(!0))},r=async()=>{if(window.ethereum)try{const c=await window.ethereum.request({method:"eth_chainId"}),x=parseInt(c,16);s(x),u(x===146),x===146&&(t==null||t(!0))}catch(c){console.warn("Failed to check network:",c)}},p=async()=>{if(window.ethereum){l(!0);try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:$e.chainId}]})}catch(c){if(c.code===4902)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[$e]})}catch(x){console.error("Failed to add Sonic network:",x)}else console.error("Failed to switch to Sonic network:",c)}l(!1)}};return window.ethereum?!n&&a!==null?e.jsx("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:"ðŸ”„"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-800 dark:text-orange-200",children:"Wrong Network"}),e.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:"Please switch to Sonic Network (Chain ID: 146)"})]})]}),e.jsx("button",{onClick:p,disabled:d,className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium disabled:opacity-50 flex items-center gap-2 transition-colors",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Switching..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"ðŸ”„"}),"Switch to Sonic"]})})]})}):null:e.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:"ðŸ¦Š"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-amber-800 dark:text-amber-200",children:"Wallet Required"}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Please install MetaMask or another Ethereum wallet to continue."})]})]})})}function Pt(){const{address:t,isConnecting:a,isCorrectNetwork:s,connectWallet:n,disconnect:u,switchToSonicNetwork:d,isConnected:l}=Re(),h=async()=>{try{await n()}catch(c){console.error("Failed to connect wallet:",c)}},r=async()=>{try{await d()}catch(c){console.error("Failed to switch network:",c)}},p=c=>c?`${c.slice(0,6)}...${c.slice(-4)}`:"";return l&&!s?e.jsx("button",{onClick:r,className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-semibold text-sm shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:"âš ï¸ Switch to Sonic"}):l?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900/50 dark:to-emerald-900/50 text-green-800 dark:text-green-200 rounded-xl font-semibold text-sm shadow-sm border border-green-200 dark:border-green-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),p(t)]}),e.jsx("button",{onClick:u,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",title:"Disconnect wallet",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsx("button",{onClick:h,disabled:a,className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-indigo-500 to-blue-500 hover:from-indigo-600 hover:to-blue-600 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold text-sm shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2 disabled:cursor-not-allowed",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Connecting..."]}):e.jsx(e.Fragment,{children:"ðŸ”— Connect Wallet"})})}function At(){const t=Ze(),[a,s]=o.useState(()=>typeof window<"u"?localStorage.getItem("theme")!=="light":!0);return we.useEffect(()=>{document.documentElement.classList.toggle("dark",a),localStorage.setItem("theme",a?"dark":"light")},[a]),e.jsx(xt,{children:e.jsx(lt,{children:e.jsxs("div",{className:"min-h-screen p-0 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:bg-gradient-to-br dark:from-zinc-900 dark:via-gray-900 dark:to-slate-900 text-gray-900 dark:text-gray-100",children:[e.jsx(Rt,{}),e.jsxs("div",{className:"max-w-6xl mx-auto p-2 sm:p-4 md:p-6 w-full",children:[e.jsxs("header",{className:"flex flex-col sm:flex-row items-center justify-between mb-8 py-6 px-4 sm:px-6 rounded-2xl shadow-xl bg-white/95 dark:bg-gray-800/95 backdrop-blur-lg gap-4 border border-gray-200 dark:border-gray-700 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 via-blue-500 to-teal-500 rounded-xl shadow-lg flex items-center justify-center group-hover:shadow-glow transition-all duration-300",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"ðŸŠ"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-extrabold bg-gradient-to-r from-indigo-600 via-blue-500 to-teal-400 bg-clip-text text-transparent",children:"NFT Swap Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 hidden sm:block",children:"Decentralized NFT trading on Sonic Network"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[t.pathname==="/"&&e.jsx(Ae,{to:"/staking",className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-semibold text-sm shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:"ðŸƒ Stoner Staking"}),t.pathname==="/staking"&&e.jsx(Ae,{to:"/",className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-indigo-500 to-blue-500 hover:from-indigo-600 hover:to-blue-600 text-white font-semibold text-sm shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:"â† Back to Swap Pools"}),e.jsx(Pt,{}),e.jsx("button",{onClick:()=>s(!a),className:"p-3 rounded-xl bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 transition-all duration-200 shadow-sm hover:shadow-md",title:"Toggle theme",children:e.jsx("span",{className:"text-lg",children:a?"ðŸŒ™":"â˜€ï¸"})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-100 to-blue-100 dark:from-indigo-900/50 dark:to-blue-900/50 text-indigo-800 dark:text-indigo-200 rounded-xl font-semibold text-sm shadow-sm border border-indigo-200 dark:border-indigo-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Sonic Network"]})]})]}),e.jsx("main",{children:e.jsxs(Je,{children:[e.jsx(Le,{path:"/",element:e.jsx(kt,{})}),e.jsx(Le,{path:"/staking",element:e.jsx(Ft,{})})]})})]})]})})})}_e(document.getElementById("root")).render(e.jsx(we.StrictMode,{children:e.jsx(Qe,{children:e.jsx(At,{})})}));
